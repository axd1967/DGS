
Installation instructions
-------------------------

Requirements:

*) A webserver which can use php, e.g., apache <http://httpd.apache.org>
*) php >= 4.1.0 <http://www.php.net>
*) mysql >= 3.23 <http://www.mysql.com>
*) cvs client <http://www.cvshome.org>

Last versions used:
 Apache Version Apache/1.3.29 (Unix) PHP/4.3.4
 MySQL 4.0.15




1) Download:

Either from cvs:
(( CAUTION: Recently, sourceforge.net disable the anonymous use of cvs.
   You must register yourself. Read the SourceForge documentations. ))

> cd /path/to/the/directory/where/you/want/dragon/to/be
> cvs -d:pserver:anonymous@cvs.dragongoserver.sourceforge.net:/cvsroot/dragongoserver login
> cvs -z3 -d:pserver:anonymous@cvs.dragongoserver.sourceforge.net:/cvsroot/dragongoserver co DragonGoServer
> mv DragonGoServer/* .
> rmdir DragonGoServer

or download a cvs snapshot from <http://www.dragongoserver.net/snapshot>


For both methods also download the images from <http://www.dragongoserver.net/snapshot>




2) Make a mysql database and a mysql user to access the database:

mysql> CREATE DATABASE dragon;
mysql> GRANT select, insert, update, delete ON dragon.* TO dragon@localhost IDENTIFIED BY 'secret';




3) Create mysql tables:

> mysql < init.mysql

and add some translations:

> mysql < translationdata.mysql




4) Edit permissions for include/config.php and translations/:

Find which group your webserver is using (e.g. www-data).
> su -c 'chgrp www-data include/config.php translations'
> chmod 640 include/config.php
> chmod 664 translations/


Adjust include/config.php to your environment.


By now, Dragon works with these PHP directives:
 allow_call_time_pass_reference = Off ;Unused
 allow_url_fopen = Off ;Unused
 always_populate_raw_post_data = Off ;Unused
 arg_separator.input = &
 arg_separator.output = "&amp;" ;or = "&"
 asp_tags = Off ;Unused
 default_charset = ;set to empty or commented
 default_mimetype = "text/html"
 error_reporting = E_ALL
 file_uploads = On ;else the pattern upload will be disabled
 gpc_order = GPC
 implicit_flush = Off ;Unused
 magic_quotes_gpc = Off ;Don't care
 magic_quotes_runtime = Off
 magic_quotes_sybase = Off
 max_execution_time = 30 ;except for some rebuilding scripts with large databases
 memory_limit = 8M
 output_buffering = Off
 post_max_size = 8M ;greater than upload_max_filesize if used
 precision = 14
 register_argc_argv = Off ;Unused
 register_globals = Off ;Don't care 
 safe_mode = Off ;else safe_mode_allowed_env_vars= must allow putenv() to modify 'TZ'
;set sendmail_* options to your needs
 short_open_tag = Off ;Unused
 track_vars = On ;always enabled as of PHP 4.0.3
 upload_max_filesize = 2M ;if used
 variables_order = EGPCS ;or empty
[MySQL]
 mysql.allow_persistent = Off ;Unused
 mysql.default_host = ;Unused
 mysql.default_user = ;Unused
 mysql.default_password = ;Unused
 mysql.max_links = -1 ;Unused




5) Add some cron jobs. These should preferrably be run on a remote machine, so that the
   clock is not running when the network is down.

> crontab -e

# m  h dom mon dow command
*/5  *  *   *   *   wget -q -O - http://your.url/clock_tick.php
0,30 *  *   *   *   wget -q -O - http://your.url/halfhourly_cron.php
25   5  *   *   *   wget -q -O - http://your.url/daily_cron.php


(( Windows NT/200x/XP - some freeware clones of cron may be found on the web ))




6) Complain in the support forum at dragon <http://www.dragongoserver.net> if it doesn't
   work.
