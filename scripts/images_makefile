#!/usr/bin/make -f

# Use 'make -f images_makefile' to generate the images

# Needed software: (later versions might work too)
# povray 3.5
# gimp 1.2
# gimp-perl 1.2

SIZES = 5 7 9 11 13 17 21 25 29 35 42 50

BOARD_SIZES = 5/board 7/board 9/board 11/board 13/board 17/board 21/board 25/board 29/board 35/board 42/board 50/board

STONES_SIZES = 5/stones 7/stones 9/stones 11/stones 13/stones 17/stones 21/stones 25/stones 29/stones 35/stones 42/stones 50/stones

BIGSTONES = BigWhite.png BigBlack.png BigBlackMark.png BigWhiteMark.png YinYang.png BigPlayBlack.png BigPlayWhite.png
BIGSTONES_POV = BigBlack_pov.png BigWhite_pov.png YinYang_pov.png BigPlayBlack_pov.png BigPlayWhite_pov.png

POVFILES = stone.inc stone.pov

POVRAY = povray
POVRAY_ARGS = +D +sp16 +ep4 -P -V +UA +A +J +W1024 +H768 +FN
#POVRAY_ARGS = +D +sp16 +ep4 -P -V +UA +J +W512 +H384 +FN

target: $(BIGSTONES) board stones

BigPlayBlack_pov.png: $(POVFILES)
	$(POVRAY) $(POVRAY_ARGS) Declare=PLAY_B=1 +O$@ stone.pov

BigPlayWhite_pov.png: $(POVFILES)
	$(POVRAY) $(POVRAY_ARGS) Declare=PLAY_W=1 +O$@ stone.pov

BigBlack_pov.png: $(POVFILES)
	$(POVRAY) $(POVRAY_ARGS) Declare=BLACK=1 +O$@ stone.pov

BigWhite_pov.png: $(POVFILES)
	$(POVRAY) $(POVRAY_ARGS) Declare=WHITE=1 +O$@ stone.pov

YinYang_pov.png: $(POVFILES)
	$(POVRAY) $(POVRAY_ARGS) Declare=YINYANG=1 +O$@ stone.pov

%.png: %_pov.png generate_big_images.pl
	./generate_big_images.pl $@ $<

%Mark.png: %_pov.png %.png generate_big_images.pl
	./generate_big_images.pl $@ $<

%/board: generate_board_images.pl
	./generate_board_images.pl board $*
	touch $@

%/stones: $(BIGSTONES) generate_board_images.pl
	./generate_board_images.pl stones $*
	touch $@

board: $(BOARD_SIZES)

stones: $(STONES_SIZES)

clean:
	 rm -rf $(SIZES)