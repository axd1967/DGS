------------------------------------------------------------------
General infos
------------------------------------------------------------------
changelog reference at:
http://www.gnu.org/prep/standards/html_node/Change-Logs.html

previous server upgrade:
Release [2016-08-20] - DGS 1.19.12 - tag [release-1_19_12-20160920] on branch [DGS-stable-20160820]

------------------------------------------------------------------
ChangeLog
------------------------------------------------------------------

2016-11-03 jug

   * scripts/updates/1.20/database_changes.mysql,
     specs/db/dragon-ddl.sql, specs/db/table-Tournaments.txt:
   - optimize handling of tournament-pool-rank by combining index of TournamentPool.Rank with tid
-----------
-- index-optimization on handling tournament-pool-rank
ALTER TABLE TournamentPool
   DROP KEY Rank ;
ALTER TABLE TournamentPool
   ADD KEY tidRank (tid,Rank) ;
-----------

   * tournaments/roundrobin/create_pools.php, tournaments/roundrobin/define_pools.php,
     tournaments/roundrobin/edit_pairing.php, tournaments/roundrobin/edit_pools.php,
     tournaments/roundrobin/edit_round_props.php:
   - hide const tournament-round in top info-section & pool-winner-ranks for league-tournaments

2016-11-02 jug

   * tournaments/include/tournament_pool.php (TournamentPool.check_pools):
   - fix bug with pool-checking on round-status-change:
     show error if invalid tier/pool found for league-tournament

   * tournaments/include/tournament_pool_classes.php (class TierSlicer, ~.init, ~.next_tier_pool),
     scripts/tests/TierSlicerTest.php:
   - fix TierSlicer for seeding tiered pools of league-tournament with TierFactor > 2
     - next tier has only twice as much pools as previous tier, not by factor TierFactor times

   * tournaments/include/tournament_pool_classes.php (class PoolTables, ~.__construct,
         ~.get_tier_pool_keys, ~.get_pools, ~.get_pool_users, ~.count_unassigned_pool_users,
         ~.get_user_col_map, ~.fill_pools, ~.reorder_pool_users_by_tp_id, ~.fill_games,
         ~.count_pools_max_user, ~.calc_pool_summary, ~.calc_pool_games_count;
       class PoolSummary, ~.__construct, ~.make_table_pool_summary, ~.get_counts;
       class PoolSummaryEntry, ~.__construct;
       class PoolViewer.__construct, ~.make_pool_table, ~.make_single_pool_table,
         ~.format_pool_label, ~.format_tier_pool;
       class PoolNameFormatter, ~.format, ~.format_with_default;
       class PoolParser, ~.__construct, ~.build_valid_tier_pools, ~.get_valid_tier_pools,
         ~.parse_tier_pool, ~.is_valid_tier_pool, ~.add_error),
     tournaments/include/tournament_pool.php (TournamentPool.build_result_info, ~.build_query_sql,
       ~.count_tournament_tiered_pools, ~.count_tournament_tiered_pool_users, ~.load_tournament_pool_user,
       ~.load_tournament_pools, ~.assign_pool, ~.check_pools, ~.check_pools_game_integrity),
     tournaments/include/tournament_round_helper.php (TournamentRoundHelper.start_tournament_round_games,
       ~.start_games_for_specific_pools, ~.create_pairing_games, ~.fill_ranks_tournament_pool,
       ~.fill_pool_winners_tournament_pool),
     tournaments/include/tournament_games.php (class TournamentGames, ~.__construct, ~.fillEntityData,
       ~.new_from_row, ~.load_tournament_games, ~.count_tournament_games),
     tournaments/include/tournament_utils.php (TournamentUtils.encode_tier_pool_key,
       ~.decode_tier_pool_key, ~.add_qpart_with_tier_pools),
     tournaments/include/tournament_template_round_robin.php (TournamentTemplateRoundRobin.checkPooling,
       ~.checkClosingTournament),
     tournaments/include/tournament_result_control.php (TournamentResultControl.create_tournament_result_pool_winners),
     tournaments/include/tournament_cache.php (TournamentCache.load_cache_tournament_games),
     tournaments/include/tournament_globals.php (TROUND_MAX_TIERCOUNT),
     scripts/tests/AllTests.php, scripts/tests/TierSlicerTest.php,
     scripts/tests/PoolNameFormatterTest.php, scripts/tests/PoolParserTest.php,
     scripts/updates/1.20/database_changes.mysql,
     specs/db/dragon-ddl.sql, specs/db/table-Tournaments.txt,
     tournaments/ladder/view.php,
     tournaments/roundrobin/edit_pools.php (main; get_assigned_user_pools, load_and_fill_pool_unassigned,
       pools_edit_col_actions, pools_unassigned_extend_table_form, echo_pool_summary),
     tournaments/roundrobin/create_pools.php, tournaments/roundrobin/edit_pairing.php,
     tournaments/roundrobin/edit_ranks.php, tournaments/roundrobin/edit_round_props.php,
     tournaments/roundrobin/view_pools.php, tournaments/edit_results.php (load_tournament_info),
     tournaments/game_admin.php, tournaments/view_tournament.php, gameinfo.php:
   - add handling of tiered pools for league-tournament
     - adjust view-pools- & edit-pools-page for league-tournament with tiered pools
     - adjust checking pools & seeding pools & starting tournament-games & filling ranks for tiered pools
     - assign too-few players for bottom-tier into unassigned-pool for manual resolution by T-director
     - add db-field TournamentGames.Tier
     - replace simple round-robin pool handling with tier-pool-key handling to support
       round-robin & league-tournaments
     - add PoolParser to parse & validate various pool-formats
     - adjust pool-label to support tiered pools
     - add special handling for pool-name formatting & parsing for pool0 with unassigned pool-users
     - add pool-count in pool-summary-table on edit-pools-page
     - cleanup / minor changes (rename vars):
       - change tier/pool-argument order of PoolNameFormatter->format()
       - refactor pool-summary sub-array-items into PoolSummaryEntry-class
       - refactor fill_pools()-method into PoolTables-constructor
-----------
-- add tier for league-tournament games
ALTER TABLE TournamentGames
   ADD Tier tinyint unsigned NOT NULL default '1' AFTER Round_ID ;
-----------

   * tournaments/include/tournament_pool_classes.php (PoolTables.init_pool_table),
     include/globals.php (CSS_VERSION),
     skins/dragon/screen.css:
   - align cell-width on view-pools-page for round-robin-tournament for pool-matrix
     with more than 9 players

2016-10-29 jug

   * tournaments/include/tournament_pool_classes.php (class TierSlicer, ~.__construct, ~.init,
         ~.reset_pool_slicer, ~.next_tier_pool, ~.visit_tier_pool, ~.get_slicer_counts;
       PoolSlicer.__construct, ~.init, ~.next_pool),
     tournaments/include/tournament_round.php (class TournamentRound, ~.build_notes_props),
     tournaments/include/tournament_log_helper.php (TournamentLogHelper.log_seed_pools),
     tournaments/include/tournament_pool.php (TournamentPool.seed_pools),
     scripts/tests/AllTests.php, scripts/tests/PoolSlicerTest.php, scripts/tests/TierSlicerTest.php,
     tournaments/roundrobin/create_pools.php:
   - add seeding-pools for league-tournament with handling of tiers
     - add TierSlicer on top of PoolSlicer to handle round-robin & league tournaments alike
     - add constant league-specific fields in TournamentRound-class: TierFactor
     - assign too-few remaining players in bottom-tier into unassigned-pool

2016-10-28 jug

   * tournaments/include/tournament_pool.php (class TournamentPool, ~.__construct, ~.build_result_info,
       ~.fillEntityData, ~.build_query_sql, ~.new_from_row, ~.exists_tournament_tier_pool,
       ~.count_tournament_tiered_pool, ~.count_tournament_tiered_pool_users,
       ~.count_tournament_tiered_pool_games, ~.load_tournament_pool_user, ~.load_tournament_pools,
       ~.load_tournament_participants_with_pools, ~.seed_pools, ~.add_missing_registered_users,
       ~.assign_pool, ~.check_pools, ~.check_pools_game_integrity, ~.execute_rank_action),
     tournaments/include/tournament_round_helper.php (TournamentRoundHelper.start_tournament_round_games,
       ~.remove_tournament_round, ~.fill_ranks_tournament_pool),
     tournaments/include/tournament_log_helper.php (TournamentLogHelper.log_assign_tournament_pool,
       ~.log_execute_tournament_pool_rank_action),
     tournaments/include/tournament_template_round_robin.php (TournamentTemplateRoundRobin.checkGamesStarted,
       ~.checkClosingTournament),
     tournaments/include/tournament_result_control.php (TournamentResultControl.create_tournament_result_pool_winners),
     tournaments/include/tournament_cache.php (TournamentCache.load_cache_tournament_pools),
     specs/db/dragon-ddl.sql, specs/db/table-Tournaments.txt,
     scripts/updates/1.20/database_changes.mysql,
     tournaments/roundrobin/create_pools.php, tournaments/roundrobin/define_pools.php,
     tournaments/roundrobin/edit_pools.php, tournaments/roundrobin/edit_ranks.php:
   - add db-field TournamentPool.Tier to support league-tournament
-----------
-- add tier for league-tournament
ALTER TABLE TournamentPool
   ADD Tier tinyint unsigned NOT NULL default '1' AFTER Round ;
-----------

2016-10-09 jug

   * tournaments/roundrobin/define_pools.php (parse_edit_form),
     tournaments/manage_tournament.php (make_links_ttype_specific):
   - adjust round-robin define-pools-page for league-tournament
     - allow no pool-winner-ranks
     - disabled input & changes of league-tournament-defaults for round-properties
     - disabled pool-suggestions

   * tournaments/include/tournament_round.php (TournamentRound.build_notes_props),
     tournaments/roundrobin/edit_round_props.php:
   - add reduced tournament-round-info on edit-round-props-page for league-tournaments

   * tournaments/include/tournament_template_round_robin.php (TournamentTemplateRoundRobin.checkProperties),
     tournaments/include/tournament_round.php (TournamentRound.check_round_properties),
     tournaments/roundrobin/edit_round_props.php (parse_edit_form),
     tournaments/roundrobin/define_pools.php,
     tournaments/manage_tournament.php (make_links_ttype_specific):
   - adjust round-robin edit-rounds-props-page for league-tournament
     - allow no pool-winner-ranks for league-tournament
     - extend pool-name-format for league-formats
     - use fix rounds for league-tournament to represent one cycle
     - disabled input & changes of league-tournament-defaults for round-properties
     - removed link to edit-rounds for league-tournament

   * tournaments/include/tournament_globals.php (TOURNEY_TYPE_LEAGUE, CHECK_TOURNEY_TYPE,
       TOURNEY_WIZTYPE_DGS_LEAGUE, MAX_TOURNEY_WIZARD_TYPE, TWIZT_LEAGUE),
     tournaments/include/tournament_rules.php (TournamentRules.convertEditForm_to_TournamentRules,
       ~.prepare_create_game_row, ~.getHandicaptypeText),
     tournaments/include/tournament_pool_classes.php (PoolNameFormatter.__construct, ~.format,
       ~.is_valid_format, ~.format_with_default),
     tournaments/include/tournament_template_league.php (class TournamentTemplateLeague,
       ~.__construct, ~.getDefaultPoolNamesFormat),
     tournaments/include/tournament_helper.php (TournamentHelper.process_tournament_game_end,
       ~.check_tournament_result),
     tournaments/include/tournament.php (Tournament.formatRound, ~.build_data_link, ~.getTypeText,
       ~.getWizardTypeText),
     tournaments/include/tournament_factory.php (TournamentFactory.getTournament, ~.getTournamentTypes),
     tournaments/include/tournament_pool.php (TournamentPool.update_tournament_pool_set_pool_winners),
     tournaments/include/tournament_utils.php (TournamentUtils.getWizardTournamentType),
     tournaments/include/tournament_round.php (TournamentRound.build_notes_props),
     tournaments/include/types/dgs_league.php (class DgsLeagueTournament, ~.__construct,
       ~.createTournament),
     include/config.php (ALLOW_TOURNAMENTS),
     scripts/updates/1.20/database_changes.mysql, scripts/updates/1.20/other_changes.txt,
     scripts/tests/PoolNameFormatterTest.php, scripts/tests/AllTests.php,
     specs/db/table-Tournaments.txt, specs/db/dragon-ddl.sql,
     tournaments/roundrobin/view_pools.php,
     tournaments/manage_tournament.php (make_links_ttype_specific),
     tournaments/cron_tournaments.php, tournaments/edit_properties.php,
     tournaments/edit_results.php, tournaments/view_tournament.php:
   - start new league-tournament-type
     - add dragon-scope league-tournament
     - adjust links on tournament-manager-page to some new league-specific pages
     - restrict tournament-properties to match one cycle = one round
     - extend & re-use basic features from round-robin-tournaments
     - disable pool-winners for league-tournaments for now
     - edit-properties: forbid editing of custom-round for admins
     - extended default pool-names-format to include tier/league with %L, %t(num), %t(uc)
-----------
-- add League-tournament
ALTER TABLE Tournament
   MODIFY Type enum('LADDER','ROUNDROBIN','LEAGUE') NOT NULL ;
-----------

2016-10-08 jug

   * gameinfo.php:
   - added link for round-robin-tournaments on game-info-page in tournament-info-section
     to round & pool of tournament-game

   * tournaments/roundrobin/edit_pools.php:
   - show default pool-names-format on edit-pools-page to assist tournament-director
     in selecting correct pool

   * tournaments/include/tournament_round.php (TournamentRound.build_notes_props),
     include/gui_functions.php (echo_notes),
     tournaments/roundrobin/view_pools.php:
   - show pool-winner-ranks & max. simul-games per user on view-pools-page too

   * tournaments/include/tournament_pool_classes.php (class PoolSlicer, ~.__construct, ~.init,
       ~.next_pool, ~.visit_pool, ~.count_visited_pools),
     tournaments/include/tournament_pool.php (TournamentPool.seed_pools, ~.get_slice_modes),
     tournaments/include/tournament_globals.php  (TROUND_SLICE_SNAKE),
     scripts/tests/PoolSlicerTest.php, scripts/tests/AllTests.php:
   - added snake-seeding slice-mode for seeding pools of round-robin-tournaments
     - refactored slicing-modes into PoolSlicer-class

2016-10-06 jug

   * tournaments/include/tournament_pool_classes.php (class PoolViewer, ~.__construct, ~.make_single_pool_table;
       class PoolNameFormatter, ~.__construct, ~.format, ~.is_valid_format, ~.format_with_default),
     tournaments/include/tournament_template_round_robin.php (TournamentTemplateRoundRobin._createTournament,
       ~.getDefaultPoolNamesFormat),
     tournaments/include/tournament_round_helper.php (TournamentRoundHelper.add_new_tournament_round,
       ~.start_next_tournament_round),
     tournaments/include/tournament_round.php (class TournamentRound, ~.__construct, ~.fillEntityData,
       ~.new_from_row),
     tournaments/include/tournament_template_ladder.php (TournamentTemplateLadder.getDefaultPoolNamesFormat),
     tournaments/include/tournament_template.php (TournamentTemplate.getDefaultPoolNamesFormat),
     tournaments/roundrobin/edit_round_props.php (parse_edit_form),
     scripts/updates/1.20/database_changes.mysql,
     specs/db/table-Tournaments.txt, specs/db/dragon-ddl.sql,
     tournaments/game_admin.php, tournaments/roundrobin/edit_pools.php,
     tournaments/roundrobin/edit_rounds.php, tournaments/roundrobin/view_pools.php,
     tournaments/view_tournament.php:
   - add formatting for pool-names of round-robin-tournaments
-----------
-- add formatting for round-robin pool-names
ALTER TABLE TournamentRound
   ADD PoolNamesFormat varchar(64) NOT NULL default '' AFTER PoolSize ;
-----------

2016-09-10 jug

   * ratinggraph.php, ratingpng.php:
   - removed LSQ regression-line from rating-graph

   * include/message_functions.php (message_info_table; MessageListBuilder.message_list_body),
     message_thread.php:
   - jumping to "current" message on opening message-thread-view
     - expand all messages on message-thread-view

2016-09-06 jug

   * tournaments/include/types/private_round_robin.php (class PrivateRoundRobinTournament._construct),
     tournaments/include/types/public_round_robin.php (PublicRoundRobinTournament.__construct):
   - sync changes & fix from stable-branch DGS-stable-20141029:
     - bugfix: restricting max-rounds for private & public round-robin-tournaments was missing min-value
     - increased max-rounds for private & public round-robin-tournaments from 3 to 16

2016-08-23 jug

   * include/config.php (FORUM_POST_FORBIDDEN_TERMS),
     forum/post.php (post_message, check_forum_post_violations),
     forum/read.php:
   - added server-configuration to prevent forum-post with offensive terms
     - added global config 'FORUM_POST_FORBIDDEN_TERMS' with regex preventing forum-post
       with offensive terms
     - check for offensive terms on forum-post & preview of it

2016-08-21 jug

   * specs/FAQ-jug:
   - copied over release-info from local TODO for release & sub-releases of 1.0.16, 1.0.17, 1.0.18, 1.19.x
     - needs cleanup for FAQ-processing

2016-08-20 jug

   * snapshot.php:
   - on snapshot-page updated links, added link to clone latest stable version, sorted archive-files

