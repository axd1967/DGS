------------------------------------------------------------------
General infos
------------------------------------------------------------------
changelog reference at:
http://www.gnu.org/prep/standards/html_node/Change-Logs.html

previous server update:
Release [2012-06-08] - DGS 1.0.15 - tag [release-1_0_15-20120608] on branch [DGS-stable-20120610]

Developers INFO:

2012-12-06 juga
   Tournaments

------------------------------------------------------------------
ChangeLog
------------------------------------------------------------------

2013-06-16 juga

   * include/std_functions.php (echo_dragon_top_bar, end_page),
     skins/dragon/screen.css:
   - replace tooltip with DGS-version in top-bar with version-text in bottom-bar

   * tournaments/include/tournament_globals.php (TRESULTTYPE_RR_WINNERS),
     specs/db/table-Tournaments.txt:
   - added tournament-result-type for round-robin in preparation to fill tournament-winners

   * tournaments/include/tournament_helper.php,
     tournaments/roundrobin/edit_ranks.php,
     tournaments/roundrobin/edit_rounds.php,
     tournaments/manage_tournament.php (make_links_ttype_specific),
     skins/dragon/screen.css:
   - started to finalizing tournament-round to prepare for next round or setting tournament winners
   - formatting form on tournament-edit-round-page

   * tournaments/view_tournament.php:
   - moved refresh-link to page-bottom
   - copied registration-link to top important links as convenience

   * show_games.php:
   - don't restrict games-list with default last-moved-date for tournament-games-list

2013-06-13 juga

   * tournaments/include/tournament_template_round_robin.php (TournamentTemplateRoundRobin.checkPoolWinners,
       ~.check_unset_pool_ranks, ~.check_auto_poolwinners, ~.check_minimum_poolwinners),
     tournaments/include/tournament_round_status.php (class TournamentRoundStatus; ~.has_warning,
       ~.get_warnings, ~.check_conditions_round_status_DONE),
     tournaments/include/tournament_template_ladder.php (TournamentTemplateLadder.checkPoolWinners),
     tournaments/include/tournament_template.php (TournamentTemplateRoundRobin.checkPoolWinners),
     include/std_functions.php (buildErrorListString, buildWarnListString),
     tournaments/roundrobin/edit_round_status.php:
   - added error-checks and additional warning-check for tournament-round status-change PLAY->DONE
     - check that all games are processed
     - check that there's no unset pool rank
     - check that all automatic pool-winner-ranks are set
     - warn if there are pool-winners above the automatic pool-winner-ranks
     - check that there's at least one pool-winner for each pool

2013-06-05 juga

   * include/quick/quick_bulletin.php (class QuickHandlerBulletin, ~.parseURL, ~.prepare,
       ~.process, ~.process_cmd_list, ~.fill_bulletin_info),
     include/db/bulletin.php (Bulletin.load_bulletin),
     specs/quick_suite.txt:
   - implemented quick-do-handler info-command for bulletin-object.

2013-06-01 juga

   * scripts/README.developers, specs/tournaments.txt, skins/dragon/screen.css,
     docs.php, index.php, snapshot.php, INSTALL, .gitignore:
   - adjustments to reflect changes caused by CVS-to-GIT migration
      - adjusted comments on snapshot-page to export Dragon-snapshots from GIT
      - added code-browsing link for GIT, adjusted text for old CVS code-browsing
      - replaced texts about CVS with the more general term of SCM (source control management)
      - replaced CVS-HEAD with (GIT-)master terminology

   * images/, images/flags/, 5/, 7/, 9/, 11/, 13/, 17/, 21/, 25/, 29/, 35/, 42/, 50/:
   - put all images under version-control

   * all files:
   - migrated CVS-repository to GIT-repository:
     - see http://sourceforge.net/p/dragongoserver/dgs-main
     - git clone ssh://USERNAME@git.code.sf.net/p/dragongoserver/dgs-main LOCAL-DIR
     - replaced .cvsignore files with single .gitignore file

2013-05-26 juga

   * all files,
     scripts/README.developers:
   - adjusted code-style:
     - for 'require/require_once/include/include_once': use without braces and '..' if const-string
     - for 'return/if/elseif/for/foreach/while/do/switch': with space after keyword

   * game_comments.php:
   - bugfix: show hidden game-comments in multi-player-games only for comment-author

2013-05-21 juga

   * tournaments/include/tournament_round_status.php (TournamentRoundStatus.check_round_status_change,
       ~.check_conditions_round_status_POOL, ~.check_conditions_round_status_PAIR,
       ~.check_conditions_round_status_PLAY, ~.check_conditions_round_status_DONE,
       ~.check_expected_round_round_status, ~.check_action_round_status, ~.check_edit_round_status),
     tournaments/include/tournament_status.php (TournamentStatus.check_status_change,
       ~.check_conditions_status_REG, ~.check_conditions_status_PAIR, ~.check_conditions_status_PLAY,
       ~.check_conditions_status_CLOSED, ~.check_expected_status, ~.check_action_status),
     tournaments/include/tournament_participant.php (TournamentParticipant.count_TPs, ~.count_all_TPs,
       ~.load_tournament_participants_registered, ~.load_registered_users_in_seedorder),
     tournaments/include/tournament_pool.php (TournamentPool.load_tournament_participants_with_pools,
       ~.seed_pools, ~.add_missing_registered_users),
     tournaments/include/tournament_helper.php (TournamentHelper.start_tournament_round_games,
       ~.remove_tournament_round, ~.set_tournament_round),
     tournaments/include/tournament_template_round_robin.php (TournamentTemplateRoundRobin.checkProperties,
       ~.calcTournamentMinParticipants),
     tournaments/include/tournament_properties.php (TournamentProperties.getMaxParticipants,
       ~.checkUserRegistration),
     tournaments/include/tournament_round.php (class TournamentRound, ~.check_properties,
       ~.authorise_set_tround),
     tournaments/include/tournament_ladder.php (TournamentLadder.seed_ladder),
     tournaments/include/tournament.php (class Tournament, ~.formatRound),
     tournaments/include/tournament_template_ladder.php, tournaments/include/tournament_template.php,
     tournaments/include/tournament_globals.php, tournaments/include/tournament_cache.php,
     include/gui_functions.php (echo_image_tourney_pool_winner),
     include/utilities.php (build_text_list),
     scripts/updates/database_changes_1_0_15_to_1_0_16.mysql,
     specs/db/table-Tournaments.txt, specs/db/dragon-ddl.sql,
     specs/tournaments.txt, skins/dragon/screen.css,
     tournaments/roundrobin/create_pools.php, tournaments/roundrobin/define_pools.php,
     tournaments/roundrobin/edit_pairing.php, tournaments/roundrobin/edit_pools.php,
     tournaments/roundrobin/edit_ranks.php, tournaments/roundrobin/edit_round_props.php,
     tournaments/roundrobin/edit_round_status.php, tournaments/roundrobin/edit_rounds.php,
     tournaments/view_tournament.php (make_table_tournament_participant_counts),
     tournaments/edit_participant.php, tournaments/register.php,
     tournaments/ladder/admin.php:
   - round-robin-tournament:
     - added handling of tournament-participants start-round,
       differ between handling of StartRound from registration and NextRound from pool-win
     - check on change of tournament-status:
       generalized check for all tournament-types done in TournamentStatus-class,
       specialized check for done in specific tournament-type TournamentTemplate-implementation
     - added checks on max-participants for higher start-rounds
     - added checks to allow change of current tournament-round
     - allow editing of round-stuff only for specific tournament-status
     - started handling of pool-winners to advance to next round or mark for final result
     - added consistency-checks and fixed displaying-bug on pairing to start tournament-games
     - added checks of current tournament-status on changes of tournament-round-status
     - view-tournament-page: show count of tournament-participant for all rounds and all TP-stati
   - various bug-fixes & code cleanup:
     - refactored building of text-list calling function on list-items
     - renamed some function into more meaningful names
     - removed unused code, refactored redundant code
     - added comments
-----------
-- added index for checking tournament-participant-registrations
ALTER TABLE TournamentParticipant
   ADD INDEX tidStartRound (tid,StartRound) ;
-----------

   * INSTALL:
   - clarified how to get help and how to create admin-user

2013-05-09 juga

   * include/game_actions.php (GameActionHelper.prepare_game_action_score):
   - bugfix for quick-game-handler: added check for agree=1 on 1st players scoring

2013-05-04 juga

   * tournaments/include/tournament_round.php (class TournamentRound, ~.fillEntityData,
       ~.check_properties, ~.build_notes_props, ~.new_from_row),
     tournaments/include/tournament_pool.php (TournamentPool.update_tournament_pool_set_pool_winners),
     tournaments/include/tournament_helper.php (TournamentHelper.fill_pool_winners_tournament_pool),
     tournaments/include/types/dgs_round_robin.php (DgsRoundRobinTournament.createTournament),
     tournaments/include/tournament_globals.php (RKACT_SET_POOL_WIN, RKACT_CLEAR_POOL_WIN),
     tournaments/include/tournament_pool_classes.php (RankSummary.build_notes),
     include/gui_functions.php (echo_image_tourney_pool_winner),
     scripts/updates/database_changes_1_0_15_to_1_0_16.mysql,
     specs/db/dragon-ddl.sql, specs/db/table-Tournaments.txt,
     tournaments/manage_tournament.php (make_links_ttype_specific),
     tournaments/roundrobin/edit_ranks.php (parse_edit_form),
     tournaments/roundrobin/edit_round_props.php (parse_edit_form),
     tournaments/roundrobin/edit_rounds.php, tournaments/roundrobin/view_pools.php:
   - added tournament-round-property PoolWinnerRanks to configure number of top ranks
     making pool-winners to either advance to next round or win the tournament
     - added action in edit-ranks-page to set-pool-winners for finished pools
     - clarified "next-round" term replacing it with "pool-winner",
       which can mean advancing to next-round as well as marking for final result
-----------
-- added number of top ranks for pool winners
ALTER TABLE TournamentRound
   ADD PoolWinnerRanks tinyint unsigned NOT NULL DEFAULT '0' AFTER MaxPoolCount ;
-----------

2013-04-29 juga

   * include/page_functions.php (PAGEFLAG_IMPLICIT_FLUSH, PAGEFLAG_NO_BUFFERING;
       class HTMLPage; class Page),
     tournaments/include/tournament_helper.php (TournamentHelper.start_tournament_round_games),
     include/error_functions.php (DgsErrors.dump_exit),
     include/std_functions.php (start_html, end_html),
     scripts/experiments/flush_test.php, scripts/experiments/activity_players.php,
     scripts/updates/fix_default_max_handi-1_0_16.php,
     scripts/updates/fix_game_comments-1_0_15.php,
     scripts/updates/fix_message_thread-1_0_15.php,
     scripts/updates/fix_new_game_expert_view-1_0_16.php,
     scripts/check_players_email.php, scripts/fix_game_snapshot.php,
     scripts/fix_games_timeleft.php, scripts/player_consistency.php,
     tournaments/roundrobin/edit_pairing.php,
     goodies/index.php, docs.php, faq.php, index.php, introduction.php, news.php,
     policy.php, rank_converter.php:
   - fix flushing of output using implicit-flush without output-buffering

2013-04-28 juga

   * tournaments/include/tournament_factory.php (TournamentFactory.getTournamentTypes),
     include/config.php (ALLOW_TOURNAMENTS):
   - changed server-config ALLOW_TOURNAMENTS from boolean to regex listing allowed tournament-types

   * tournaments/view_tournament.php:
   - bugfix: don't show user-result-state for user in unassigned-pool

   * tournaments/include/tournament_pool.php (TournamentPool.formatRank):
   - bugfix: allow to show other value for empty pool-rank

   * tournaments/include/tournament_template.php (class TournamentTemplate,
       ~.build_tournament_template_title),
     tournaments/include/tournament_template_round_robin.php (class TournamentTemplateRoundRobin),
     tournaments/include/tournament_template_ladder.php (class TournamentTemplateLadder),
     tournaments/include/types/dgs_round_robin.php (class DgsRoundRobinTournament),
     tournaments/include/types/private_ladder.php (class PrivateLadderTournament),
     tournaments/include/types/public_ladder.php (class PublicLadderTournament),
     tournaments/include/types/dgs_ladder.php (class DgsLadderTournament):
   - cleanup: refactored building of template-title into base-class
   - reduced max ladder-challenges/defenses from 10 -> 8 for private/public ladders

   * scripts/tournament_consistency.php (tid_clause, fix_tournament_RegisteredTP):
   - overworked and extended consistency-checks
   - allow to check specific or all tournaments
   - added checks for TournamentParticipant.Finished/Won/Lost
   - added checks for TournamentLadder.ChallengesIn/Out for ladder-tourneys

2013-04-26 juga

   * scripts/player_consistency.php (echo_query, explain_query, cnt_diff),
     scripts/updates/other_changes_1_0_15_to_1_0_16.txt:
   - added consistency-checks/fixes on Players-table for multi-player-games

2013-04-23 juga

   * include/game_actions.php (class GameActionHelper),
     game.php:
   - bugfix for previous refactoring: missed $score_mode argument on calculating game-score

2013-04-22 juga

   * include/game_actions.php (class GameActionHelper, ~.init_query, ~.set_game_move_message,
       ~.prepare_game_action_set_handicap, ~.prepare_game_action_do_move,
       ~.prepare_game_action_pass, ~.prepare_game_action_resign, ~.prepare_game_action_score,
       ~.prepare_game_action_generic, ~.update_game):
   - cleanup: refactored using UpdateQuery-class for building SQL-updates/inserts

2013-04-19 juga

   * include/game_actions.php (class GameActionHelper, ~.set_game_action, ~.load_game,
       ~.init_globals, ~.load_game_board, ~.init_query, ~.increase_moves, ~.get_moves,
       ~.calculate_game_score),
     include/quick/quick_game.php (class QuickHandlerGame, ~.prepare, ~.process_cmd_play),
     confirm.php, game.php, quick_play.php:
   - cleanup: refactored redundant code from confirm-page/quick_play-page/quick-do-game-handler
     - step #7: refactored handling for loading-game, loading-board, setting to-move/next-to-move,
       handling GameFlags
     - step #8: removed globals in functions replacing by access to class-attributes/funcs
     - step #9: refactored handling of score-calculation for game-page
   - bugfix for quick-game-handler: corrected to_move on resign-if-not-your-turn,
     it was possible to win by own resignation

2013-04-18 juga

   * include/game_actions.php (class GameActionHelper, ~.set_game_finished, ~.init_query,
       ~.init_mp_query, ~.set_game_move_message),
     include/quick/quick_game.php (QuickHandlerGame.process_cmd_play),
     confirm.php, quick_play.php:
   - cleanup: refactored redundant code from confirm-page/quick_play-page/quick-do-game-handler
     - step #6: refactored handling for MPG, time, message, game-finish, score

2013-04-17 juga

   * include/game_actions.php (class GameActionHelper, ~.init_query,
       ~.prepare_game_action_set_handicap, ~.prepare_game_action_do_move,
       ~.prepare_game_action_pass, ~.prepare_game_action_resign,
       ~.prepare_game_action_generic, ~.prepare_game_action_score, ~.update_game)
     include/quick/quick_game.php (QuickHandlerGame.prepare, ~.process_cmd_play,
       ~.convert_game_cmd_to_action),
     include/board.php (Board.draw_board),
     include/globals.php (GAMEACT_...),
     confirm.php, game.php, quick_play.php:
   - cleanup: refactored redundant code from game-page/confirm-page/quick_play-page/quick-do-game-handler
     for moving and other game-actions into new class GameActionHelper
     - step #1: refactored update-game query-code
     - step #2: refactored "pass"-move-code + generically handled MPG/time/message-query-part
     - step #3: refactored "set_handicap"-move-code
     - step #4: refactored "domove"-move-code
     - step #5: refactored "done"-scoring-code
   - bugfix: check for empty move-id for quick-game-handler

   * include/game_functions.php (class DefaultMaxHandicap, ~.calc_def_max_handicap,
       ~.limit_max_handicap, ~.limit_min_max_with_def_handicap, ~.build_text_handicap_limits;
       adjust_handicap),
     tournaments/include/tournament_rules.php (TournamentRules.convertTournamentRules_to_GameRow,
       ~.convertTournamentRules_to_EditForm, ~.convertEditForm_to_TournamentRules),
     include/message_functions.php (game_settings_form, build_adjust_handicap),
     include/make_game.php (make_invite_game_setup),
     scripts/tests/DefaultMaxHandicapTest.php, scripts/tests/Game_SettingsHelperTest.php,
     scripts/tests/AllTests.php, scripts/updates/fix_default_max_handi-1_0_16.php,
     tournaments/view_tournament.php, new_game.php:
   - cleanup: refactored redundant code to handle default-max-handicap
     into new class DefaultMaxHandicap

2013-04-16 juga

   * ALL php-files,
     include/db/*.php, include/quick/*.php, include/*.php,
     code_examples/*.php, features/*.php, forum/*.php, scripts/*.php,
     tournaments/include/types/*.php, tournaments/include/*.php,
     tournaments/ladder/*.php, tournaments/roundrobin/*.php, tournaments/*.php,
     rss/status.php, wap/status.php, *.php:
   - cleanup:
      - fix wrong PHP-statements
      - replace PHP4-constructors with PHP5-__constructor()-function
      - added public/protected/private + static modifiers for class-functions,
        tried to identify private attributes as such, used public only if attribute is already public
      - replaced class-own-static reference to self::func
      - moved default-value for class-attributes from constructor into attribute-declaration
      - used abstract-modifier for classes and functions instead of throwing error()
      - moved some global vars related to class as static declaration to class or function
      - avoid public class-attributes if used sparsely
      - moved some global funcs into classes
      - adjusted some error-labels
      - removed unused or double code
      - clarified some function/var-names
      - clarified some comments/docs
      - layouting
   - fixed some smaller bugfixes during cleanup (SQL, misspelling, minor bad code-smells)

2013-04-14 juga

   * forum/forum_functions.php, include/classlib_user.php, include/classlib_userconfig.php,
     include/filter.php, include/game_functions.php, include/goban_handler_dgsgame.php,
     include/std_classes.php, include/std_functions.php, include/table_columns.php,
     include/db/bulletin.php, include/db/ratingchangeadmin.php, include/db/ratinglog.php,
     include/db/shape.php, include/db/survey.php, include/db/waitingroom.php,
     scripts/tests/EntityTest.php, tournaments/include/tournament_director.php,
     tournaments/include/tournament_ladder.php, tournaments/include/tournament_news.php,
     tournaments/include/tournament_participant.php, tournaments/include/tournament_pool.php,
     tournaments/include/tournament_properties.php, tournaments/include/tournament_round_status.php,
     tournaments/include/tournament_status.php, tournaments/include/tournament_template_ladder.php,
     tournaments/include/tournament_template_round_robin.php:
   - cleanup: replaced is_a() -> instanceof

2013-04-13 juga

   * include/game_functions.php (GameSetup.set_defaults;
       GameSetupBuilder.build_url_game_basics;
       GameScore.calculate_score;
       getRulesetText, get_default_ruleset),
     tournaments/include/tournament_rules.php (TournamentRules.setRuleset,
       ~.convertEditForm_to_TournamentRules),
     include/make_game.php (make_invite_game_setup, create_game),
     include/message_functions.php (game_settings_form),
     include/config.php (WROOM_MAX_ENTRIES, ALLOWED_RULESETS),
     include/db/waitingroom.php (Waitingroom.setRuleset),
     include/db/games.php (Games.setRuleset),
     game.php, new_game.php:
   - enabled DGS-Chinese ruleset using area-scoring:
     - allow to configure available rulesets in server-config
     - extracting default ruleset from server-config
     - game-page: detailed text about area-scoring on passing
   - moved max. number of waiting-room-entries to server-config-file

   * site_map.php, waiting_room.php:
   - re-added new-game-link in waiting-room

   * tournaments/include/tournament_log_helper.php (TournamentLogHelper.log_create_tournament_director,
       ~.log_tp_registration_by_director, ~.log_tp_registration_by_user, ~.log_delete_tournament_ladder,
       ~.log_seed_tournament_ladder, ~.log_delete_user_from_tournament_ladder,
       ~.log_crown_king_tournament_ladder, ~.log_change_rank_tournament_ladder,
       ~.log_add_user_tournament_ladder),
     tournaments/include/tournament_ladder.php (TournamentLadder.remove_user_from_ladder,
       ~.change_user_rank, ~.add_user_to_ladder, ~._process_game_end, ~.process_user_absence),
     tournaments/include/tournament_helper.php (TournamentHelper.process_tournament_ladder_crown_king),
     tournaments/include/tournament_log.php (TLOG_ACT_ADD, TLOG_ACT_SEED, TLOG_ACT_SET),
     tournaments/ladder/admin.php, tournaments/ladder/retreat.php, tournaments/ladder/view.php,
     tournaments/cron_tournaments.php (run_hourly),
     tournaments/edit_participant.php, tournaments/register.php:
   - added tournament-log for
     - adding existing tournament-participant to ladder on joining or after incomplete removal
     - removing user from ladder by retreat / director-removal / user-absence-handling
     - seeding or deleting ladder on tournament PAIR-status
     - changing ladder user-rank
     - crowning-king for ladder-tournament by director or CRON
   - removed double tournament-log for retreating from ladder, already covered by user-removal

   * tournaments/include/tournament_gui_helper.php (TournamentGuiHelper.build_tournament_ladder_standings):
   - bugfix: check for presence of optional table-column for tournament-rating

2013-04-12 juga

   * tournaments/include/tournament_helper.php (TournamentHelper.process_tournament_ladder_game_end),
     tournaments/include/tournament_log_helper.php (TournamentLogHelper.log_tournament_ladder_game_end),
     tournaments/include/tournament_log.php (class Tournamentlog, ~.new_from_row),
     tournaments/cron_tournaments.php,
     tournaments/show_tournament_log.php:
   - added tournament-log for processing game-end for ladder-tournament
   - added filter on Tournamentlog.Type showing tournament-log

   * tournaments/include/tournament_log_helper.php (TournamentLogHelper.log_change_tournament_ladder_props),
     tournaments/ladder/edit_props.php:
   - added tournament-log for editing tournament-ladder-properties

   * tournaments/include/tournament_log_helper.php (TournamentLogHelper.log_tournament_ladder_challenge_user),
     tournaments/include/tournament_ladder.php (TournamentLadder.build_log_string),
     tournaments/include/tournament_log.php (TLOG_ACT_START),
     tournaments/ladder/challenge.php:
   - added tournament-log for tournament-ladder user-challenge

   * tournaments/include/tournament_log_helper.php (TournamentLogHelper.log_retreat_from_tournament_ladder),
     tournaments/include/tournament_ladder.php (TournamentLadder.build_log_string),
     tournaments/ladder/retreat.php,
     tournaments/show_tournament_log.php:
   - added tournament-log for user retreating from ladder

   * game.php (draw_add_time):
   - show arrow-image on player to move

2013-04-11 juga

   * include/game_functions.php (GameSetupChecker. add_default_values_info, ~.check_time,
       ~.check_adjust_komi):
   - bugfix: check for invalid japanese-byo-yomi extra-periods and canadian-byo-yomi stones
   - bugfix: check adjust-komi value also for invitation

   * include/message_functions.php (interpret_time_limit_forms):
   - bugfix: use defaults for invalid japanese-byo-yomi extra-periods and canadian-byo-yomi stones

   * tournaments/include/tournament_log_helper.php (TournamentLogHelper.log_change_tournament_rules),
     tournaments/edit_rules.php:
   - added tournament-log for changing tournament-rules
   - bugfix: check for invalid japanese-byo-yomi extra-periods and canadian-byo-yomi stones

   * tournaments/include/tournament_rules.php (TournamentRules.convertTournamentRules_to_EditForm,
       ~.convertEditForm_to_TournamentRules):
   - bugfix: always init time-values for all byo-yomi-types to parse all fields
     in parsing-section of 'edit_rules.php'
   - bugfix: remove shape-snapshot if shape-id is 0

2013-04-10 juga

   * tournaments/include/tournament_log_helper.php (TournamentLogHelper.log_change_tournament,
       ~.log_change_tournament_news, ~.log_change_tournament_props),
     tournaments/edit_properties.php:
   - added tournament-log for changing tournament-registration-properties
   - bugfix: for tournament-log check for an unset date

   * tournaments/include/tournament_log_helper.php (TournamentLogHelper.log_change_tournament_news),
     tournaments/edit_news.php:
   - added tournament-log for creating and changing tournament-news

   * tournaments/include/tournament_log_helper.php (class TournamentLogHelper,
       ~.log_change_tournament_director, ~.build_diff_tournament_participant,
       ~.log_change_tournament),
     tournaments/edit_tournament.php:
   - added tournament-log for editing tournament

   * include/table_columns.php (Table.make_sort_images):
   - bugfix: need check for unset arr-element

   * tournaments/include/tournament_ladder.php (TournamentLadder.remove_user_from_ladder):
   - bugfix: missed locking of nested read-access to db-tables TournamentParticipant & Players

   * tournaments/include/tournament_log_helper.php (TournamentLogHelper.build_diff_tournament_participant,
       ~.log_change_tp_registration_by_director, ~.log_tp_registration_by_user,
       ~.log_change_tp_registration_by_user),
     tournaments/edit_participant.php,
     tournaments/register.php:
   - added tournament-registration actions in tournament-log by user to register / apply /
     ack-invite / reject-invite / remove registration
   - changed tournament-log diff-format for change of tournament-participant by director

   * include/quick/quick_game_notes.php (QuickHandlerGameNotes.prepare),
     include/game_functions.php (GameHelper.update_game_notes):
   - bugfix: use default non-hidden for Hidden-state on saving game-notes

2013-04-08 juga

   * tournaments/include/tournament_participant.php (TournamentParticipant.assert_tournament_participant,
       ~.build_log_string, ~.delete_tournament_participant),
     tournaments/include/tournament_log_helper.php (TournamentLogHelper.log_tp_registration_by_director),
     tournaments/edit_participant.php:
   - added tournament-log for actions by T-director to register / invite / edit-registration /
     delete of user
   - bugfix: don't assert user-id on removal of registration of tourney-user

2013-04-05 juga

   * include/quick/quick_message.php (QuickHandlerMessage.process_cmd_info):
   - bugfix for previous refactoring: missed local var that have been refactored away

2013-04-02 juga

   * tournaments/include/tournament_ladder_props.php (class TournamentLadderProps,
       ~.setDetermineChallenger, ~.fillEntityData, ~.build_notes_props, ~.calc_game_end_action,
       ~.new_from_row),
     tournaments/include/tournament_helper.php (TournamentHelper.process_tournament_ladder_game_end),
     tournaments/include/tournament_ladder.php (TournamentLadder.process_game_end),
     tournaments/include/tournament_games.php (TournamentGames.getFlagsText),
     tournaments/include/tournament_globals.php,
     scripts/updates/database_changes_1_0_15_to_1_0_16.mysql,
     specs/db/dragon-ddl.sql, specs/db/table-Tournaments.txt,
     tournaments/ladder/edit_props.php (parse_edit_form):
   - ladder-tournament: added ladder-property to determine challenger-role at game-start or game-end
-----------
-- determine challenger-role at game-start or game-end
ALTER TABLE TournamentLadderProps
   ADD DetermineChallenger enum('GAME_START','GAME_END') NOT NULL default 'GAME_END' AFTER MaxChallenges ;
-----------

   * tournaments/ladder/challenge.php:
   - bugfix: missed changed func-signature of echo_off_time() to fix: weekend-clock-icon
     was always shown on weekend independent from game-WeekendClock-setting

2013-04-01 juga

   * include/message_functions.php (MessageControl.handle_send_message),
     include/globals.php (MOVEMSG_REPLY_TO_MAIN_FOLDER),
     include/std_functions.php (send_message):
   - bugfix: move normal message on replying from Reply to Main-folder,
     if no manual target folder selected

2013-03-31 juga

   * include/quick/quick_message_list.php (class QuickHandlerMessageList, ~.canHandle,
       ~.parseURL, ~.prepare, ~.prepare_filter_answers, ~.prepare_filter_folders,
       ~.check_allow_limit_all, ~.collect_msg_users, ~.process),
     include/message_functions.php (build_folders_all_received; DgsMessage.load_message,
       ~.build_message_base_query),
     include/quick/quick_message.php (class QuickMessage, ~.process_cmd_info, ~.fill_message_info),
     include/quick/quick_suite.php (QuickSuite.getQuickHandler),
     specs/quick_suite.txt, list_messages.php:
   - quick-handler message-object: added 'list'-command with own quick-handler
   - cleanup: added function-modifiers

2013-03-26 juga

   * include/quick/quick_message.php (QuickHandlerMessage.process_cmd_info),
     include/quick/quick_wroom.php (QuickHandlerWaitingroom.fill_wroom_object),
     specs/quick_suite.txt:
   - quick-message info-handler: added handicap- and komi-adjustments
   - quick-waiting-room info-handler: re-arranged handicap- and komi-adjustments
     to match with invitation-info

   * include/board.php (Board.mark_territory):
   - bugfix: wrong count of visited points for seki-mark-check to find non-toggable-points

2013-03-25 juga

   * include/game_functions.php (FairKomiNegotiation.echo_fairkomi_table;
       GameSetup.set_defaults, ~.encode, ~.to_string, ~.format_handicap_type,
         ~.new_from_game_setup, ~.parse_invitation_game_setup, ~.build_invitation_diffs;
       GameSetupChecker.check_komi, ~.check_time, ~.check_adjust_komi, ~.check_min_rated_games,
         ~.check_wroom_count;
       GameSetupBuilder.fill_invite_from_game_setup, ~.fill_new_game_from_game,
         ~.fill_new_game_from_game_setup, ~.build_url_adjustments;
       class GameSettingsCalculator, ~.calculate_settings;
       adjust_handicap, calc_def_max_handicap, get_gamesettings_viewmode,
       append_form_add_waiting_room_game, build_arr_handicap_stones),
     include/message_functions.php (game_settings_form, game_info_table, build_adjust_komi,
       build_adjust_handicap),
     include/wroom_control.php (WaitingroomOffer.calculate_offer_settings),
     include/make_game.php (make_invite_game_setup, create_game),
     include/game_texts.php (GameTexts.get_jigo_modes),
     include/std_functions.php (DEFAULT_MAX_HANDICAP),
     include/globals.php (GSETVIEW_STANDARD),
     tournaments/include/tournament_rules.php (TournamentRules.convertTournamentRules_to_GameRow,
       ~.convertTournamentRules_to_EditForm, ~.convertEditForm_to_TournamentRules),
     tournaments/edit_rules.php (parse_edit_form),
     tournaments/view_tournament.php (echo_tournament_rules),
     scripts/updates/fix_default_max_handi-1_0_16.php (_echo, load_games_gamesetup,
       load_profiles_gamesetup, handle_games_gamesetup, fix_game_invite_dispute,
       fix_game_finished_running, handle_profiles_gamesetup, fix_profile,
       handle_waiting_room_gamesetup, handle_tournament_rules_gamesetup),
     scripts/updates/fix_new_game_expert_view-1_0_16.php (_echo,
       load_profile_templates_new_game_expert_view),
     scripts/updates/database_changes_1_0_15_to_1_0_16.mysql,
     scripts/tests/Game_SettingsHelperTest.php,
     specs/db/dragon-ddl.sql,
     specs/db/table-Games.txt, specs/db/table-Tournaments.txt, specs/db/table-Waitingroom.txt,
     specs/quick_suite.txt, scripts/index.php,
     game_players.php (build_form_change_group, build_tableinfo_handicap_suggestion,
       use_handicap_suggestion),
     new_game.php (handle_add_game),
     gameinfo.php, message.php, site_map.php, waiting_room.php:
   - replaced default for max-handicap from former 21 to board-size-dependent max-handicap
     - selecting "default" for max-handicap will limit the handicap-stones used to start-games
       to a calculated max-default
     - formula used to calculate default max-handicap discussed in DGS-forums:
       round( 7.5 * ( handicapfactor($size) + 0.2 ) )
     - added handicap- and komi-adjustments to invitation and tournament-rules as well
     - merged jigo-check setting for fair-komi with and into jigo-mode setting of adjust-komi section
     - adjust GameSetup-encoding to store handicap- and komi-adjustments
       for all new-game views, invitations including their profiles
     - added migration-script to fix MaxHandicap from old max-handicap-value to default-max-handicap
       for running & finished games, invitation and new-game profiles, waiting-room and
       tournament-rules entries
     - merged simple and expert new-game view into one standard-view shown as default-view
       - previous release 1.0.15 introduced splitted views because of MPG/fair-komi views
       - reverting simple/expert-view split from previous release for easier support of handicap-
         and komi-adjustments, and also to encourage users to use new expert-settings
       - added migration-script to fix merge new-game expert-view with former simple-view
         into merged standard-view for new-game profiles
     - cleanup (minor changes, finer checks)
   - bugfix for game-info-table: show shape-game info for tournament-ladders
   - bugfix: open fair-komi invitation-template in fair-komi-new-game view
-----------
-- added default max-handicap
ALTER TABLE Waitingroom
   MODIFY MaxHandicap tinyint signed NOT NULL default -1 ;
ALTER TABLE TournamentRules
   MODIFY MaxHandicap tinyint signed NOT NULL default -1 ;

-- execute fix-script (with do_it=1) to merge new-game expert-view with standard-view:
--    'scripts/updates/fix_default_max_handi-1_0_16.php'

-- execute fix-script (with do_it=1) to merge new-game expert-view with standard-view:
-- IMPORTANT NOTE: execute script 'fix_default_max_handi-1_0_16.php' before this one!!
--    'scripts/updates/fix_merge_new_game_expert_view-1_0_16.php'
-----------

2013-03-15 juga

   * include/make_translationfiles.php (translation_query),
     translate.php:
   - added selectbox to allow to search for translated-texts only,
     changed 'untranslated'-checkbox to select-box including Untranslated/Translated/All-texts

   * translate.php:
   - added full page-navigation with jump to first/last-page and info with current/max-page

   * include/std_functions.php (echo_dragon_top_bar):
   - added server-version as tooltip in top-bar on DGS-link

   * include/game_functions.php (GameNotify.get_text_game_deleted),
     game_players.php (build_form_delete_game, delete_game_setup),
     specs/multi-player-game.txt:
   - added deletion of MP-game on SETUP-status, but only by game-master,
     notify other players about deletion

   * include/time_functions.php (is_weekend_clock_stopped),
     include/gui_functions.php (echo_off_time),
     game.php, gameinfo.php:
   - bugfix: weekend-clock-icon was always shown on weekend independent from
     game-WeekendClock-setting

   * new_game.php:
   - bugfix: jump to my-waiting-room-games after creation of new game-offer

   * include/classlib_profile.php (class SearchProfile, ~.get_arg, ~.handle_action, ~.to_string),
     include/globals.php (SP_ARG_NO_DEF, SPURL_NO_DEF),
     include/std_functions.php (make_dragon_main_menu),
     features/edit_feature.php, features/list_features.php,
     features/list_votes.php, features/vote_feature.php,
     waiting_room.php (load_waitingroom_info),
     list_shapes.php, site_map.php:
   - bugfixes:
     - fixed profile-handling to not use default-profile on showing "Info" or
       normal "Search" preserving current filter-values
     - fixed showing multi-player-game wroom-entry for correct my|all-view
     - reverted change to add arg-overwriting with additional URL-arg SPURI_ARGS
     - added option for profile-handling to forbid loading default-profile

2013-03-08 juga

   * ratingpng.php (get_rating_data):
   - rating-graph: use 1st rated game as start-time instead of register-date (fallback)

   * translate.php:
   - translating: sort languages for selectbox

   * scripts/sql_game_export.php (export_game):
   - bugfix: handle empty GamePlayers-list

   * tournaments/roundrobin/view_pools.php (build_pool_notes):
   - typo translation-text

2013-01-30 juga

   * include/game_functions.php ($MAP_ACTBY_SUBJECT;
       GameFinalizer.finish_game, ~.get_text_game_deleted, ~.get_text_game_result;
       NextGameOrder.build_status_games_query),
     specs/quick_suite.txt,
     admin_game.php:
   - add user-id and name of author of message in game-deletion and game-finalization message
   - bugfix for quick-status: convert integer next-game-order into enum for loading
     and sorting by manual given order

   * include/game_functions.php (NextGameOrder.build_status_games_query):
   - bugfix for quick-status: convert integer next-game-order into enum
     for loading and sorting by manual given order

   * robots.txt:
   - added Crawl-delay 5s

2013-01-13 juga

   * game.php, manage_sgf.php:
   - added notes with warning about SGF-download
   - fix download-URL

2013-01-12 juga

   * manage_sgf.php:
   - added bottom-link to download SGF WITHOUT any comments

   * waiting_room.php:
   - bugfix: wrong call-args to WaitingroomControl::build_waiting_room_query()

   * include/quick/quick_wroom.php (QuickHandlerWaitingroom.prepare),
     specs/quick_suite.txt:
   - bugfix: added correct default order for waiting-room
   - sync'ed suitable-filter with waiting-room behavior by adding my-waiting-games
     with filter_suitable=2, and by filtering out own waiting-games for all and suitable filter

2013-01-11 juga

   * manage_sgf.php:
   - added "normal" SGF-download bottom-links to ease reviewing

   * include/game_sgf_control.php (GameSgfControl.prepare_verify_game_sgf):
   - bugfix: verify of SGFs with handicap-setup failed, so treat handicap-stones like shape-setup

   * include/game_sgf_control.php (GameSgfControl. delete_game_sgf, ~.save_game_sgf,
       ~.verify_game_sgf, ~.count_cache_game_sgfs, ~.delete_cache_game_sgfs_count),
     include/cache_globals.php (CACHE_GRP_GAMESGF_COUNT, $ARR_CACHE_GROUP_NAMES,
       $ARR_CACHE_GROUP_CLEANUP),
     include/config.php ($DGS_CACHE_GROUPS),
     specs/caching.txt, game.php:
   - use caching to count attached-SGFs on game-page
     - invalidate cache on changing 'AttachedSgf'-game-flags indicator,
       that is on saving or deleting SGF

   * include/game_sgf_control.php (GameSgfControl.delete_game_sgf, ~.save_game_sgf),
     include/db/games.php (Games.parseFlags, ~.buildFlags, ~.update_game_flags),
     include/quick/quick_game_info.php (QuickHandlerGameInfo.convertGameFlags),
     include/gui_functions.php (echo_image_game_sgf),
     include/globals.php (GAMEFLAGS_ATTACHED_SGF),
     scripts/updates/database_changes_1_0_15_to_1_0_16.mysql,
     specs/db/dragon-ddl.sql, specs/db/table-Games.txt, specs/quick_suite.txt,
     game.php, show_games.php, site_map.php:
   - added new column and search-filter for all game-lists for games with attached-SGFs
     - maintain Games.Flags 'AttachedSgf' as indicator if game has attached SGF
     - optimize game-page checking for attached-SGFs only if according game-flag set
     - added special link in site-map to search for all finished games
       with attached SGFs without game-list end-date-restriction
     - refactored printing SGF-icon into echo_image_game_sgf()-function
-----------
-- added 'AttachedSgf'-flag as indicator for the presence of SGFs for game
ALTER TABLE Games
   MODIFY Flags set('Ko','HiddenMsg','AdmResult','TGDetached','AttachedSgf') NOT NULL default '' ;
-----------

2013-01-10 juga

   * include/game_sgf_control.php,
     game.php, manage_sgf.php:
   - allow attaching SGFs also to running game

   * include/game_functions.php (GameHelper._delete_base_game_tables):
   - delete GameSgf-table-entries on game-deletion

   * include/sgf_parser.php (sgf_parser, sgf_parse_node, sgf_parse_args, get_handicap_pattern;
       class SgfParser, ~.might_be_sgf),
     include/game_sgf_control.php (GameSgfControl, ~.save_game_sgf, ~.verify_game_sgf,
       ~.prepare_verify_game_sgf),
     include/board.php (class Board, ~.init_board, ~.load_from_db),
     manage_sgf.php:
   - parses, checks SGF and verifies that game from parsed SGF matches game in database
     - parses and check for correct SGF-format
     - verify for same board-size, handicap, komi, shape-setup and first 25 moves
   - added translatable texts for parsing SGF

   * include/quick/quick_game_notes.php (class QuickHandlerGameNotes, ~.canHandle,
       ~.parseURL, ~.prepare, ~.process),
     include/quick/quick_game_info.php (class QuickHandlerGameInfo, ~.prepare,
       ~.process, ~.fill_game_info),
     include/quick/quick_suite.php (QuickSuite.getQuickHandler),
     specs/quick_suite.txt:
   - added quick-commands for game-object: save_notes, hide_notes, show_notes
   - refactored game-notes 'get_notes'-commands into separate class QuickHandlerGameNotes
   - quick-game-info: return full game-notes instead of length-stripped notes

   * include/game_sgf_control.php (GameSgfControl.delete_game_sgf, ~.save_game_sgf),
     include/globals.php (CSS_VERSION),
     skins/dragon/screen.css,
     manage_sgf.php:
   - ask for confirmation on removing own SGF
   - added 'Refresh'-bottom-link to refresh page
   - bugfix: check if file-read was successful for saving SGF

   * include/db/game_sgf.php (class GameSgf, ~.to_string, ~.persist, ~.insert, ~.update, ~.delete,
       ~.fillEntityData, ~.build_query_sql, ~.new_from_row, ~.load_game_sgf, ~.load_game_sgfs,
       ~.count_game_sgfs),
     include/game_sgf_control.php (class GameSgfControl, ~.delete_game_sgf, ~.save_game_sgf,
       ~.download_game_sgf),
     scripts/updates/database_changes_1_0_15_to_1_0_16.mysql,
     scripts/updates/other_changes_1_0_15_to_1_0_16.txt,
     specs/db/table-Games.txt, specs/db/dragon-ddl.sql,
     game.php, manage_sgf.php, people.php, site_map.php:
   - allow to upload SGFs for finished games
     - added manage-sgf page to add, update, delete and download SGFs
     - allow one SGF per game and user
     - max. upload file-size 100KB
     - game-page shows new sgf-icon if there are attached SGFs to download
     - show 'Attach SGF' bottom-link on game-page for finished games
-----------
-- added table to store attached SGFs for games
CREATE TABLE GameSgf (
  gid int NOT NULL,
  uid int NOT NULL,
  Lastchanged datetime NOT NULL default '0000-00-00 00:00:00',
  SgfData blob NOT NULL,
  PRIMARY KEY (gid,uid)
) ENGINE=MyISAM ;
-----------

   * include/game_functions.php (MultiPlayerGame.update_players_end_mpgame;
       GameHelper.delete_running_game, ~.update_players_end_game):
   - bugfix: deleting a multi-player-game changed wrongly Players.Running/Finished-fields

2013-01-07 juga

   * include/message_functions.php (game_info_table),
     include/utilities.php (append_unique),
     scripts/updates/database_changes_1_0_15_to_1_0_16.mysql,
     site_map.php, waiting_room.php:
   - changed waiting-room view:
     - added view 'My waiting games' only showing own waiting games
     - replaced boolean-filter for suitable with selectbox with All/Suitable/Mine
     - All and Suitable waiting games do not show own games
     - removed 'New Game' bottom-link
     - adjusted tooltip-text 'Out of range' to the more general 'Restricted'
     - changed existing bottom-link translation-texts without losing translations
-----------
-- change existing translation-text for waiting-room without losing translations
UPDATE TranslationTexts
   SET Text='All waiting games', Translatable='Y', Updated=NOW()
   WHERE Text='Show all waiting games' LIMIT 1 ;
UPDATE TranslationTexts
   SET Text='Suitable waiting games', Translatable='Y', Updated=NOW()
   WHERE Text='Show suitable games only' LIMIT 1 ;
-----------

   * include/classlib_profile.php (class SearchProfile):
   - bugfix: initializing overwrite-args ignoring leading and trailing separators

2013-01-05 juga

   * include/std_functions.php (check_for_observers):
   - bugfix: add 'show observers'-link if game is observed by myself

   * snapshot.php:
   - added notes how to create tarballs of code-snapshot, translation-data, images

   * admin_faq.php:
   - bugfixes:
     - keep expand-all-view on editing entry and coming back to list,
       and on all other list-actions
     - expand all categories on moving entry into new category up or down

   * include/quick_common.php (DATE_FMT_TZ),
     rss/status.php (rss_open),
     wap/status.php:
   - RSS-status: added RSS-channel-tag 'lastBuildDate'
   - RSS-status: added human-readable built-date in channel-text
   - WAP-status: added human-readable built-date in card-item

   * include/message_functions.php (message_info_table),
     game.php, game_comments.php, message.php,
     message_thread.php (echo_message_row):
   - show game-board for <igoban>-tag for
     - private messages on send message, preview message, view message,
       view message-thread
     - game-move messages on preview move-message for submitting move,
       view game, view game-comments

   * include/std_functions.php (LOGIN_NO_QUOTA_HIT, is_logged_in),
     admin_faq.php, translate.php:
   - don't decrease quota on FAQ-editing & translating

   * list_bulletins.php:
   - bugfix bulletin-list: view-bulletin may only be allowed to specific user

   * people.php:
   - comment out older developers
   - cleanup: avoid translations for unimportant texts describing origin of icons

   * translate.php:
   - bugfix for previous removed const TRANSL_ALLOW_FILTER:
     interpreted if-expression with TRANSL_ALLOW_FILTER in wrong way

   * include/sgf_builder.php (SgfBuilder.formatPlayerName):
   - changed node-text for multi-player-game: added current rating of moving
     player as well besides user-id to know who has moved

2012-12-18 juga

   * scripts/translation_consistency.php (check_consistency_faq_refs, fix_faq_reference,
       replace_faq_ref_text_callback):
   - added check to correct references to FAQ correcting category of moved entries
     to new categories

2012-12-17 juga

   * include/table_columns.php (Table.set_default_sort):
   - bugfix: sort-order reverse was not possible any more

   * scripts/translation_consistency.php:
   - bugfix: correct check on missing TranslationFoundInGroup reporting wrong-text-id

2012-12-16 juga

   * users.php:
   - bugfix: enforce NO_HIDE for table-column Rating for show user-rating-pos

   * game_players.php (build_form_start_game),
     game.php:
   - corrected wrong msg-icon for 'Send message' for MPG-message

   * include/table_columns.php (Table.set_default_sort, ~.set_sort, ~.make_sort_images,
       ~.current_order_string):
   - bugfix: ensure, that used db-fields/aliases for sorting are only used for visible table-column

