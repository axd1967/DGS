------------------------------------------------------------------
General infos
------------------------------------------------------------------
changelog reference at:
http://www.gnu.org/prep/standards/html_node/Change-Logs.html

previous server update:
Release [2008-12-14] - DGS 1.0.14 - CVS-tag [DGS-stable-200812] on branch [DGS-stable-200712]

Developers INFO:

2009-08-04 juan_grande
   Area scoring

2009-02-11 juga
   Tournaments

2007-12-23 rodival
   Code Cleanup, New Features

------------------------------------------------------------------
ChangeLog
------------------------------------------------------------------

2010-02-05 juga

   * tournaments/include/tournament_ladder.php (class TournamentLadder,
       ~.insert, ~.fillEntityData, ~.update_incoming_challenges, ~.new_from_row,
       ~.add_participant_to_ladder),
     tournaments/include/tournament_ladder_props.php (class TournamentLadderProps,
       ~.fillEntityData, ~.calc_max_defenses, ~.check_properties, ~.build_notes_props,
       ~.fill_ladder_challenge_range, ~.verify_challenge, ~.new_from_row)
     tournaments/include/types/dgs_ladder.php (DgsLadderTournament.createTournament),
     scripts/updates/database_changes_1_0_14_to_1_0_15.mysql,
     specs/db/table-Tournaments.txt, skins/dragon/screen.css,
     tournaments/ladder/challenge.php, tournaments/ladder/edit_props.php (parse_edit_form),
     tournaments/ladder/view.php, tournaments/manage_tournament.php:
   - added max. number of incoming ladder-challenges: TournamentLadderProps.MaxDefenses*
   - added current number of incoming challenges: TournamentLadder.ChallengesIn
-----------
-- added max. number of incoming ladder-challenges
ALTER TABLE TournamentLadderProps
   ADD MaxDefenses tinyint unsigned NOT NULL,
   ADD MaxDefenses1 tinyint unsigned NOT NULL DEFAULT '0',
   ADD MaxDefenses2 tinyint unsigned NOT NULL DEFAULT '0',
   ADD MaxDefensesStart1 tinyint unsigned NOT NULL DEFAULT '0',
   ADD MaxDefensesStart2 tinyint unsigned NOT NULL DEFAULT '0' ;

ALTER TABLE TournamentLadder
   ADD ChallengesIn tinyint unsigned NOT NULL DEFAULT '0' ;
-----------

2010-02-03 juga

   * tournaments/include/tournament_games.php (TournamentGames.load_tournament_game_by_uid),
     tournaments/include/tournament_ladder_props.php (TournamentLadderProps.build_notes_props,
       ~.fill_ladder_running_games, ~.verify_challenge),
     scripts/updates/database_changes_1_0_14_to_1_0_15.mysql,
     tournaments/ladder/view.php:
   - restrict challenges to one running game per ladder-user
-----------
-- [index] added index on player uids
ALTER TABLE TournamentGames
   ADD KEY Challenger_uid (Challenger_uid),
   ADD KEY Defender_uid (Defender_uid ) ;
-----------

   * tournaments/ladder/challenge.php:
   - show confirm-button only if no error detected for challenge

   * include/gui_functions.php (echo_notes), skins/dragon/screen.css:
   - use CSS-class for <ul>-elements for tighter output of nested lists

2010-02-02 juga

   * tournaments/include/tournament_games.php (class TournamentGames,
       ~.load_tournament_games),
     tournaments/include/tournament_ladder.php (class TournamentLadder,
       ~.add_running_game, ~.get_running_games, ~.build_linked_running_games),
     tournaments/include/tournament_ladder_props.php (TournamentLadderProps.fill_ladder_challenge_range,
       ~.fill_ladder_running_games),
     scripts/updates/database_changes_1_0_14_to_1_0_15.mysql,
     tournaments/ladder/view.php:
   - show list of running tournament games for incoming challenges
     at defenders position in ladder-view with rank of challenger:
     link "[#challenger-rank]" to page with tournament-game
   - adjust key: combine index on tid with Status
-----------
-- adjust key: combine index on tid with Status
ALTER TABLE TournamentGames
   DROP KEY tid ;
ALTER TABLE TournamentGames
   ADD KEY tid_Status (tid,Status) ;
-----------

2010-02-01 juga

   * tournaments/include/tournament_ladder_props.php (TournamentLadderProps.make_ladder),
     tournaments/ladder/view.php:
   - added index on ListIterator with TournamentLadder-objects on Rank & uid
     for optimized enhancing ladder-scans
   - renamed method: make_ladder_info -> make_ladder

   * include/std_classes.php (class ListIterator, ~.clearIndex, ~.addIndex,
       ~.getIndexMap, ~.getIndexValue, ~.to_string, ~.addItem, ~.rescanIndex):
   - added index on row-fields for ListIterator

2010-01-31 juga

   * tournaments/include/tournament.php (Tournament.build_info),
     include/game_functions.php (class GameAddTime.add_time, ~.allow_add_time_opponent),
     scripts/tests/GameAddTimeTest.php, confirm.php,
     game.php (draw_game_info), NEWS:
   - forbid adding-time and game-deletion for tournament-games
   - show tournament-info with links in game-info-box:
     scope, type, tourney-ID, status, title
   - bugfixes, minor changes

   * gameinfo.php, NEWS:
   - added tournament-info with links: tourney-ID, scope, type, title, status, rounds
   - added game-info link at Game-ID to refresh page

   * show_games.php, status.php, skins/dragon/screen.css, NEWS:
   - show tourney-icon for tournament-games linked to tournament-view
   - Games-page: added filter to search for tournament-games

   * include/gui_functions.php (echo_image_gameinfo, echo_image_tournament_info):
   - show tourney-icon for tournament-games with or without link to tournament-view

   * people.php:
   - added credits for tourney-icon from
     http://www.iconarchive.com/show/sport-icons-by-icons-land/Trophy-Gold-icon.html

   * tournaments/include/tournament_rules.php (TournamentRules.create_game),
     include/make_game.php (create_game),
     scripts/updates/database_changes_1_0_14_to_1_0_15.mysql:
   - set Games.tid on creating game for tournament-reference
-----------
-- add tournament-reference in Games-table to tournament
ALTER TABLE Games
   ADD tid int NOT NULL DEFAULT '0' AFTER ID ;
ALTER TABLE Games
   ADD KEY tid (tid) ;
-----------

   * tournaments/include/tournament_ladder.php (TournamentLadder.new_tournament_game),
     tournaments/include/tournament_ladder_props.php (TournamentLadderProps.make_ladder_info,
       ~.calc_highest_challenge_rank, ~.verify_challenge),
     tournaments/include/tournament_rules.php (class TournamentRules, ~.create_game,
       ~.convertTournamentRules_to_GameRow, ~.convertTournamentRules_to_EditForm),
     tournaments/include/tournament_helper.php (class TournamentHelper),
     tournaments/ladder/challenge.php,
     include/error_codes.php (ErrorCode.init), NEWS:
   - create game and tournament-game for verified challenge
   - fix bug handling StdHandicap-field: missed bool <-> Y|N conversion
   - added error-code 'tournament_participant_unknown'

   * include/make_game.php (create_game):
   - fixed bug for making status-games-timeout-date:
     weekend-clock-offset has been added twice

   * include/db_classes.php (EntityData.get_sql_value):
   - handling 0-value for dates

   * include/classlib_user.php (class User, ~.to_string, ~.new_from_row):
   - added full Players-row into User-object: User->urow

   * include/connect2mysql.php (ta_begin, ta_end):
   - allow ta_begin/end() to be nested preserving first ignore-user-abort
     until all transactions are "closed"

   * tournaments/include/tournament_participant.php (class TournamentParticipant,
       ~.to_string, ~.need_rating, ~.fillEntityData, ~.new_from_row),
     scripts/updates/database_changes_1_0_14_to_1_0_15.mysql,
     specs/db/table-Tournaments.txt:
   - cleanup: removed unused db-field TournamentParticipant.AuthToken
   - cleanup: removed unused function TournamentParticipant.need_rating()
-----------
-- [unused] removed unused field
ALTER TABLE TournamentParticipant
   DROP COLUMN AuthToken ;
-----------

   * tournaments/include/tournament_games.php (class TournamentGames),
     tournaments/include/tournament_globals.php,
     scripts/updates/database_changes_1_0_14_to_1_0_15.mysql,
     specs/db/table-Tournaments.txt:
   - added table for tournament games
-----------
-- added table for tournament games
CREATE TABLE TournamentGames (
   ID int NOT NULL auto_increment,
   tid int NOT NULL,
   gid int NOT NULL DEFAULT '0',
   Status enum('INIT','PLAY','DONE') NOT NULL DEFAULT 'INIT',
   Flags smallint unsigned NOT NULL DEFAULT '0',
   Lastchanged datetime NOT NULL DEFAULT '0000-00-00 00:00:00',
   ChangedBy varchar(54) NOT NULL DEFAULT '',
   Challenger_uid int NOT NULL,
   Challenger_rid int NOT NULL,
   Defender_uid int NOT NULL,
   Defender_rid int NOT NULL,
   StartTime datetime NOT NULL DEFAULT '0000-00-00 00:00:00',
   EndTime datetime NOT NULL DEFAULT '0000-00-00 00:00:00',
   Score decimal(5,1) NOT NULL DEFAULT '0.0',
   PRIMARY KEY (ID),
   KEY tid (tid)
) ENGINE=MyISAM;
-----------

   * scripts/updates/database_changes_1_0_14_to_1_0_15.mysql:
   - db-cleanup field-size DECIMAL-type fields
   - db-cleanup for DECIMAL-type fields for which internal representation
     changed for MySQL-upgrade from v4 to v5: string -> byte
-----------
-- [field-size] COL Games.Score : dec(7,1) -> dec(5,1)
-- [cleanup] COL Games.Score : migrate MySQL4 -> MySQL5 interal storage
-- following must be 0
SELECT COUNT(*) FROM Games WHERE Score NOT BETWEEN -2000 AND 2000 ;
-- compare Data_length for table before & after field-migration
SHOW TABLE STATUS LIKE 'Games' ;
-- migrate MySQL4 (decimal string-type) -> MySQL5 (decimal byte-type)
ALTER TABLE Games
   ADD MIGR_Score decimal(5,1) NOT NULL DEFAULT '0.0' AFTER Score ;
UPDATE Games
   SET MIGR_Score = Score ;
ALTER TABLE Games
   DROP COLUMN Score ;
ALTER TABLE Games
   CHANGE MIGR_Score Score decimal(5,1) NOT NULL DEFAULT '0.0' ;
ALTER TABLE Games
  ADD KEY Score (Score) ;
SHOW TABLE STATUS LIKE 'Games' ;

-- [field-size] COL Games.Komi : dec(6,1) -> dec(4,1)
-- [cleanup] COL Games.Komi : migrate MySQL4 -> MySQL5 interal storage
-- following must be 0
SELECT COUNT(*) FROM Games WHERE Komi NOT BETWEEN -200 AND 200 ;
-- compare Data_length for table before & after field-migration
SHOW TABLE STATUS LIKE 'Games' ;
-- migrate MySQL4 (decimal string-type) -> MySQL5 (decimal byte-type)
ALTER TABLE Games
   ADD MIGR_Komi decimal(4,1) NOT NULL DEFAULT '6.5' AFTER Komi ;
UPDATE Games
   SET MIGR_Komi = Komi ;
ALTER TABLE Games
   DROP COLUMN Komi ;
ALTER TABLE Games
   CHANGE MIGR_Komi Komi decimal(4,1) NOT NULL DEFAULT '6.5' ;
SHOW TABLE STATUS LIKE 'Games' ;

-- [field-size] COL Waitingroom.Komi : dec(6,1) -> dec(4,1)
-- [cleanup] COL Waitingroom.Komi : migrate MySQL4 -> MySQL5 interal storage
-- following must be 0
SELECT COUNT(*) FROM Waitingroom WHERE Komi NOT BETWEEN -200 AND 200 ;
-- compare Data_length for table before & after field-migration
SHOW TABLE STATUS LIKE 'Waitingroom' ;
-- migrate MySQL4 (decimal string-type) -> MySQL5 (decimal byte-type)
ALTER TABLE Waitingroom
   ADD MIGR_Komi decimal(4,1) NOT NULL DEFAULT '6.5' AFTER Komi ;
UPDATE Waitingroom
   SET MIGR_Komi = Komi ;
ALTER TABLE Waitingroom
   DROP COLUMN Komi ;
ALTER TABLE Waitingroom
   CHANGE MIGR_Komi Komi decimal(4,1) NOT NULL DEFAULT '6.5' ;
SHOW TABLE STATUS LIKE 'Waitingroom' ;

-- [field-size] COL Waitingroom.AdjKomi : dec(6,1) -> dec(4,1)
ALTER TABLE Waitingroom
   CHANGE AdjKomi AdjKomi decimal(4,1) NOT NULL default '0.0' ;

-- [field-size] COL TournamentRules.Komi : dec(6,1) -> dec(4,1)
-- [field-size] COL TournamentRules.AdjKomi : dec(6,1) -> dec(4,1)
ALTER TABLE TournamentRules
   CHANGE Komi Komi decimal(4,1) NOT NULL default '6.5',
   CHANGE AdjKomi AdjKomi decimal(4,1) NOT NULL default '0.0' ;
-----------

2010-01-30 juga

   * include/error_codes.php (ErrorCode.init),
     tournaments/edit_round.php, tournaments/ladder/challenge.php:
   - die with new error 'tournament_wrong_status' if on wrong tourney-status
   - replaced specific error-code 'tournament_miss_rules' with 'bad_tournament'

   * tournaments/include/tournament_ladder.php (TournamentLadder.build_rank_kept),
     tournaments/ladder/challenge.php, tournaments/ladder/view.php, NEWS:
   - added ladder-challenge page to confirm or cancel challenge
   - moved building of Rank-Kept info into TournamentLadder-class

   * include/std_functions.php (make_menu):
   - bugfix catching division-by-zero for empty menu-array while making menus

   * tournaments/include/tournament_ladder_props.php (class TournamentLadderProps),
     tournaments/include/tournament_status.php (TournamentStatus.check_conditions_status_REG),
     tournaments/include/tournament_template.php (TournamentTemplate.checkProperties),
     tournaments/include/types/dgs_ladder.php (DgsLadderTournament.createTournament, ~.checkProperties),
     tournaments/manage_tournament.php (make_links_ttype_specific),
     tournaments/view_tournament.php,
     tournaments/ladder/edit_props.php,
     tournaments/ladder/view.php,
     scripts/updates/database_changes_1_0_14_to_1_0_15.mysql,
     specs/db/table-Tournaments.txt, NEWS:
   - added ladder-specific properties
     - absolute challenge-range = challenge allowed for X positions above own position
     - added editor for ladder-specific props with preview
     - show ladder-specific props in ladder-view
     - show which users can be challenged for current user in ladder-view
     - Wizard: insert TournamentLadderProps to create new DGS-ladder
       with default 10 for absolute challenge-range
-----------
-- added table for ladder tournament properties
CREATE TABLE TournamentLadderProps (
   tid int(11) NOT NULL,
   Lastchanged datetime NOT NULL default '0000-00-00 00:00:00',
   ChangedBy varchar(54) NOT NULL default '',
   ChallengeRangeAbsolute smallint unsigned NOT NULL DEFAULT '0',
   PRIMARY KEY (tid)
) ENGINE=MyISAM;
-----------

   * include/std_classes.php (ListIterator.resetListIterator):
   - added function to reset iterating of ListIterator

   * tournaments/include/tournament_ladder.php (class TournamentLadder):
   - added non-DB field AllowChallenge that is true if challenge is allowed in user-context

   * tournaments/include/tournament_utils.php (TournamentUtils.isNumberOrEmpty):
   - added arg for number-check to check for negative numbers

   * tournaments/edit_properties.php, tournaments/edit_round.php,
     tournaments/edit_rules.php, tournaments/edit_tournament.php:
   - fix array-merging of error-list with += which only works ok on hashes
   - replace persist() using additional query by direct update(), wizard creates needed tables

2010-01-28 juga

   * admin_password.php, NEWS:
   - add 2nd HTML-form to show email (if existing) on admin-new-password page

   * tournaments/include/tournament_participant.php (TournamentParticipant.getLinkTextRegistration),
     include/classlib_user.php (class User, ~.to_string, ~.new_from_row),
     include/error_codes.php (ErrorCode.init), include/quick_common.php,
     admin_show_users.php, admin_users.php,
     tournaments/edit_participant.php, tournaments/register.php,
     tournaments/list_participants.php, tournaments/list_tournaments.php,
     tournaments/view_tournament.php, tournaments/ladder/admin.php,
     tournaments/wizard.php, NEWS:
   - added admin-options to deny tournament creation and registration for NEW tournaments,
     user can continue in tourneys he's already registered

   * tournaments/include/types/dgs_ladder.php (DgsLadderTournament.createTournament):
   - added ta_begin/end-transactional enclosing to create tournament with multi-table-updates

   * tournaments/edit_director.php, tournaments/edit_participant.php,
     tournaments/register.php:
   - keep bottom-links in nearly same order for different tournament-pages

   * tournaments/view_tournament.php:
   - added tourney-ID to title

   * tournaments/include/tournament_director.php (TournamentDirector.count_tournament_directors,
       ~.load_user_row, ~.assert_min_directors),
     include/error_codes.php (ErrorCode.init),
     tournaments/edit_director.php, tournaments/list_directors.php:
   - assure min. number of tournament directors if not in NEW/ADMIN/DELETED tourney-status

   * include/std_classes.php (ListIterator.getItemCount):
   - added function to get number of items stored in ListIterator

   * tournaments/include/tournament.php (Tournament.build_info):
   - added tourney-ID in build-tourney-info for titles

2010-01-27 juga

   * tournaments/include/tournament_template.php (TournamentTemplate.joinTournament),
     tournaments/include/types/dgs_ladder.php (DgsLadderTournament.joinTournament),
     tournaments/edit_participant.php (send_register_notification),
     tournaments/register.php:
   - join ladder-tournament if user is finally REGISTERed by
     - user accepting invitation
     - user registering by him/herself
     - tournament-director accepting user-application
   - add link in tourney-invite-notification to edit tourney-user-registration

   * tournaments/include/tournament_ladder.php (TournamentLadder.add_user_to_ladder),
     tournaments/ladder/admin.php:
   - changed signature of add_user_to_ladder(tid,User-object) -> (tid,uid)

   * tournaments/include/tournament_ladder.php (class TournamentLadder,
       ~.remove_user_from_ladder, ~.change_user_rank, ~.switch_user_rank,
       ~.add_participant_to_ladder, ~.move_up_ladder_part, ~.move_down_ladder_part,
       ~.seed_ladder):
   - lock table TournamentLadder for multiple SQL-statements on same table to
     - remove user from ladder
     - change rank of ladder-user
     - seed ladder
   - update TournamentLadder.BestRank + RankChanged for
     - switching places in ladder if BestRank set already,
     - moving ladder-users up or down one rank
     - seeding ladder
     - set RankChanged to default-value, i.e. unset, for newly added ladder-user
   - changed nomenclature for object-methods in db-query-debug-message

   * include/connect2mysql.php (db_lock, db_unlock),
     scripts/updates/database_changes_1_0_14_to_1_0_15.mysql,
     scripts/README.developers, INSTALL:
   - added function to support table-locking
   - need access-right LOCK-TABLES grant for DGS-user
-----------
-- grant access-right to lock tables to DGS db-user
-- Lookup your respective configuration in 'include/config-local.php'
GRANT LOCK TABLES ON DB_NAME.* TO MYSQLUSER@MYSQLHOST ;
-----------

   * tournaments/ladder/view.php:
   - added table-column 'Rank Kept' with relative-time rank is kept for ladder-users
   - for TDs show tournament-participant-list in admin-mode

   * tournaments/include/tournament_participant.php,
     tournaments/include/tournament_globals.php:
   - moved TournamentParticipant-consts to tournament_globals.php

   * include/quick_common.php:
   - added const SECS_PER_HOUR

   * statisticspng.php:
   - optimize aggregrate-SQL MAX(func(col)) -> func(MAX(col))

2010-01-26 juga

   * tournaments/manage_tournament.php, tournaments/ladder/admin.php:
   - added Edit-Ladder to remove ladder-user and change rank of ladder-users
   - added description about Admin/Edit-Ladder functionality
   - added 4th step PLAY-phase

   * tournaments/include/tournament_status.php (TournamentStatus.check_view_status),
     tournaments/ladder/view.php (prepare_update_rank, admin_edit_ladder_extend_table_form),
     tournaments/ladder/retreat.php,
     skins/dragon/screen.css:
   - added functionality in restricted admin-mode for Edit-Ladder to remove ladder-user and change rank of ladder-users
   - added way for user to retreat from ladder also removing tourney user registration
   - allow viewing of ladder only on certain tourney-status PLAY|CLOSED for user, additional on PAIR for TD
   - added link in bottom bar for ladder-user to retreat from ladder also removing tourney user registration
   - use CSS to emphasize current user in ladder

   * tournaments/include/tournament_ladder.php (TournamentLadder.remove_user_from_ladder,
       ~.change_user_rank, ~.load_max_rank, ~.load_rank, ~.load_tournament_ladder_by_user,
       ~.load_tournament_ladder_by_rank, ~.add_participant_to_ladder, ~.move_up_ladder_part,
       ~.move_down_ladder_part, ~.get_view_ladder_status):
   - fix removal of user from ladder:
     - move below ladder-users one rank up
     - optimized check if user removed from ladder
   - added function to support:
     - changing of user-rank moving up or down in ladder
     - switching rank-places of two users in ladder using atomar/optimized SQL-statement
     - load rank of ladder-user
     - loading ladder-user by TournamentLadder.uid or .rid
     - loading ladder-user by TournamentLadder.Rank
     - move ladder-part up or down by one rank
     - decision with authorisation about viewing ladder for TD or user

   * include/table_columns.php (class Table, ~.make_table_form, ~.make_table):
   - added/refactored method to pass-out Form-object before printing and making-table

   * tournaments/edit_participant.php:
   - show Admin-user link in bottom bar only on tourney-status PAIR|PLAY

   * tournaments/include/tournament_utils.php (TournamentUtils.build_num_range_sql_clause,
       ~.calc_best_rank):
   - added function to build SQL-clause for number range
   - added function to calculate new best-rank for TournamentLadder.BestRank

   * tournaments/include/types/dgs_ladder.php (DgsLadderTournament.createTournament):
   - fix bug using object-method createError()

   * tournaments/view_tournament.php:
   - cleanup: less db-queries

2010-01-24 juga

   * tournaments/edit_director.php, tournaments/edit_participant.php,
     tournaments/edit_properties.php, tournaments/edit_round.php,
     tournaments/edit_rules.php, tournaments/edit_status.php,
     tournaments/edit_tournament.php, tournaments/ladder/admin.php,
     tournaments/ladder/view.php, tournaments/list_directors.php,
     tournaments/list_participants.php, tournaments/manage_tournament.php,
     tournaments/register.php, tournaments/view_tournament.php:
   - adjusted bottom-menu link-texts:
     - "View this tournament" -> "Tournament info"
     - "Manage this tournament" -> "Manage tournament"

   * tournaments/include/tournament_participant.php (class TournamentParticipant.authorise_delete,
       ~.authorise_edit_customized, ~.authorise_edit_register_status),
     tournaments/register.php,
     tournaments/edit_participant.php:
   - restrict customized-editing, deleting TP and status-change
     to certain tournament-status (REG|PLAY) and TP-status (<>REG),
     hide inputs when change not allowed
   - show current tournament-status
   - for edit-TP: added link in bottom bar to admin-ladder-user

   * tournaments/ladder/admin.php (add_form_edit_user):
   - added removal of ladder-users for ladder-only or with TP-registration
   - added consistency-checks on adding and removing ladder-users
   - allow restricted editing also for PLAY-tourney-status
   - added uid in form-URL if available for refresh add-status
   - added sub-section headers

   * tournaments/include/tournament_ladder.php (class TournamentLadder.remove_user_from_ladder,
       ~.load_tournament_ladder_by_uid, ~.add_user_to_ladder, ~.get_edit_tournament_status):
   - added functions to support admin of ladder-users: add-user, remove-user
   - allow editing of TP also for PLAY-tourney-status

   * tournaments/view_tournament.php:
   - added ladder-view in new section 'Tournament games'

   * tournaments/include/tournament_ladder.php (class TournamentLadder.seed_ladder,
       ~.add_participant_to_ladder),
     tournaments/ladder/view.php, skins/dragon/screen.css:
   - mark own row in tournament-ladder with light blue background
   - show ladder-users current and best rank, show best-rank only if not 0

   * tournaments/include/tournament_status.php (TournamentStatus.check_action_status):
   - fixed bug in check_action_status: used given error-message-format
   - removed unused method 'check_register_status'

   * include/table_columns.php (Table.make_tablerow):
   - added additional table-row-class-attribute 'extra_class'

   * include/error_codes.php:
   - added error-code for invalid TP-status

2010-01-23 juga

   * tournaments/include/tournament_ladder.php (class TournamentLadder, ~.insert,
       ~.update, ~.delete, ~.fillEntityData, ~.check_participant_registrations),
     tournaments/include/tournament_participant.php (class TournamentParticipant,
       ~.load_tournament_participants_registered),
     tournaments/include/tournament_status.php (class TournamentStatus, ~.check_conditions_status_PLAY),
     tournaments/include/tournament_template.php (class TournamentTemplate, ~.checkParticipantRegistrations),
     tournaments/include/types/dgs_ladder.php (class DgsLadderTournament, ~.checkParticipantRegistrations),
     tournaments/edit_properties.php (parse_edit_form):
   - implemented check for PAIR->PLAY tournament-status change
   - added tournament-type specific limits for min/max participants

   * tournaments/include/tournament_ladder.php (class TournamentLadder, ~.load_max_rank,
       ~.add_user_to_ladder, ~.add_participant_to_ladder, ~.delete_ladder, ~.seed_ladder),
     tournaments/include/tournament_properties.php (TournamentProperties.build_ladder_seed_order),
     tournaments/include/tournament_globals.php, tournaments/ladder/admin.php,
     tournaments/manage_tournament.php, scripts/update_translation_pages.php, NEWS:
   - added admin-interface for ladder-tournament for TD
     - seed ladder with certain seed-order by:
       current-rating, tournament-rating, register-time, random
     - delete ladder with confirmation
     - add single registered tournament-participant to ladder

   * tournaments/include/tournament_participant.php (TournamentParticipant.get_edit_tournament_status),
     tournaments/register.php:
   - restricted editing of user-registration for user and participant-edit for TD:
     deactivated PAIR -> REGISTER|PLAY

   * tournaments/ladder/view.php:
   - added number of registered users for ladder

   * include/connect2mysql.php (ta_begin, ta_end):
   - added for multi-table inserts: transaction-start/end:
     no real DB-TA, but at least can not be broken by user-abort

2010-01-19 juga

   * tournaments/manage_tournament.php:
   - added start-phase to prepare ladder-tournament: view ladder

   * tournaments/include/tournament_ladder.php (class TournamentLadder, ~.fillEntityData, ~.new_from_row),
     tournaments/ladder/view.php,
     scripts/updates/database_changes_1_0_14_to_1_0_15.mysql,
     specs/db/table-Tournaments.txt:
   - added table-field TournamentLadder.RankChanged to indicate when TPs rank
     has changed by TP losing or winning

2010-01-18 juga

   * tournaments/include/tournament.php (Tournament.build_info),
     tournaments/ladder/view.php,
     include/classlib_userconfig.php,
     scripts/updates/database_changes_1_0_14_to_1_0_15.mysql:
   - added viewing of tournament-ladder showing entries from TournamentLadder-table
   - added table-column-set for saving columns of tournament-ladder-view
-----------
-- table-column-set for tournament-ladder-view
ALTER TABLE ConfigPages
   ADD ColumnsTournamentLadderView int NOT NULL DEFAULT -1 ;
-----------

   * tournaments/include/tournament_ladder.php (class TournamentLadder),
     tournaments/ladder/index.php,
     scripts/updates/database_changes_1_0_14_to_1_0_15.mysql,
     specs/db/table-Tournaments.txt:
   - added TournamentLadder-table to keep track of Ladder-type tournament
-----------
-- added table to keep track of Ladder-type tournament
CREATE TABLE TournamentLadder (
   tid int(11) NOT NULL,
   rid int(11) NOT NULL,
   uid int(11) NOT NULL,
   Created datetime NOT NULL default '0000-00-00 00:00:00',
   RankChanged datetime NOT NULL default '0000-00-00 00:00:00',
   Rank smallint unsigned NOT NULL DEFAULT '0',
   BestRank smallint unsigned NOT NULL DEFAULT '0',
   PRIMARY KEY (tid,rid),
   KEY uid (uid),
   KEY Rank (tid,Rank)
) ENGINE=MyISAM;
-----------

   * tournaments/include/tournament_status.php (class TournamentStatus, ~._load_tprops,
       ~.check_conditions_status_REG, ~.check_basic_conditions_status_change,
       ~.check_conditions_status_PAIR),
     scripts/updates/database_changes_1_0_14_to_1_0_15.mysql:
   - added check-conditions for status-change REG->PAIR
     - check min/max participant-count
     - check registration-restrictions for all registered users
   - extracted basic checks on tournament-title/description/director in separate check-method,
     added check for status-changes to REG/PAIR/PLAY
   - added index for TournamentProperties-status
-----------
-- added index for TP-status
ALTER TABLE TournamentParticipant
   DROP INDEX tid ;
ALTER TABLE TournamentParticipant
   ADD INDEX tid_status (tid,Status) ;
-----------

   * tournaments/include/tournament_properties.php (TournamentProperties.checkUserRegistration):
   - check max-count on REGISTERed tournament-participants

   * tournaments/edit_properties.php (parse_edit_form):
   - for editing registration-properties: assure min < max tournament-participants

2010-01-17 juga

   * tournaments/include/tournament_properties.php (class TournamentProperties.checkUserRegistration),
     tournaments/edit_participant.php, tournaments/register.php:
   - differ tournament-user-restrictions into errors and warnings
     - errors always prohibit registration
     - warnings are ignored but shown for existing TournamentParticipants for TD and user
     - warnings must be explicitly ignored for new users by TD
     - warnings will be errors for new users by TD and user
     - warnings are not shown if TP on REGISTER-status
     - show warnings as extra list in registration-restriction section

   * include/db_classes.php (class Entity; class EntityData.get_sql_value,
       ~.build_changed_by, ~.build_sql_insert, ~.build_sql_update),
     scripts/updates/database_changes_1_0_14_to_1_0_15.mysql,
     specs/db/table-Tournaments.txt,
     tournaments/edit_participant.php,
     tournaments/edit_properties.php,
     tournaments/edit_rules.php,
     tournaments/edit_status.php,
     tournaments/edit_tournament.php,
     tournaments/include/tournament.php (class Tournament, ~.fillEntityData, ~.new_from_row),
     tournaments/include/tournament_participant.php (class TournamentParticipant,
       ~.to_string, ~.fillEntityData, ~.new_from_row),
     tournaments/include/tournament_properties.php (class TournamentProperties,
       ~.fillEntityData, ~.new_from_row),
     tournaments/include/tournament_rules.php (class TournamentRules,
       ~.to_string, ~.fillEntityData, ~.new_from_row),
     tournaments/include/tournament_utils.php (TournamentUtils.buildLastchangedBy),
     tournaments/manage_tournament.php,
     tournaments/register.php:
   - added changed-by field for tournament-tables showing users, that last updated data-row
   - adjusted field-date-names 'Last changed date' -> 'Last changed', 'Creation date' -> 'Created'
-----------
-- added changed-by field
ALTER TABLE Tournament
   ADD ChangedBy varchar(54) NOT NULL DEFAULT '' AFTER Lastchanged ;
ALTER TABLE TournamentProperties
   ADD ChangedBy varchar(54) NOT NULL DEFAULT '' AFTER Lastchanged ;
ALTER TABLE TournamentRules
   ADD ChangedBy varchar(54) NOT NULL DEFAULT '' AFTER Lastchanged ;
ALTER TABLE TournamentParticipant
   ADD ChangedBy varchar(54) NOT NULL DEFAULT '' AFTER Lastchanged ;
-----------

2010-01-16 juga

   * tournaments/edit_participant.php (build_new_status_choices, parse_edit_form,
       send_register_notification),
     tournaments/register.php (parse_edit_form),
     specs/db/table-Tournaments.txt:
   - changed tournament participants editor
     - defined new register-status transitions for user and TD for
       tournament-registration, see 'specs/db/table-tournaments.txt'
     - send server-messages when TD changes user-registration-status
     - registration-restrictions disallow user to register also for tournament-admin
     - allow rounds-edit only if tournament has more than 1 round
     - added cancel for editing too
     - show preview for admin- and user-message
     - added more data about user-registration (old/new status/flags)
     - fixed bugs for editing user-registration:
       copy-rating, parse URL-args for show-user, array-merging
     - synchronized TP-editor with user-registration, adjusted GUI

   * tournaments/include/tournament_properties.php (TournamentProperties.checkUserRegistration):
   - added check for rating-use-mode COPY_CUSTOM if there's a valid Dragon-rating
     OR tournament-rating

   * tournaments/include/tournament_utils.php (TournamentUtils.buildErrorListString):
   - enhanced error-list builder with option for <ul>-list and embedding into table-cell

   * include/message_functions.php (message_info_table):
   - bugfix: don't show initial-thread icon if it is no thread

2010-01-11 juga

   * tournaments/include/tournament_utils.php,
     tournaments/edit_director.php,
     tournaments/edit_participant.php,
     tournaments/edit_properties.php,
     tournaments/edit_round.php,
     tournaments/edit_rules.php,
     tournaments/edit_status.php,
     tournaments/edit_tournament.php:
   - replace "<span class=..>str</span>" by span(..)-func-call in gui_functions.php

   * tournaments/include/tournament_factory.php (TournamentFactory.getTournamentTypes),
     tournaments/include/tournament_template.php (class TournamentTemplate),
     tournaments/include/types/dgs_ladder.php (class DgsLadderTournament),
     include/error_codes.php (ErrorCode.init),
     tournaments/wizard.php (build_tourney_type_radio):
   - check if user is allowed to create selected type of tournament
     - added tournament-type title
     - added attribute to configure if tournament-creation requires tournament-admin
     - show admin-required types with disabled radio-buttons
     - scan list with available tournament-types using tournament-factory

   * include/form_functions.php (Form.create_string_func_radiobuttons,
       ~.create_string_func_radiobuttonsx, ~.print_insert_radio_buttonsx,
       ~.parse_input_standard_attributes, ~.get_input_attbs):
   - added RADIOBUTTONSX-elementtype with additional attributes to disable radio-button

   * tournaments/register.php (parse_edit_form, build_participant_notes):
   - enhanced tournament-registration with parse-edit-form (better error-parsing)
     - added checks for custom-rating and start-round
     - ask custom-rating only if needed and allowed by rating-use-mode
     - check if registration allowed for tourney-status, properties and user-rating
     - init participant-status for new registration to APPLY or REGISTER
     - update participant-status to APPLY for edits of custom-rating if different
       to current-user-rating and starting-round
     - copy user-rating to tournament-rating if needed for rating-use-modes
     - show more static info (tourney-info, old/new status, rating-use-mode)
   - code/GUI cleanups-refactorings (clearer structure), bugfixes, adjusted texts

   * specs/db/table-Tournaments.txt:
   - added state-transitions for TournamentParticipant.Status for TD & User

   * tournaments/include/tournament_participant.php (TournamentParticipant.need_rating,
       ~.calc_init_status, ~.getStatusUserInfo, ~.getLinkTextRegistration),
     tournaments/include/tournament_properties.php (TournamentProperties.need_rating_copy,
       ~.allow_rating_edit, ~.checkUserRegistration, ~.getRatingUseModeText),
     tournaments/include/tournament.php (class Tournament),
     tournaments/view_tournament.php:
   - added helper-methods to decide for tournament-registration and participants-edits
   - fixed rating-check for tournament-restrictions for user
   - fixed tournament-participant status-user-info
   - removed allow_register()-function
   - adjusted texts

   * include/gui_functions.php (span):
   - added helper method span() to format string with <span...>

   * include/form_functions.php (Form.create_string_func_br):
   - added LF for 'BR'-form-element

   * register.php:
   - logout if still logged-in

2010-01-09 juga

   * tournaments/include/tournament_status.php (TournamentStatus.check_action_status,
       ~.check_edit_status, ~.check_register_status),
     tournaments/edit_participant.php (parse_edit_form, build_rating_str),
     tournaments/register.php (build_participant_notes),
     skins/dragon/screen.css:
   - checked for bad-tournament (missing tournament-properties)
   - enhanced tournament-participant-edit with parse-edit-form (better error-parsing),
     added checks for custom-rating and start-round
   - check if registration allowed for tourney-status
   - used tournament-specific attribute 'need_rounds' for rounds-stuff
   - show more static info (tourney-info, rating-use-mode)
   - code/GUI cleanups-refactorings, bugfixes, adjusted texts

   * tournaments/edit_properties.php (parse_edit_form), tournaments/edit_rules.php:
   - checked for bad-tournament (missing tournament-properties/rules)
   - bugfix parsing value of checkboxes (user-rated)
   - bugfix showing rating-use-mode

   * tournaments/include/tournament_participant.php (class TournamentParticipant,
       ~.delete_tournament_participant),
     tournaments/include/tournament_properties.php (class TournamentProperties,
       ~.checkUserRegistration, ~._load_user, ~.getRatingUseModeText),
     scripts/updates/database_changes_1_0_14_to_1_0_15.mysql,
     specs/db/table-Tournaments.txt:
   - removed TournamentProperties 'ENTER_FIX'-RatingUseMode
   - used better error-code if registration-edit forbidden
   - code cleanups-refactorings, added TODOs
-----------
-- removed RatingUseMode 'ENTER_FIX'
ALTER TABLE TournamentProperties
   CHANGE RatingUseMode RatingUseMode enum('COPY_CUSTOM','CURR_FIX','COPY_FIX') NOT NULL default 'COPY_CUSTOM' ;
-----------

   * tournaments/include/tournament_template.php (class TournamentTemplate),
     tournaments/include/types/dgs_ladder.php (class DgsLadderTournament),
     tournaments/edit_tournament.php (parse_edit_form):
   - added attributes specific for tourney-types into TournamentTemplate with defaults:
     - 'need_rounds' to express if tournament-type has rounds
     - 'allow_register_tourney_status' containing allowed tournament-status for registrations
   - fixed checks on rounds-stuff

   * tournaments/view_tournament.php (echo_tournament_rules, echo_tournament_registration):
   - emphasized Komi-/Handicap-adjustment for tournament-rules
   - code/GUI cleanups-refactorings, adjusted texts

   * include/gui_functions.php (echo_notes, spacing):
   - bugfix (missed <li>), optimized replacing string-concat with echo, better LF'ing
   - added method for easy building of spacings with formatting

   * include/error_codes.php:
   - added error-codes: invalid_rating, bad_tournament, tournament_register_edit_not_allowed

2010-01-08 juga

   * site_map.php:
   - synced with tournament-pages (T-list, T-manager, T-participants users-lists)
   - increased nest-level max-cols: 5 -> 6

   * tournaments/manage_tournament.php (make_header), skins/dragon/screen.css:
   - added tournament-change-status page
   - hide editing of round-stuff for ladder-type tournament
   - changed title, added/adjusted/compacted texts, added phase-sections

   * tournaments/include/tournament_status.php (class TournamentStatus,
       ~.check_conditions_status_ADM/NEW/REG/PAIR/PLAY/CLOSED/DEL,
       ~.has_error, ~.check_status_change, ~.error_expected_status,
       ~.check_edit_status),
     tournaments/include/tournament_director.php (TournamentDirector.has_tournament_director),
     tournaments/edit_status.php, NEWS:
   - added tournament-change-status page and checks for allowed status-changes
     - Tournament-admin is always allowed to change tournament-status
     - check for allowed status-transitions: NEW > REG > PAIR > PLAY > CLOSED
     - for REG-status check for existing title, description and tournament-director

   * tournaments/edit_tournament.php (parse_edit_form):
   - enhanced tournament-edit with parse-edit-form (show edits, better error-parsing)
   - restrict editing of owner and scope to tournament-admin
   - removed editing of tournament-status
   - removed creation of tournament, which is done by tournament-wizard alone
   - hide editing of round-stuff for ladder-type tournament
   - show tournament wizard-type
   - removed PRIVATE-scope for later
   - removed tournament-status notes
   - code cleanups-refactorings

   * tournaments/include/tournament.php (Tournament.getStatusText),
     tournaments/list_tournaments.php, NEWS:
   - allow search for Admin-type tournaments
   - show Admin-type tournaments only if selected in filter
   - linked ID-button to tournament-manager for directoring-tournaments-list-view

   * tournaments/include/tournament.php (Tournament.setStatus, ~.build_info,
       ~.build_role_info, ~.getScopeText, ~.getTypeText, ~.getWizardTypeText,
       ~.getStatusText, ~.get_edit_tournament_status),
     tournaments/include/tournament_director.php (TournamentDirector.get_edit_tournament_status),
     tournaments/include/tournament_participant.php (TournamentParticipant.get_edit_tournament_status),
     tournaments/include/tournament_properties.php (TournamentProperties.checkUserRegistration,
       ~.getRatingUseModeText, ~.get_edit_tournament_status),
     tournaments/include/tournament_round.php (TournamentRound.get_edit_tournament_status),
     tournaments/include/tournament_rules.php (TournamentRules.get_edit_tournament_status),
     tournaments/include/tournament_globals.php,
     tournaments/edit_director.php (parse_edit_form),
     tournaments/edit_participant.php,
     tournaments/edit_properties.php (parse_edit_form, build_properties_notes),
     tournaments/edit_round.php (parse_edit_form, build_round_notes),
     tournaments/edit_rules.php (parse_edit_form),
     tournaments/edit_tournament.php (parse_edit_form),
     tournaments/register.php (build_participant_notes),
     scripts/updates/database_changes_1_0_14_to_1_0_15.mysql, NEWS:
   - restrict edit-pages to specific tournament-status-list for editing of
     - tournament:              NEW
     - tournament-director:     NEW, REG, PAIR, PLAY, CLOSED
     - tournament-participants: REG, PAIR, PLAY
     - tournament-properties:   NEW
     - tournament-round:        NEW, PAIR
     - tournament-rules:        NEW
   - added tournament delete-status: TOURNEY_STATUS_DELETE
   - refactored build_notes() from class into edit-page
   - removed PRIVATE-scope for later
   - cleanup parsing and checking of edit-form
   - code cleanups-refactorings, added/changed/simplified texts
-----------
-- added tournament delete-status
ALTER TABLE Tournament
   CHANGE Status Status enum('ADM','NEW','REG','PAIR','PLAY','CLOSED','DEL') NOT NULL default 'NEW' ;
-----------

   * include/gui_functions.php (echo_notes), include/globals.php,
     include/table_columns.php:
   - moved MINI|MED|SMALL_SPACING from gui_functions.php into globals.php
   - enhanced echo_notes() with sub-lists
   - added SEP_SPACING for tournaments

   * tournaments/edit_participant.php, list_contacts.php, opponents.php,
     users.php, NEWS:
   - added tournament-invitations for users, opponents and contacts page

   * include/std_functions.php (make_menu):
   - bugfix: handle with_accesskeys-arg not to create access-keys to links

   * include/table_columns.php (Table.add_tablehead):
   - bugfix: error if table-id-number used again

   * tournaments/edit_director.php, tournaments/edit_properties.php,
     tournaments/manage_tournament.php:
   - changed titles

2010-01-07 juga

   * tournaments/edit_director.php, tournaments/edit_participant.php,
     tournaments/edit_properties.php, tournaments/edit_round.php,
     tournaments/edit_rules.php, tournaments/list_participants.php,
     tournaments/list_tournaments.php:
   - minor GUI-layout/cleanup/TODOs

   * tournaments/include/tournament_rules.php (TournamentRules.convertFormTimeSettings,
       ~.convertEditForm_to_TournamentRules),
     tournaments/edit_rules.php (getBool):
   - enhanced rules-edit with parse-edit-form (show edits, better error-parsing)
   - removed RuleID (Tournament <-> Rules is 1:1 relation)

   * include/error_codes.php (ErrorCode.init):
   - added missing error-code: handicap_range

   * tournaments/include/tournament_director.php (TournamentDirector.load_user_row),
     tournaments/include/tournament_utils.php (TournamentUtils.buildErrorListString),
     tournaments/edit_director.php (parse_edit_form),
     tournaments/edit_properties.php (parse_edit_form):
   - enhanced director-edit with parse-edit-form (show edits, better error-parsing),
   - replaced deleting TD with TournamentDirector::delete_tournament_director()
   - moved loading TD-user into TournamentDirector::load_user_row()
   - moved formatting of error-list into TournamentUtils::buildErrorListString()

   * links.php:
   - added link to another go-introduction mentioned by DGS-user

2010-01-06 juga

   * tournaments/edit_director.php, tournaments/edit_participant.php,
     tournaments/edit_properties.php, tournaments/edit_round.php,
     tournaments/edit_rules.php, tournaments/edit_tournament.php,
     tournaments/list_directors.php, tournaments/manage_tournament.php,
     tournaments/register.php, tournaments/view_tournament.php,
     forum/admin.php, forum/index.php, scripts/index.php, admin.php,
     add_to_waitingroom.php, admin_faq.php, docs.php, donation.php,
     donation_success.php, gameinfo.php, goban_editor.php, introduction.php,
     links.php, news.php, people.php, policy.php, show_games.php, site_map.php,
     snapshot.php, status.php, translate.php, userinfo.php:
   - since PHP5 global-vars need explicit "global"-directive: globalize $ThePage

   * tournaments/include/tournament.php (class Tournament, ~.setWizardType, ~.insert,
       ~.update, ~.delete, ~.fillEntityData, ~.build_query_sql, ~.allow_create),
     tournaments/include/tournament_factory.php (class TournamentFactory.getTournament),
     tournaments/include/tournament_globals.php,
     tournaments/include/tournament_template.php (class TournamentTemplate, ~.to_string,
       ~.create_error, ~.createTournament),
     tournaments/include/tournament_utils.php (TournamentUtils.getWizardTournamentType),
     tournaments/include/types/dgs_ladder.php (class DgsLadderTournament, ~.createTournament),
     tournaments/include/types/index.php, tournaments/list_tournaments.php,
     tournaments/wizard.php, include/error_codes.php (ErrorCodes.init),
     scripts/updates/database_changes_1_0_14_to_1_0_15.mysql,
     scripts/update_translation_pages.php, NEWS:
   - added tournament-wizard to create new tournament
     - added DRAGON ladder tournament without restrictions
     - added Tournament.WizardType, influencing existing Tournament.Type
     - allowed potentially all users to create new tournaments with wizard
     - added error-codes: invalid_method, tournament_create_error
     - refactored/added insert/update/delete using convenience-methods
       of Entity/EntityData-classes,
     - moved tournament constants into tournament_globals.php
     - added directory to scan for translations: tournaments/include/types/
-----------
-- create official "DGS-ladder" for tournament-wizard
ALTER TABLE Tournament
   ADD WizardType tinyint NOT NULL AFTER Type,
   CHANGE Type Type enum('LADDER','ROUNDROBIN') NOT NULL ;
-----------

   * tournaments/include/tournament_director.php (class TournamentDirector,
       ~.isTournamentDirector, ~.delete_tournament_director),
     tournaments/include/tournament_participant.php (class TournamentParticipant,
       ~.delete_tournament_participant),
     tournaments/include/tournament_properties.php (class TournamentProperties,
       ~.isTournamentProperties, ~.delete_tournament_properties),
     tournaments/include/tournament_round.php (class TournamentRound,
       ~.isTournamentRound, ~.delete_tournament_round),
     tournaments/include/tournament_rules.php (class TournamentRules,
       ~.delete_tournament_rules):
   - refactored class using Entity/EntityData-classes to access db-table,
     - adjusted/added methods: persist, insert, update, delete,
       checkData, fillEntityData, build_query_sql, to_string

   * include/db_classes.php (EntityData.get_pkey_string, ~.build_sql_insert,
       ~.build_sql_update, ~.build_sql_delete, ~.insert, ~.update, ~.delete),
     scripts/tests/EntityDataTest.php:
   - use FTYPE_INT also for float-values
   - don't include auto-increment key for inserting entity-data
   - change default-LIMIT for update + delete: none(=0) -> 1
   - added convenience-functions with db-writings for operations

   * tournaments/list_participants.php:
   - added tournament-manager-link to bottom-menu-links

   * tournaments/list_participants.php, tournaments/list_tournaments.php,
     opponents.php:
   - since PHP5 global-vars need explicit "global"-directive,
     so use consts or statics if possible, otherwise declare as global

   * phorum/list.php, phorum/read.php:
   - removed unnecessary change-dir

   * scripts/tests/AllTests.php, scripts/tests/UnitTestHelper.php,
     scripts/tests/run_tests.php:
   - added copyright

   * tournaments/include/tournament.php (Tournament.insert, ~.update, ~.fillEntityData, ~.build_query_sql):
   - replaced db-stuff using Entity/EntityData-classes

   * include/db_classes.php (EntityData.build_sql_update, ~.build_sql_delete),
     scripts/tests/EntityDataTest.php:
   - added LIMIT-clause for update & insert

   * include/filter.php:
   - moved static var back as global non-static, because PHP-parser treats
     string-concatenation as non-constant forbidding static-keyword

   * include/db_classes.php (class Entity; class EntityData),
     scripts/tests/EntityDataTest.php, scripts/tests/EntityTest.php,
     scripts/tests/UnitTestHelper.php, scripts/tests/AllTests.php:
   - added classes Entity and EntityData for db-access-abstractions with unit-tests

   * include/error_functions.php (class DgsErrors, ~.add_error):
   - renamed class Errors -> DgsErrors (clashed with PHP-unit)
   - added ERROR_MODE_TEST for PHP-unit-tests,
   - allow for separte collecting and printing of errors

   * forum/forum_functions.php, forum/post.php, include/classlib_game.php,
     include/classlib_goban.php, include/classlib_upload.php, include/classlib_userconfig.php,
     include/contacts.php, include/coords.php, include/countries.php, include/error_codes.php,
     include/error_functions.php, include/filter.php, include/filter_functions.php,
     include/filterlib_country.php, include/form_functions.php, include/game_functions.php,
     include/goban_handler_gfx.php, include/message_functions.php, include/quick_common.php,
     include/rating.php, include/std_classes.php, include/std_functions.php,
     include/tokenizer.php, scripts/convert_from_old_forum.php, scripts/convert_posindex.php,
     tournaments/include/tournament.php, tournaments/include/tournament_participant.php,
     tournaments/include/tournament_properties.php, tournaments/include/tournament_round.php,
     tournaments/include/tournament_rules.php:
   - since PHP5 global-vars need explicit "global"-directive,
     so use consts or statics if possible, otherwise declare as global

   * tournaments/include/index.php:
   - index-page redirecting to tournament-list page

2010-01-05 juga

   * INSTALL:
   - note about ft_min_word_len mysql-system-variable

2010-01-04 juga

   * tournaments/list_tournaments.php, status.php, NEWS:
   - moved showing of tournament-applications from status-page
     to list-tournaments page
   - show registration-status with link to registration-page on
     participating tournaments for specific user
   - replaced external-form by URL-arguments + added bottom-links for:
     - participating user: uid-arg
     - directing tournaments: tdir-arg

   * include/filter.php (SearchFilter.get_filter_value):
   - added wrapper-function to get value of specific filter in SearchFilter-object

   * include/error_functions.php (err_log), admin_show_errorlog.php,
     scripts/updates/database_changes_1_0_14_to_1_0_15.mysql, NEWS:
   - enhanced Errorlog with uid and page-request for causing error
-----------
-- enhanced Errorlog with uid and page-request for causing error
ALTER TABLE Errorlog
   ADD uid int(11) NOT NULL DEFAULT '0' AFTER ID,
   ADD Request varchar(128) NOT NULL DEFAULT '' AFTER Message ;
-----------

   * tournaments/list_participants.php, tournaments/list_tournaments.php,
     list_messages.php, show_games.php, waiting_room.php:
   - bugfix: select FOUND_ROWS() right after query,
     intermediate start_page() executed another db-request losing found-rows-data

   * add_to_waitingroom.php, admin.php, admin_admins.php, admin_do_translators.php,
     admin_faq.php, admin_password.php, admin_show_adminlog.php, admin_show_errorlog.php,
     admin_show_faqlog.php, admin_show_users.php, admin_translators.php, admin_users.php,
     change_password.php, change_profile.php, clock_tick.php, confirm.php, daily_cron.php,
     features/lib_votes.php, forum/admin.php, forum/admin_show_forumlog.php,
     forum/class_forum_read.php, forum/forum_functions.php, forum/list.php,
     forum/old_links_redirect.php, forum/post.php, forum/read.php, game.php,
     game_comments.php, gameinfo.php, goban_editor.php, halfhourly_cron.php,
     include/connect2mysql.php, include/error_functions.php, include/filter.php,
     include/filterlib_mysqlmatch.php, include/form_functions.php, include/make_game.php,
     include/make_translationfiles.php, include/rating.php, include/std_functions.php,
     join_waitingroom_game.php, login.php, message.php, phorum/read.php, quick_play.php,
     quick_status.php, ratinggraph.php, scripts/check_block_ip.php,
     scripts/convert_from_old_forum.php, scripts/convert_posindex.php,
     scripts/data_export.php, scripts/data_report.php, scripts/fix_games_timeleft.php,
     scripts/forum_consistency.php, scripts/game_consistency.php,
     scripts/generate_translation_texts.php, scripts/mailtest.php,
     scripts/make_handicap_pattern.php, scripts/message_consistency.php,
     scripts/player_consistency.php, scripts/recalculate_ratings2.php,
     scripts/start_frozen_clocks.php, scripts/translation_consistency.php,
     scripts/update_translation_pages.php, send_message.php, send_new_password.php,
     sgf.php, show_games.php, translate.php, update_translation.php, userinfo.php:
   - added more debug-info on error()-calls, simplified some admin-errors

   * scripts/game_consistency.php, clock_tick.php:
   - bugfix: avoid sharing of Clock.ID=204 in query searching timed-out-games
   - query-optimize for new timed-out-handling on Games.Status
   - added TODO for potential bug when searching for timed-out games

   * include/table_columns.php (Table.add_tablehead, ~._parse_sort_extension,
       ~.current_order_string):
   - fixed FIXME: added function to check and parse sort-extension

   * include/classlib_profile.php (SearchProfile.set_sysmessage),
     include/classlib_userconfig.php,
     include/error_codes.php (ErrorCode.init),
     include/quick_common.php,
     include/std_functions.php (start_html, nsq_addslashes, is_on_observe_list),
     include/time_functions.php (is_weekend_clock_stopped),
     game.php, confirm.php:
   - minor cleanup of some TODOs and FIXMEs

2010-01-03 juga

   * forum/class_forum_options.php (ForumOptions.build_db_options_exclude),
     forum/class_forum_read.php (ForumRead.has_new_posts_in_all_forums):
   - bugfix: exclude non-visible forums

   * forum/post.php (post_message, approve_post, hide_post_update_trigger, show_post),
     forum/forum_functions.php (class ForumPost, ~.to_string, ~.build_query_sql, ~.new_from_row),
     include/register_functions.php (UserRegistration.register_blocked_user),
     scripts/updates/database_changes_1_0_14_to_1_0_15.mysql, specs/forums.txt:
   - bugfix: handling forum and global-forum NEW-flag-state always resetting
     respective Updated-data for moderate-actions approve/reject/show/hide
   - removed unused db-table-field: Posts.Updated (after revised NEW-flag handling)
   - removed unused class-attribute: ForumPost.last_updated
   - query-optimization on post-moderation checking Posts.Approved on old-value
-----------
-- [unused] remove unused field
ALTER TABLE Posts
   DROP COLUMN Updated ;
-----------

   * forum/list.php:
   - bugfix: don't show "New topic"-link in top-bar for read-only forums

2010-01-01 juga

   * scripts/generate_translation_texts.php, scripts/README.translations,
     tournaments/include/tournament_properties.php (TournamentProperties.checkUserRegistration),
     tournaments/include/tournament_participant.php (TournamentParticipant.build_notes),
     features/lib_votes.php (Feature.build_feature_notes),
     include/error_codes.php (ErrorCode.init),
     policy.php:
   - bugfix: leading and trailing spaces are not allowed within T_(..) translation-texts
-----------
-- bugfix: leading and trailing spaces are not allowed within T_(..) translation-texts
UPDATE TranslationTexts
   SET Text=TRIM(Text) WHERE LENGTH(Text) != LENGTH(TRIM(Text)) ;
-- run translation-scripts as described in 'scripts/README.translations'
-----------

   * scripts/index.php:
   - open admin-scripts in new window, because they have no DGS-bars and DGS-menus

   * forum/read.php:
   - do not mark posts as read when in moderation-mode or toggling moderator-mode

2009-12-31 juga

   * send_new_password.php:
   - more hints who wants to change what for whom in error-message

   * include/error_codes.php (ErrorCode.init), forgot.php:
   - give more hints to reset password in case no email is set in account

   * do_registration_blocked.php, forgot.php, register.php:
   - added/changed page title

   * include/std_functions.php (start_page, echo_dragon_top_bar, make_dragon_main_menu,
       make_dragon_main_menu_logged_out, make_dragon_tools, echo_menu_tools),
     site_map.php (echo_item, item, itemL),
     statistics.php, NEWS:
   - show special vertical main-menu for users not logged in and new users
   - show also DGS top-bar if $printable set though without form-elements
   - show basic supporting pages (FAQ/Docs/site-map and statistics) even if not logged in

   * include/register_functions.php (class UserRegistration, ~.check_registration_normal,
       ~.check_email, ~.register_user),
     register.php, NEWS:
   - ask for optional email to register normal user

   * forgot.php, register.php:
   - added bottom-link to login-page

   * include/std_functions.php (is_logged_in),
     scripts/updates/database_changes_1_0_14_to_1_0_15.mysql,
     specs/db/dragon-ddl.sql:
   - increase Players.Browser-field length: 100->150
-----------
-- increase Browser-field length: 100->150
ALTER TABLE Players
   CHANGE Browser Browser varchar(150) NOT NULL DEFAULT '';
-----------

   * admin.php:
   - bugfix: closed db-connection too early

   * features/lib_votes.php (Feature.set_subject), features/edit_feature.php:
   - cut off feature-subject to 255 chars length
   - changed subject-input to textarea

   * include/error_codes.php (ErrorCode.echo_error_text),
     include/register_functions.php (class UserRegistration),
     include/std_functions.php (verify_email),
     do_registration_blocked.php, error.php (handle_error), NEWS:
   - refactored blocked-registration-code from 'error.php'
     into 'do_registration_blocked.php'
     - preserve entered input-field-data for blocked registration on input-
       check-errors, behaviour was that all entered data was lost on input-error
     - show all input-check-erros in error-list instead of only one error
       with error()-method destroying all entered input-data
   - moved building error-log-id-text into ErrorCode-class
   - trimmed some registration form-values (name, email, comment)
   - bugfix: fix success-result for email-verify

   * include/utilities.php (format_array), register.php:
   - extracted utilities-method to format array to 'include/utilities.php'

2009-12-29 juga

   * include/register_functions.php (class UserRegistration, ~.check_registration_normal,
       ~.check_registration_blocked, ~.check_userid, ~.check_email, ~.check_name,
       ~.check_password, ~.check_policy, ~.check_existing_user, ~._error,
       ~.register_user, ~.register_blocked_user),
     register.php, do_registration.php, do_registration_blocked.php, NEWS:
   - refactored registration-code with checks and user-db-registration for blocked
     and normal user into UserRegistration-class in 'include/register_functions.php'
     - preserve entered input-field-data for normal registration on input-check-errors,
       behaviour was that all entered data was lost on input-error
     - show all input-check-erros in error-list instead of only one error
       with error()-method destroying all entered input-data
     - refactored all functionality of 'do_registration.php' into 'register.php'

   * include/form_functions.php (class Form, ~.create_string_func_password,
       ~.print_insert_password_input),
     edit_password.php, index.php:
   - preserve former form-value for PASSWORD-type-field

   * include/error_codes.php (class ErrorCode, ~.echo_error_text, ~.get_error_text,
       ~.is_shown_error_log_id, ~.is_sensitive, ~.init),
     error.php (handle_error):
   - refactored error-codes into ErrorCode-class to prepare for registration-page
     without losing input-fields on input-check-errors using error()-call

   * include/std_functions.php (start_page, verify_email):
   - bugfix: load global-forum NEW-flag only if user logged in
   - verify_email: added die_on_error-argument to email-verify method

   * include/classlib_game.php (class GameScore.getModeText),
     include/contacts.php (class Contact.getContactUserFlags, ~.getContactSystemFlags),
     include/countries.php (getCountryText),
     include/filter.php (class FilterRelativeDate.getTimeUnitText),
     include/languages.php (getLanguageText),
     tournaments/include/tournament.php (Tournament.getScopeText, ~.getTypeText, ~.getStatusText),
     tournaments/include/tournament_participant.php (TournamentParticipant.getStatusText, ~.getFlagsText),
     tournaments/include/tournament_properties.php (TournamentProperties.getRatingUseModeText),
     tournaments/include/tournament_round.php (TournamentRound.getStatusText),
     tournaments/include/tournament_rules.php (TournamentRules.getFlagsText, ~.getHandicaptypeText):
   - bugfix: import global-arrays into method-scope for lazy-init methods,
     behaviour without global was to re-initialize array with every call

2009-12-27 juga

   * forum/class_forum_read.php (ForumRead.mark_thread_read, ~.mark_forum_read,
       ~.load_global_updated, ~.trigger_recalc_global_post_update,
       ~.trigger_recalc_global_read_update, ~.trigger_recalc_forum_read_update),
     forum/post.php (post_message, approve_post, hide_post_update_trigger, show_post),
     scripts/forum_consistency.php (update_forum_global_post_update),
     specs/forums.txt:
   - fixed forum- and global-forum updated-date: must differ between trigger
     on changed-post and trigger for changed read-state

   * include/std_functions.php (start_page, load_global_forum_new),
     forum/index.php, NEWS:
   - show global-forum NEW-flag-state in main-menu as '(*)'
     linked to system-bookmark S1 (showing recent forum posts)

   * forum/forum_functions.php (class ForumOptions; class ForumRead;
       ForumPost.is_post_read; ForumThread.load_posts),
     forum/class_forum_options.php (class ForumOptions),
     forum/class_forum_read.php (class ForumRead, ~.is_post_read):
   - splitted forum_functions.php: moved class ForumOptions and class ForumRead
     to separate include-file 'class_forum_read.php' in preparation to be able
     to import them for main-menu global-forum NEW-flagging
   - refactored method ForumRead.is_post_read() into ForumPost.is_post_read()

   * forum/forum_functions.php (ForumOptions.is_executive_admin, ~.build_options_text),
     forum/index.php, forum/list.php, forum/read.php, skins/dragon/screen.css, NEWS:
   - show forum-options near forum-title on thread-list and thread-posts-view

   * skins/dragon/screen.css:
   - show forum NEW-flag in bold-font

   * specs/db/dragon-ddl.sql:
   - sync with current DGS db-schema

   * include/std_functions.php (start_page, count_forum_new):
   - removed unused field for (first-trial) aggregated global-forum NEW-flag
   - added TODOs for global-forum 'new'-flag

   * forum/forum_functions.php (class ForumOptions, ~.build_db_options_exclude;
       class DisplayForum, ~.draw_post, ~.get_new_string, ~.make_link_array;
       class Forum, ~.build_query_sql, ~.has_new_posts_in_threads,
         ~.load_forum_list, ~.load_threads, ~.new_from_row;
       class ForumThread, ~.load_posts, ~.thread_post;
       class ForumPost, ~.is_author;
       class ForumRead, ~.build_query_sql, ~.has_new_posts_in_all_forums,
         ~.has_new_posts_in_forums, ~.has_newer_read_date, ~.is_post_read,
         ~.load_forum_reads, ~.load_global_new, ~.load_global_updated,
         ~.mark_forum_read, ~.mark_thread_read, ~.replace_row_forumread,
         ~.trigger_recalc_forum, ~.trigger_recalc_global,
         ~.is_read_post, ~.load_reads_post, ~.mark_read, ~.recalc_forum_reads,
         ~.recalc_thread_reads, ~.set_read, ~.trigger_recalc_thread),
     forum/post.php (post_message, approve_post, hide_post_update_trigger,
       show_post, recalc_forum_counts),
     include/connect2mysql.php (mysql_exists_row),
     specs/forums.txt, specs/db/table-Forum.txt,
     scripts/updates/database_changes_1_0_14_to_1_0_15.mysql,
     scripts/data_export.php, scripts/forum_consistency.php,
     forum/index.php, forum/list.php, forum/read.php (revision_history),
     skins/dragon/screen.css, daily_cron.php, NEWS:
   - refactored and optimized forum 'NEW'-flag management by migrating from
     ForumRead-table to now enhanced former Forumreads-table
     - replaced (very) inefficient NEW-post-counter with simple 'NEW'-flag
       indicating that there are new posts but not how many
     - adjusted forum-specs "specs/forum.txt"
     - removed difference of older and more recent NEW posts
     - fixed viewing of "missing" new posts while replying
     - removed 'Mark all read' from thread-posts view
     - replaced/removed ForumThread-method: thread_post
     - replaced/removed ForumRead-methods: is_read_post, load_reads_post, mark_read,
       recalc_forum_reads, recalc_thread_reads, set_read, trigger_recalc_thread
     - forum/post.php: removed method: recalc_forum_counts
   - added 'Mark all read' on forums thread-list
   - added Forums-link for refresh forums
-----------
-- check Forumreads-table with thread=0 (must be 0 entries)
SELECT * FROM Forumreads WHERE Thread_ID=0 ;

-- changed forum to backport to enhanced Forumreads-table, optimizing index
ALTER TABLE Forumreads
   DROP PRIMARY KEY ;
ALTER TABLE Forumreads
   ADD Forum_ID smallint NOT NULL DEFAULT '0' AFTER User_ID ;
ALTER TABLE Forumreads
   ADD PRIMARY KEY (Thread_ID,User_ID,Forum_ID) ;
UPDATE Forumreads AS FR INNER JOIN Posts AS P ON P.ID=FR.Thread_ID
   SET FR.Forum_ID=P.Forum_ID WHERE FR.Thread_ID>0 AND FR.Forum_ID=0 ;
ANALYZE TABLE Forumreads ;

-- check Forumreads-table with forum=0 (must be 0 entries)
SELECT * FROM Forumreads WHERE Forum_ID=0 ;

-- [not-null] cleanup Forumreads.Time datetime default NULL -> no default -> NOT NULL
ALTER TABLE Forumreads
   CHANGE Time Time datetime NOT NULL ;

-- NEW-flag for forum-list
ALTER TABLE Forumreads
   ADD HasNew tinyint NOT NULL DEFAULT '0' ;

-- discard unused table after backport-migration to former Forumreads-table
DROP TABLE ForumRead ;

-- removed unused field for (first-trial) aggregated global-forum NEW-flag
ALTER TABLE Players
   DROP COLUMN CountForumNew ;
-----------

   * userinfo.php:
   - added link to starting/editing vacation on "Vacation days left"
     after hiding that link on status-page if not on vacation

   * forum/old_links_redirect.php, scripts/change_files.pl:
   - added DGS-copyright notice

   * bookmark.php:
   - changed system-bookmark S1 showing recent forum posts during the last
     from 7 days -> 4 weeks

   * all files:
   - adjusted Copyright on every file to: 2001-2010

   * scripts/change_copyright.pl:
   - added script to automatically change copyright in DGS-files

2009-12-14 juga

   * include/classlib_userquota.php (UserQuota.increase_update_feature_points):
   - bugfix: fix SQL-statement for FEATURE_POINTS_INC_VALUE>1

   * edit_contact.php, NEWS:
   - bugfix: removed double HTML-escaping for editing contact user and note-text

2009-12-13 juga

   * NEWS:
   - sync with NEWS of last stable-release (bugfixes)

   * halfhourly_cron.php, NEWS,
     scripts/updates/database_changes_1_0_14_to_1_0_15.mysql:
   - bugfixes on vacation-handling:
     - fixed wrong clock setting after vacation is finished for games with clock
       not running on weekends
     - splitted vacation-days changes for VacationDays and OnVacation in two
       separate queries avoiding unnecessary updates;
       also removed restriction on Players.Lastaccess as VacationDays must not
       be limited by last-access
     - avoiding long-queries on vacation-fields: replaced restriction
       on Players.Lastaccess by using added indexes. Players.Lastaccess and
       vacation-handling are two separate concerns. Not using it as restriction
       makes it easier to handle, because it would be an unexpected connection;
       e.g. quick-play-suite does NOT change last-access field,
       but allows to play without logging in changing last-access.
-----------
-- add index for vacation-cron job to increase/decrase vacation-days
ALTER TABLE Players
   ADD INDEX OnVacation (OnVacation),
   ADD INDEX VacationDays (VacationDays) ;
-----------

   * include/contacts.php (Contact.getContactSystemFlags),
     include/message_functions.php (echo_game_restrictions, game_info_table),
     waiting_room.php, NEWS:
   - added contact-option to "hide waiting-room games" for contact-user
     - for example to be able to hide unsolicited game-offers asking for payment,
       see forum-discussion:
       http://www.dragongoserver.net/forum/read.php?forum=8&thread=26273
     - bind hidden-games to only-suitable selection
     - show "[Hidden]" for hidden game-offers in restriction-column
       if showing all games

   * include/std_functions.php (send_email, is_logged_in),
     halfhourly_cron.php, scripts/mailtest.php, send_new_password.php:
   - bugfix: skip 2nd word-wrapping in send_email()-function for sending email
     with game-links and messages

2009-12-06 juga

   * include/time_functions.php (time_remaining_value):
   - bugfix on calculating timeout-date for status-next-game-order handling partly
     byo-yomi-reset after add-time

   * NEWS:
   - moved all "Bug fixes"-sections after "Minor changes"-sections

   * forum/forum_functions.php (DisplayForum.set_forum_options,
       ~.forum_message_box, ~.draw_post; Forum.allow_posting, ~.is_moderated),
     forum/admin.php, forum/index.php, forum/post.php, forum/read.php,
     scripts/updates/other_changes_1_0_14_to_1_0_15.txt, error.php, NEWS:
   - added forum-option READ-ONLY to restrict post-writing to forum-moderators
     and developer-role-users

   * game.php (draw_add_time, draw_board_info):
   - for adding time:
     - show byo-yomi-reset only if reset would change some byo-yomi-time data
     - show changed time-added-text in board-info if only byo-yomi restarted
     - allow "0 days" only for JAP/CAN-time for byo-yomi-reset without adding days

   * confirm.php:
   - time-added detection for sys-message also if only byo-yomi resetted

   * include/game_functions.php (GameAddTime.add_time, ~.add_time_opponent),
     scripts/tests/GameAddTimeTest.php:
   - reset current byo-yomi period for JAP|CAN-time if in byo-yomi
   - moved TimeOutDate-handling into add_time_opponent() because of db-loading
   - bugfix: reset byo-yomi time-data to first period if no main-time
   - bugfix: setting TimeOutDate for correct user (uid is the player GIVING time)
   - bugfix: no aggregation of main- with byo-time, byo-yomi-resetting
   - return non-0 result for add_time()/add_time_opponent() if only byo-yomi
     had been resetted
   - added unit-test for GameAddTime-class

   * include/game_functions.php (adjust_handicap),
     scripts/tests/Game_SettingsHelperTest.php:
   - added unit-test + fix for adjust_komi() and adjust_handicap()

   * include/time_functions.php (TimeFormat.echo_time_remaining),
     scripts/tests/TimeFormatTest.php, code_examples/check_times.php,
     game.php, quick_status.php, show_games.php, status.php:
   - removed long-text-form for echo_time_remaining(), because text would have
     been too long with extra-info and building of text not really thrilling
     for non-english languages with other grammar

   * quick_status.php, NEWS:
   - sync games-order with status-page (by Lastchange ASC)

   * include/game_functions.php (GameAddTime.add_time, ~.allow_add_time_opponent,
       ~.add_time_opponent),
     scripts/tests/AllTests.php,
     scripts/tests/GameAddTimeTest.php,
     scripts/tests/Game_SettingsHelperTest.php,
     confirm.php, game.php:
   - refactored add_time-methods into class GameAddTime for unit-test-support

   * include/time_functions.php (TimeFormat.echo_day, ~.echo_hour, ~.echo_time,
       ~._echo_time, ~.echo_byotype, ~.echo_onvacation, ~.echo_time_limit,
       ~.echo_time_remaining, ~._replace_space),
     specs/time.txt,
     include/gui_functions.php (echo_off_time),
     include/message_functions.php (game_info_table),
     scripts/tests/AllTests.php, scripts/tests/TimeFormatTest.php,
     tournaments/view_tournament.php, code_examples/check_times.php,
     edit_vacation.php, gameinfo.php, game.php (draw_game_info, draw_board_info),
     quick_status.php, sgf.php, show_games.php, status.php, userinfo.php,
     waiting_room.php, NEWS:
   - refactored time-formatting methods into class TimeFormat with flexible
     formatting-options
     - enhanced time-formatting with extra-time-info for remaining-time in
       abbreviated and complete-form
     - use space as default for time-output (instead of HTML-non-breakable-space),
       fixed replacing of spaces to include all spaces
     - added TIMEFMT_ZERO-option to allow zero-value for no-time-left or zero-time
       for display-fix '---' -> '0h'
     - time-formats are described in specs/time.txt and unit-tested
       with scripts/tests/TimeFormatTest.php
   - game-page: enhanced players remaining-time with extra-time info,
     switched to short-text-form
   - gameinfo: show included remaining extra-time-settings for players
   - quick-status: enhanced remaining-time with extra-time info
   - status/show-games: enhanced players remaining-time with abbreviated
     extra-time info

   * include/globals.php, include/std_functions.php:
   - moved constants in: NO_VALUE, UNKNOWN_VALUE

2009-11-08 juga

   * include/classlib_game.php (NextGameOrder.make_timeout_date),
     include/make_game.php (create_game):
   - bugfix: set Games.TimeOutDate on creating game for joining waiting-room
     and accepting invitation

   * confirm.php:
   - bugfix: execute double-game-update query on delete-game only
     if it IS a double-game

   * forum/forum_functions.php (make_link_array),
     forum/list.php, forum/read.php, NEWS:
   - added "Refresh"-link in forum link-bars to init-reload thread-list
     and thread-posts-view

   * scripts/.cvsignore:
   - ignore .htaccess-file to protect folder

   * daily_cron.php:
   - bugfix: bad SQL-query on ForumRead-cleanup

   * include/faq_functions.php (faq_item_html), skins/dragon/screen.css, faq.php:
   - fixed missing separator between FAQ-sections on searching
   - left-align search-form

   * error.php:
   - adjusted text for forgotten-password with no_email,
     added in text what's needed (user-id + email) to get password-reset via admin

2009-11-07 juga

   * features/lib_votes.php (Feature.is_final_status, ~.fix_user_quota_feature_points),
     features/edit_feature.php:
   - forbid changing LIVE|NACK-status, added warning for admins about that
   - return all taken feature-points when feature goes LIVE (same as NACK = rejected),
     cap UserQuota.FeaturePoints to maximum of FEATURE_POINTS_MAX_VALUE

   * include/classlib_userquota.php:
   - limit feature-points to maximum: 100 -> 50
   - increased time-interval before increase feature-points: 10 -> 20 days

   * include/time_functions.php (time_remaining), NEWS:
   - bugfix not capping main-time on moving for Fischer-time after adding time
     exceeding starting-main-time;
     avoiding complicated checks for add-time feature

   * specs/db/table-Games.txt:
   - added description for Games-table

   * include/classlib_game.php (NextGameOrder.make_timeout_date),
     include/game_functions.php (add_time_opponent),
     include/time_functions.php (time_left_ticksdate),
     scripts/updates/database_changes_1_0_14_to_1_0_15.mysql,
     specs/db/dragon-data.sql, specs/db/table-Players.txt,
     scripts/fix_games_timeleft.php, scripts/index.php,
     clock_tick.php, confirm.php (jump_to_next_game), status.php, NEWS:
   - added status-games-order on remaining-time
     - time-left calculus used from
       http://www.dragongoserver.net/forum/read.php?forum=4&thread=5728#5743
     - use new clock with Clock.ID=204 to serve as time-anchor for time-left calculus
     - added script to set Games.TimeOutDate
-----------
-- status-games ordering by remaining-time
ALTER TABLE Games
   ADD TimeOutDate int NOT NULL DEFAULT '0' AFTER ClockUsed ;
ALTER TABLE Players
   CHANGE NextGameOrder NextGameOrder enum('LASTMOVED','MOVES','PRIO','TIMELEFT') NOT NULL DEFAULT 'LASTMOVED' ;

-- Clock for remaining-time ordering
INSERT INTO Clock SET ID=204,Lastchanged=0 ;
-- execute fix-script
--    'scripts/fix_games_timeleft.php'
-----------

   * include/config.php, error.php, register.php:
   - fix $HOSTBASE -> HOSTBASE

2009-11-04 juga

   * confirm.php (jump_to_next_game):
   - cleanup: replace building SQL-statement using QuerySQL-class

   * status.php:
   - bugfix: show priority too if column is shown

   * include/classlib_game.php (NextGameOrder.load_game_priority, ~.persist_game_priority, ~.delete_game_priorities),
     specs/db/table-Games.txt, scripts/updates/database_changes_1_0_14_to_1_0_15.mysql,
     scripts/game_consistency.php, clock_tick.php, confirm.php (jump_to_next_game),
     gameinfo.php, status.php, NEWS:
   - added status-games-order on priority (per player) and
     editing on game-info page
   - delete GamesPriority-table-entries for finished and deleted games
   - deactivate status-game priority column by default
-----------
-- status-games ordering by priority
CREATE TABLE GamesPriority (
   gid int(11) NOT NULL,
   uid int(11) NOT NULL,
   Priority smallint signed NOT NULL default '0',
   PRIMARY KEY (gid,uid)
) ENGINE=MyISAM;

ALTER TABLE Players
   CHANGE NextGameOrder NextGameOrder enum('LASTMOVED','MOVES','PRIO') NOT NULL DEFAULT 'LASTMOVED' ;

-- deactivate status-game priority column by default
UPDATE ConfigPages SET ColumnsStatusGames=ColumnsStatusGames & ~0x10000 ;
-----------

   * include/classlib_game.php (NextGameOrder.ARR_NEXT_GAME_ORDER,
       ~.get_next_game_orders_selection, ~.get_next_game_order),
     include/std_functions.php (ARR_NEXT_GAME_ORDER, get_next_game_order),
     confirm.php (jump_to_next_game),
     status.php:
   - moved status-games-next-game-order stuff to NextGameOrder-class
     to 'include/classlib_game.php'

2009-11-03 juga

   * include/table_columns.php (Table.make_sort_images, current_order_string),
     status.php:
   - show status-games sort-order with table-header sort-images

2009-11-02 juga

   * include/std_functions.php (get_next_game_order),
     scripts/updates/database_changes_1_0_14_to_1_0_15.mysql,
     specs/db/table-Players.txt,
     confirm.php (jump_to_next_game),
     status.php (status_games_extend_table_form),
     NEWS:
   - added constrained order for status games bound to "next game"
     on game-page for: last moved (default), number of moves
-----------
-- status-games ordering coupled with "next game"
ALTER TABLE Players
   ADD NextGameOrder enum('LASTMOVED','MOVES') NOT NULL DEFAULT 'LASTMOVED' AFTER UserPicture ;
-----------

   * include/table_columns.php (Table.set_extend_table_form_function,
       ~.make_add_column_form):
   - added optional callback-function to extend table-form with additional
     form-elements

2009-11-01 juga

   * include/std_functions.php, NEWS:
   - New game: Decreased maximum number of games in offer: 20 -> back to default 10

   * snapshot.php:
   - easier versioning

2009-09-07 juga

   * include/classlib_profile.php, include/form_functions.php,
     include/std_classes.php, include/table_columns.php,
     scripts/index.php:
   - fixed doxygen-warnings

2009-09-06 juga

   * include/message_functions.php (game_info_table), waiting_room.php:
   - fixed text for manual-handicaptype: Fix color -> Color Black|White
   - fixed wrongly showed handicaptype of game-info for own game-offer

   * scripts/index.php (echo_scripts):
   - added 2nd phpinfo-link (with adjusted link)
   - added more info about release-helper scripts

   * error.php, admin.php, admin_admins.php, admin_do_translators.php, admin_faq.php,
     admin_password.php, admin_show_adminlog.php, admin_show_errorlog.php,
     admin_show_faqlog.php, admin_show_users.php, admin_translators.php,
     admin_users.php, change_password.php, send_new_password.php,
     forum/admin.php, forum/admin_show_forumlog.php,
     scripts/check_block_ip.php, scripts/convert_from_old_forum.php,
     scripts/convert_posindex.php, scripts/data_export.php, scripts/data_report.php,
     scripts/game_consistency.php, scripts/generate_translation_texts.php,
     scripts/index.php, scripts/mailtest.php, scripts/make_handicap_pattern.php,
     scripts/message_consistency.php, scripts/player_consistency.php,
     scripts/recalculate_ratings2.php, scripts/start_frozen_clocks.php,
     scripts/translation_consistency.php, scripts/update_translation_pages.php,
     scripts/updates/fix_game_comments-1_0_15.php,
     scripts/updates/fix_message_thread-1_0_15.php, NEWS:
   - save Adminlog-entry for adminlevel_too_low with originating source-page

   * scripts/index.php (echo_scripts), skins/dragon/screen.css, admin.php:
   - show list of important admin-scripts for "mighty" admins with short description
   - produce error if admin-level too low

   * scripts/updates/database_changes_1_0_14_to_1_0_15.mysql:
   - cleanup of unused entries in Clock-table
-----------
-- [data] cleanup unused Clocks
DELETE FROM Clock WHERE NOT ((ID BETWEEN 0 AND 23) OR (ID BETWEEN 100 AND 123) OR ID IN (201,202,203) ) ;
-----------

   * list_messages.php, search_messages.php, NEWS:
   - deactivated found-rows for message-pages with small usefulness
     but high potential for slow-queries

   * login.php, scripts/updates/database_changes_1_0_14_to_1_0_15.mysql:
   - no longer log user-login, also to have less needed db-queries
   - delete uninteresting messages in Adminlog-table
-----------
-- [data] cleanup Adminlog (delete uninteresting messages, not longer logged)
DELETE FROM Adminlog WHERE Message = 'logged_in' ;
-----------

   * faq.php, people.php, ratingpng.php, statisticspng.php, userinfo.php:
   - replaced T_(non-const) with $TW_(..) to prevent error in script
     'generate_translation_texts.php'

   * forum/search.php, include/message_functions.php, introduction.php:
   - fixed wrong/unused T_(..)-translation-texts

   * scripts/generate_translation_texts.php (find_translation_texts, eat_comments,
       eat_whitespace, eat_translation_text),
     scripts/README.translations:
   - refined and adjusted parsing of T_()-content to be more flexible replacing
     pattern-matches with manually parsing
   - replaced T_(non-const) with $TW_(..) to prevent error in script
     'generate_translation_texts.php'
   - use php_strip_whitespace()-func to read php-files stripping all comments,
     since PHP5
   - better error-handling, show errors and new entry count
   - scan pages sorted alphabetically
   - corrected current-dir for use of php_strip_whitespace() to base-dir
   - adjusted parsing of $TranslateGroups[]

   * scripts/update_translation_pages.php:
   - adjusted parsing of $TranslateGroups[] allowing also single quotes
     and more whitespaces

   * specs/doxygen-usage.txt, scripts/README.developers,
     goodies/index.php, scripts/tests/AllTests.php:
   - added references, installation, usage for doxygen doc-style used for DGS
   - fix doxygen-warnings

   * scripts/doxygenConfig:
   - updated config for doxygen 1.2.16-20020609 -> v1.5.5, adjusted to DGS

   * scripts/experiments/activity_players.php,
     scripts/experiments/analyze-slow_log.php,
     scripts/experiments/bitfield_mysql_set.php,
     scripts/experiments/bitmask_signed_int.php,
     scripts/experiments/grabout.php,
     scripts/updates/database_changes_1_0_14_to_1_0_15.mysql, INSTALL:
   - added and adjusted (old) test- and check scripts
   - added access-right CREATE-TEMPORARY-TABLE for dragon user
-----------
-- grant access-right to create temporary tables to DGS db-user
-- Lookup your respective configuration in 'include/config-local.php'
GRANT CREATE TEMPORARY TABLES ON DB_NAME.* TO MYSQLUSER@MYSQLHOST ;
-----------

   * include/std_functions.php (write_to_file, read_from_file):
   - detailed error-message on error while reading or writing file
   - added compatibility-code for file_get_contents()-func: changed args since PHP5

   * scripts/check_block_ip.php:
   - added syntax-description

   * include/connect2mysql.php (connect2mysql):
   - log retry-connect-count if DBG_QUERY>1

   * admin_password.php:
   - removed translation-group till there are any translation-texts

2009-09-04 juga

   * scripts/data_export.php:
   - removed OLD_STYLE_DUMP and configuration of it,
     keeping notes about old-/new-style
   - changed orders of exporting DDL of tables to alphabetical

   * scripts/data_export.php (after_table, definitions_fix, dump2html, dbTable.structure):
   - adjusted export-script for MySQL5 and DB-changes:
     - added guest-seeding for ConfigPages/ConfigBoard/UserQuota-tables
     - added new tables for export
     - fixed definitions-fix emptying text (from last Posts-change)
     - needed to use ISO-8859-1 encoding:
       UTF-8 made problems resulting in empty TranslationTexts for HTML-view
     - fixed MySQL5-syntax for "CREATE TABLE (..) TYPE=" -> ".. ) ENGINE="
     - changed default mysql-version: 3.23.32 -> 5.0.38
   - typos, comments, layouting, enhanced description for checkboxes

   * include/message_functions.php (echo_folders, message_list_body),
     list_messages.php:
   - allow marking and moving of messages in NEW- and REPLY-folder when no reply
     is needed on message
   - show folders always with links to allow refresh
   - bugfix: fixed check for destroyed messages: is_null -> ==FOLDER_DESTROYED
   - adjust text for 'Follow move' -> 'Follow moving'

   * waiting_room.php, join_waitingroom_game.php:
   - removed way to enter message when joining waiting-room-game,
     players can "chat" and greet during game
     - changed notify text for joining waiting-room game:
       added game links and removed user-message on game-join
     - aiming for anonymizing notifies, relieving message-system from game-stuff

   * message.php:
   - reduced message-box height from 12 to 6 for invitations and disputes
     to let user have focus on game-settings

   * include/error_functions.php (dump_exit),
     include/message_functions.php (message_list_head),
     include/std_functions.php (game_reference, tournament_reference, user_reference),
     include/table_columns.php (Table.add_tablehead, ~.set_default_sort,
       ~.current_order_string, ~.make_sort_string),
     edit_profile.php, error.php, game.php:
   - minor cleanup (clearer code, use bool instead ints), comments,
     TODOs, FIXMEs?, typos, layouting

   * include/page_functions.php (HTMLPage), include/std_functions.php (start_html):
   - cleanup: sync'ed HTMLPage-varname with methodname: Id -> ClassCSS

   * include/std_functions.php (strip_gamenotes, game_reference, tournament_reference, user_reference),
     show_games.php, status.php:
   - extracted strip_gamenotes()-func for trimming game-notes on games-lists

   * show_games.php:
   - bugfix: limit remaining-time columns to my-running-games view only

   * waiting_room.php:
   - remove sorting from Restrictions-column,
     makes not many sense any more with multiple restraints
   - revert default-sort for Games-numbers

   * scripts/README.developers:
   - enhanced text about translations, fixed typos

   * admin_password.php:
   - set translategroup (even if without translated text)

2009-09-03 juga

   * forum/forum_functions.php (DisplayForum.forum_message_box),
     forum/post.php (post_message), forum/read.php,
     skins/dragon/screen.css, NEWS:
   - preserved entered forum-message on missing subject and/or text,
     switching into preview
   - show optional error-message above forum-message-box
   - use CSS for description-header

   * include/std_functions.php (is_logged_in), status.php:
   - moved check and switch for DST (daylight-saving-time) from status-page
     into is_logged_in() in std-functions

   * forum/forum_functions.php (ForumRead.replace_row_forumread), INSTALL:
   - replaced 3-step UPDATE/check/INSERT with "INSERT .. ON DUPLICATE UPDATE"
     supported by MySQL >= 5.0.38 (bugfix)

   * opponents.php:
   - added opponent-games-link on game-statistics page in players-info
   - enhanced opponent-games-link by "finished" or "running" games

   * include/filter.php (SearchFilter, ~.add_filter, ~.extract_filter_formname,
       ~.add_or_del_filter, ~.get_required_ids, ~.to_string, ~.reset_filter),
     include/table_columns.php (Table.add_or_del_column),
     include/globals.php, specs/filters.txt,
     opponents.php, show_games.php, site_map.php, userinfo.php, NEWS:
   - bugfix: filter-framework can now add hidden columns on-the-fly if required,
     so table-columns need not be static any more to workaround this problem
     - added parsing of REQF_URL-parameter used to declare required filters for search,
     - required filters are skipped on filter-reset
     - added Table-handling to add hidden columns for required filters
     - make Rated/Won-columns on games-lists non-static,
       adjusted source-links on user-info and site-map

   * show_games.php, scripts/updates/database_changes_1_0_14_to_1_0_15.mysql, NEWS:
   - added filter-search for existance of game-comments for my finished games
-----------
-- added index to search for games with comments
ALTER TABLE Games
   ADD INDEX Flags (Flags) ;
-----------

   * scripts/player_consistency.php:
   - added consistency-check for Players/ConfigBoard/ConfigPages/UserQuota-tables,
     fix missing entries by inserting

2009-09-02 juga

   * halfhourly_cron.php, NEWS:
   - optimize vacation-check-queries by restricting it on Players.Lastaccess within
     twice max-vacation to avoid yet more indexes (Players.OnVacation/VacationDays)

   * forum/forum_functions.php (DisplayForum.get_new_string,
       ForumThread.load_revision_history),
     error.php:
   - bugfix: wrong NEW-link in tree-overview
   - bugfix: forbid viewing of revision-history for non-approved post except
     for author or moderators

   * forum/post.php (show_post):
   - bugfix: updating Forums.LastPost on showing hidden post

   * include/message_functions.php (message_list_query, message_list_head),
     scripts/translation_consistency.php, quick_status.php,
     rss/status.php, wap/status.php:
   - cleanup ORDER-BY query: avoid aliases and calculated fields;
     e.g. MessageCorrespondents.mid has similar order as Messages.Time used
     to sort messages

   * forum/forum_functions.php (ForumRead.recalc_forum_reads, ~.recalc_thread_reads),
     include/classlib_bitset.php (BitSet.reset),
     include/filter.php (Filter.build_generic_selectbox_elem),
     include/form_functions.php (Form.build_areas),
     include/std_classes.php (QuerySQL.get_select),
     game.php, statisticspng.php, statratingspng.php:
   - slight optimize (loop-invariants)

   * include/connect2mysql.php (db_close), edit_vacation.php, game.php:
   - removed or moved closing of db-connection;
     in general position of db_close() must take into account,
     that texts may contain DGS-markup still needing db-access

   * include/connect2mysql.php (connect2mysql):
   - removed use of ignore_user_abort() in connect-function,
     added TODO to use it around HOT-sections to avoid transaction-break

   * include/contacts.php (Contact.load_contact, ~.update_contact),
     scripts/updates/database_changes_1_0_14_to_1_0_15.mysql:
   - fixed wrong handling of date-handling for Contacts.Created & Lastchanged
-----------
-- fix date-field Contacts.Created
UPDATE Contacts SET Created=Lastchanged WHERE YEAR(Created)=1970 ;
-----------

   * scripts/README.developers:
   - added W3C-compliance, adjusted myths about constant strings

2009-08-23 juga

   * include/classlib_game.php (GameScore.calculate_score):
   - fix area-scoring: substract only "Handicap-1" points from Black as compensation

   * include/gui_functions.php (echo_image_gamecomment),
     scripts/updates/fix_game_comments-1_0_15.php,
     scripts/updates/database_changes_1_0_14_to_1_0_15.mysql,
     scripts/updates/other_changes_1_0_14_to_1_0_15.txt,
     clock_tick.php, confirm.php, game.php, people.php, show_games.php, NEWS:
   - mark games that have hidden game comments from one of the players
     - notify players about hidden game comments after game finished
     - show icon near Comments-link on game page if there are hidden comments
     - added column with icon as indicator if there are hidden comments
       on games-list with my finished games
-----------
-- add indicator for hidden-comments within move-messages
ALTER TABLE Games
   CHANGE Flags Flags set('Ko','HiddenMsg') NOT NULL default '' ;
-- execute fix-script (with do_it=1 right away), because db-statement takes quite some time:
--    'scripts/updates/fix_game_comments-1_0_15.php?do_it=1'
-----------

   * confirm.php:
   - added more LFs in game-result message

   * people.php:
   - changed text for site-admin (ADMIN_DEVELOPER)

   * show_games.php:
   - added hideable column-header for game-info column

   * include/std_functions.php (is_logged_in, delete_all_observers),
     include/move.php (check_move), scripts/game_consistency.php, quick_play.php:
   - renamed const KO -> GAMEFLAGS_KO
   - more detail in error-labels

   * include/std_functions.php (start_page, is_logged_in, update_count_message_new,
       count_forum_new),
     scripts/updates/database_changes_1_0_14_to_1_0_15.mysql:
   - prepared main-menu to add linked count of NEW forum-posts in main-menu
   - bugfix on update for message-count in main-menu
-----------
-- quick-read-count for NEW-forum for user
ALTER TABLE Players
   ADD CountForumNew mediumint NOT NULL default '-1' AFTER CountFeatNew ;
-----------

   * include/filterlib_country.php (getFilterCountries):
   - added shorter names for some long ones for country-codes: IO,PM,VC,GS,VA,XF

   * include/countries.php (getCountryText), NEWS,
     scripts/updates/other_changes_1_0_14_to_1_0_15.txt:
   - added flags for country-codes (ISO-3166-1), even if unoffical flags:
     AI (Anguilla), BL (Saint Barthelemy), BM (Bermuda), CC (Cocos Islands),
     CK (Cook Islands), CX (Christmas Island), FK (Falkland Islands),
     GF (French Guinea), GP (Guadeloupe), GS (South Georgia and Sandwich Islands),
     IM (Isle of Man), IO (British Indian Ocean Territory), KY (Cayman Islands),
     MF (Saint Martin), MQ (Martinique), MS (Montserrat), NC (New Caledonia),
     NU (Niue), PM (Saint Pierre and Miquelon), PN (Pitcairn), RE (Reunion),
     SH (Saint Helena), TC (Turks and Caicos Islands), VI (US Virgin Islands),
     WF (Wallis and Futuna), YT (Mayotte)
   - removed country-codes: BV (Bouvet Island), NT (Neutral Zone)
-----------
# added flags
copy /images/flags/bl.gif
copy /images/flags/gf.gif
copy /images/flags/gp.gif
copy /images/flags/io.gif
copy /images/flags/mf.gif
copy /images/flags/mq.gif
copy /images/flags/nc.gif
copy /images/flags/pm.gif
copy /images/flags/re.gif
copy /images/flags/wf.gif
copy /images/flags/yt.gif

# updated flags
copy /images/flags/ai.gif
copy /images/flags/bm.gif
copy /images/flags/cc.gif
copy /images/flags/ck.gif
copy /images/flags/cx.gif
copy /images/flags/fk.gif
copy /images/flags/gs.gif
copy /images/flags/im.gif
copy /images/flags/ky.gif
copy /images/flags/ms.gif
copy /images/flags/nu.gif
copy /images/flags/pn.gif
copy /images/flags/sh.gif
copy /images/flags/tc.gif
copy /images/flags/vi.gif
-----------

2009-08-16 juga

   * include/std_functions.php (update_count_message_new),
     include/message_functions.php (change_folders), message.php:
   - renamed const COUNTMSGNEW_RECALC -> COUNTNEW_RECALC

   * features/lib_votes.php (Feature.can_delete_feature, ~.delete_feature):
   - minor optimize on allow-check for feature-delete
   - returns number of affected rows for feature-delete

   * include/std_functions.php (start_page, count_feature_new, update_count_feature_new),
     scripts/updates/database_changes_1_0_14_to_1_0_15.mysql,
     scripts/player_consistency.php,
     specs/db/dragon-ddl.sql, specs/db/table-Players.txt,
     features/edit_feature.php, features/vote_feature.php, NEWS:
   - show linked count of NEW features in main-menu if there are some
     update count accordingly when features is added, updated, deleted or voted upon
-----------
-- quick-read-count for NEW-features for user
ALTER TABLE Players
   ADD CountFeatNew smallint NOT NULL default '-1' AFTER CountMsgNew ;
ALTER TABLE Players
   ADD INDEX CountFeatNew (CountFeatNew) ;
-----------

   * include/std_functions.php (start_page):
   - main-menu text change: Feature vote -> Features

   * include/globals.php, include/quick_common.php include/std_functions.php:
   - added include-file for globally used vars and constants without dependencies
   - moved folder-consts from std_functions and quick_common to globals include-file

   * include/classlib_userconfig.php (ConfigPages, ~.get_status_flags,
       ~.get_status_folder_visibility, ~.set_status_flags_folderbit, ~.set_status_flags,
       ~.get_status_folders_querypart, ~.update_status_folders, ~.is_system_status_folder,
       ~.load_config_pages),
     include/std_functions.php (start_page, make_menu_horizontal, make_menu_vertical,
       send_message, is_logged_in, count_messages_new, update_count_message_new),
     include/message_functions.php (change_folders),
     specs/db/dragon-ddl.sql, specs/db/table-Players.txt,
     scripts/updates/database_changes_1_0_14_to_1_0_15.mysql,
     scripts/player_consistency.php, skins/dragon/screen.css,
     edit_folders.php, message.php, status.php, NEWS:
   - show linked count of NEW messages in main-menu if there are some,
     update count accordingly when sending messages and changing folders
   - NEW and REPLY message folders on status page can be hidden,
     load messages on status page only if some folders should be shown,
     can be changed on edit-folders-page
-----------
-- GUI-flags for status page
ALTER TABLE ConfigPages
   ADD StatusFlags smallint NOT NULL default '3' AFTER User_ID ;

-- quick-read-count for NEW-messages of user
ALTER TABLE Players
   ADD CountMsgNew mediumint NOT NULL default '-1' AFTER Notify ;
-----------

   * statistics.php:
   - added total count for user-country statistics

   * scripts/README.developers,
     include/classlib_profile.php (SearchProfile.handle_action),
     include/classlib_upload.php (ImageFileUpload.checkFileUploadError, ~.loadImage),
     include/connect2mysql.php (check_passwd_method),
     include/error_functions.php (Errors.set_mode),
     include/faq_functions.php (faq_item_html), include/graph.php (get_image_type),
     include/std_functions.php (start_html, start_page, send_email,
       switch_admin_status, is_logged_in),
     include/time_functions.php (time_remaining),
     send_message.php, sgf.php, statratingspng.php, scripts/data_export.php:
   - added typed-cast for switch-statements

2009-08-10 juga

   * include/countries.php (getCountryText, getCountryFlagImage),
     scripts/updates/database_changes_1_0_14_to_1_0_15.mysql,
     scripts/updates/other_changes_1_0_14_to_1_0_15.txt, NEWS:
   - adjusted flags for country-codes (ISO-3166-1):
     - added flags for AX (Aaland Islands), AS (American Samoa), AW (Aruba),
       EU (Europe), FO (Faroe Islands), PF (French Polynesia), GI (Gibraltar),
       GL (Greenland), GU (Guam), GG (Guernsey), JE (Jersey), AN (Netherlands Antilles),
       NF (Norfolk Island), MP (Northern Mariana Islands), TK (Tokelau),
       EH (Western Sahara)
     - fixed country-codes using user-defined ISO-3166 ccodes:
       TP (East Timor) -> TL (Timor Leste), EO (Esperanto) -> XO, IA (Interlingua) -> XI,
       CI (change pos), MJ (Montenegro) -> ME, __ (Earth) -> XE
     - fixed names: AG (Antigua and Barbuda) lower-case 'and', BA (Bosnia and Herzegovina) typo,
       BN (Brunei Darussalam) full name, KZ (Kazakhstan) typo, MO (Macao) typo,
       PS (Palestinian Territory) fix-name
     - added ccodes but commented out in lack of nice flag:
       AI (Anguilla), BM (Bermuda), BV (Bouvet Island), KY (Cayman Islands),
       CX (Christmas Island), CC (Cocos Islands), CK (Cook Islands), FK (Falkland Islands),
       IM (Isle of Man), MS (Montserrat), NU (Niue), PN (Pitcairn), SH (Saint Helena),
       GS (South Georgia and Sandwich Islands), TC (Turks and Caicos Islands),
       VG (Virgin Islands (British)), VI (Virgin Islands (US))
     - added ccode but without flag because it's the same as other countries:
       IO (British Indian Ocean Territory), GF (French Guinea), GP (Guadeloupe), MQ (Martinique),
       MY (Mayotte), NT (Neutral Zone), NC (New Caledonia), RE (Reunion), BL (Saint Barthelemy),
       MF (Saint Martin), PM (Saint Pierre and Miquelon), SJ (Svalbard and Jan Mayen),
       UM (United States Minor Outlying Islands), WF (Wallis and Futuna)
   - added static width/height for country-images: 32x20
   - added URLs for ISO-3166 and more links to flags-images
-----------
# added flags
copy /images/flags/ai.gif
copy /images/flags/an.gif
copy /images/flags/as.gif
copy /images/flags/aw.gif
copy /images/flags/ax.gif
copy /images/flags/bm.gif
copy /images/flags/cc.gif
copy /images/flags/ck.gif
copy /images/flags/cx.gif
copy /images/flags/eh.gif
copy /images/flags/fk.gif
copy /images/flags/fo.gif
copy /images/flags/gg.gif
copy /images/flags/gi.gif
copy /images/flags/gl.gif
copy /images/flags/gs.gif
copy /images/flags/gu.gif
copy /images/flags/im.gif
copy /images/flags/je.gif
copy /images/flags/ky.gif
copy /images/flags/me.gif
copy /images/flags/mp.gif
copy /images/flags/ms.gif
copy /images/flags/nf.gif
copy /images/flags/nu.gif
copy /images/flags/pf.gif
copy /images/flags/pn.gif
copy /images/flags/sh.gif
copy /images/flags/tc.gif
copy /images/flags/tk.gif
copy /images/flags/vg.gif
copy /images/flags/vi.gif
copy /images/flags/xf.gif
copy /images/flags/xk.gif

# updated flags
copy /images/flags/rs.gif

# changed country-code
copy /images/flags/tl.gif ( was former tp.gif )
copy /images/flags/xe.gif ( was former __.gif )
copy /images/flags/xi.gif ( was former ia.gif )
copy /images/flags/xo.gif ( was former eo.gif )

# remove old flags
remove /images/flags/__.gif
remove /images/flags/eo.gif
remove /images/flags/ia.gif
remove /images/flags/mj.gif
remove /images/flags/tp.gif


-- fix country-code for East Timor -> Timor Leste: TP -> TL
UPDATE Players SET Country='tl' WHERE Country='tp' ;

-- fix country-code for Montenegro: MJ -> ME
UPDATE Players SET Country='me' WHERE Country='mj' ;

-- fix country-code for Earth: __ -> XE
UPDATE Players SET Country='xe' WHERE Country='__' ;

-- fix country-code for (language) Interlingua: IA -> XI
UPDATE Players SET Country='xi' WHERE Country='ia' ;

-- fix country-code for (language) Esperanto: EO -> XO
UPDATE Players SET Country='xo' WHERE Country='eo' ;

-- obsoleted country-code for Yugoslavia: YU -> RS (Serbia), but could be ME (Montenegro)
UPDATE Players SET Country='rs' WHERE Country='yu' ;

-- check for more unknown country-codes with Statistics page (evtl. fix more):
-- unknown flags are shown without flag-image but shows "[country-code]"
statistics.php?stats=1
-----------

   * statistics.php (stats_start_page, show_stats_default, show_stats_user_countries),
     skins/dragon/screen.css, NEWS:
   - added new view with counts for user countries
     - stats for all users or within 8 weeks (URL-var 'w')
     - show remaining/unused countries (flags), so this can be used to view all flags

2009-08-09 juga

   * forum/forum_functions.php (DisplayForum.print_headline, ~.draw_post,
       Forum.fix_forum):
   - show subject as "moderated" too for hidden initial thread-post
   - show post-approved state in tree-overview for own posts
   - fix-forum: also fix hidden initial thread-posts

   * forum/post.php (approve_post, hide_post_update_trigger, show_post),
     scripts/forum_consistency.php, specs/forums.txt,
     scripts/updates/other_changes_1_0_14_to_1_0_15.txt:
   - fixes for changed forum-behaviour: thread not hidden if initial thread post hidden
     - increase Forums.ThreadsInForum for approving post only if thread was empty
     - decrease Forums.ThreadsInForum for hiding post only if thread had only one post
     - fix Thread.LastPost/Lastchanged/Updated also if LastPost was unset (=0)
     - fix Forums.LastPost if LastPost was unset (=0) and fixed code with undefined forum-var
-----------
# Fixes for changed forum-behaviour: thread not hidden if initial thread post hidden
# see 'scripts/updates/other_changes_1_0_14_to_1_0_15.txt' for further instructions
scripts/forum_consistency.php
-----------

2009-08-08 juga

   * forum/search.php:
   - added search for hidden messages, except for guest-user
   - added moderator-search for all/own shown/hidden/pending-approval messages

   * forum/search.php, NEWS:
   - added message-scope to search for own hidden messages

   * features/lib_votes.php (VOTE_MIN_RATEDGAMES):
   - reduced number of min-rated games to allow voting: 10 -> 5

   * people.php:
   - added user [jgrande] as developer
   - changed title for Dragon executives as hint for restriction
     on 6 weeks last-active, added active-note

   * include/quick_common.php (DGS_VERSION), sgf.php (sgf_echo_rating), NEWS:
   - fix cgoban3-issue with empty BR/WR-property for player-rank in downloaded SGF,
     show '?' for unrated player
   - show rating in standard short form for BR/WR-properties
   - added more info in SGF: AP[application with DGS-version], SO[DGS-url to game]
   - changed general comment property:
     - added black/white start/end rating in general comment property (with ELO-rating)
     - changed info if game is rated in extra-line: "Rated: Y|N"
   - added comment with all useful SGF-properties, note about time-info

2009-08-05 juan_grande

   * include/game_functions.php,
     include/message_functions.php (game_settings_form),
     scripts/updates/database_changes_1_0_14_to_1_0_15.mysql,
     specs/db/dragon-ddl.sql, specs/db/table-Waitingroom.txt,
     add_to_waitingroom.php, waiting_room.php:
   - added area-scoring for game-offers in waiting-room:
     - added db-field Waitingroom.Ruleset to store territory and area scoring method
     - added selectbox in new-game for waiting-room to choose
       from territory (default) and area scoring
-----------
-- added ruleset selection to waiting room
ALTER TABLE `Waitingroom`
   ADD COLUMN `Ruleset` enum('area', 'territory') NOT NULL DEFAULT 'territory' AFTER `Time` ;
-----------

2009-08-04 juga

   * scripts/forum_consistency.php:
   - split validation-step in "with" or "without" NEW-fixes
   - added integrity-check on posts.author reporting if unknown author found in post
   - optimized query-fix for Thread.Updated-fields
   - cleanup (separator-lines, date-format, shorter output/code, clearer SQL)

   * forum/forum_functions.php (DisplayForum.forum_message_box, ~.draw_post,
       ~.get_post_edited_string, Forum.fix_forum, ForumPost.build_query_sql):
   - show post-message inputbox and reply-/edit-link on post only for allowed users
     with Players.MayPostOnForum<>'N'
   - fix for forum-fix for Forums.LastPost, which can be 0 if containing no threads
   - use INNER-join for building post-query

   * forum/post.php (post_message, approve_post, reject_post, hide_post, show_post,
       hide_post_update_trigger, recalc_thread_lastpost, recalc_forum_lastpost):
   - fix editing of post with different moderated-state changed from shown to hidden
   - fix adding new-thread: update thread Posts.Updated and Forums.LastPost
   - fix moderator-actions (approve/reject/hide/show_post):
     update trigger only if moderated-state has changed to avoid wrong counters
     if action re-done (by resubmitting same URL for example)
   - fix recalc of thread-last-post if all posts of thread are hidden (no last-post)
   - fix recalc of forum-last-post if all posts of forum are hidden (no last-post)

   * forum/read.php:
   - fix double forum-input-box when replying to one-post-only-thread

   * specs/forums.txt:
   - fixed comments and trigger-updates for table-fields, fixed post-editing
   - added more docu about forum-stuff

2009-08-02 juga

   * scripts/README.developers:
   - added more detailed DGS-layouting

   * specs/db/dragon-ddl.sql:
   - fix DDL-glitch with comments (missing space)

   * INSTALL:
   - fix Adminlevel=-1 (now signed field) -> 0xffff

2009-07-31 juga

   * specs/db/dragon-ddl.sql:
   - sync'ed with local DB to reflect current DDL for DGS

2009-07-28 juga

   * forum/forum_functions.php (DisplayForum, ~.show_found_rows, ~.print_headline,
       ~.forum_end_table, ~.make_link_array, ~.forum_message_box, ~.draw_post, ~.draw_overview,
       Forum.load_threads, ForumThread.get_post, ~.create_navigation_tree,
       ForumPost.is_thread_post, ~.get_approved_text, ForumRead.recalc_thread_reads),
     include/filter.php (SearchFilter.has_query), forum/read.php, forum/search.php,
     skins/dragon/screen.css, NEWS:
   - changed moderation for forum-moderators to work like in non-moderation mode:
     - allow add/edit/preview of post in moderator mode and non-moderator mode alike
     - added forum-search option for moderators to allow searching for hidden posts
       independent from moderator-state
     - fixed bug for moderators: edit-text + toggle moderator + submit post
       had lead to lost text
     - show approved-state for hidden posts in thread overview and search-result
     - moderator-mode shows hidden posts and moderation-actions
       show/hide/approve/reject
   - forum bugfixes:
     - loading also hidden posts for navigation & initial thread post
     - "quote"-option only allowed on non-hidden post (except for moderators
       and post-author)
     - fix missing (CSS-)borders for preview of post in new thread
     - fix force-reply when >1 posts: added link to "add reply" to initial-thread
       at end of thread
     - fix thread view post navigation for hidden initial thread-post,
       show first post without body if hidden (to allow replying and navigating),
       mark with "Content moderated"-category-text
     - aligning own and other post-subjects in thread overview
   - changes for forum-search:
     - show found-rows count in forum search result view
     - always show top forum-bar, also for init state of forum-search page
       without query and result,
       omit bottom bar for initial forum-search
     - always show forum-search link in forum-bar (for easier reloading)
   - [cleanup]: refactored using of postClass-arg/var to control logic,
     replaced with more flexible drawmode + defined consts DRAWPOST_..,
     differ post views (NORMAL, PREVIEW, EDIT, REPLY, SEARCH) + submodes to mark
     hidden posts and allowing to omit post-body,
     derive CSS-post-class from drawmode
   - optimize query for ForumRead when loading and recalculating threads

   * forum/post.php (hide_post, show_post):
   - fix showing & hiding post: only increasing/decreasing Forums.ThreadsInForum
     for completly hidden thread
   - added LIMITs on db-queries

   * scripts/updates/database_changes_1_0_14_to_1_0_15.mysql:
   - deactivated game-notes in table-columns as default to reduce server-load
     for games-list status-games & my running/finished games
-----------
-- deactivate game-notes in table-columns as default (to reduce server-load) for games-list (status, my running/finished games)
UPDATE ConfigPages
   SET ColumnsStatusGames=ColumnsStatusGames & ~0x800,
   ColumnsGamesRunningUser2=ColumnsGamesRunningUser2 & ~0x4,
   ColumnsGamesFinishedUser2=ColumnsGamesFinishedUser2 & ~0x4 ;
-----------

   * include/message_functions.php ($MSG_TYPES),
     scripts/updates/database_changes_1_0_14_to_1_0_15.mysql:
   - fixed table-field-order for ConfigPages.ColumnsFeatureList
   - fix-cleanup of wrong table-values for Messages.Type
   - removed unused Messages.Type enum-values "ACCEPTED, DECLINED, DELETED"
-----------
-- [unused] remove unused enum-values of Messages.Type (ACCEPTED,DECLINED,DELETED), cleanup wrong table-values
-- check (wrong) empty 'Type'-values (2489 empties)
SELECT COUNT(*),Type FROM Messages GROUP BY Type ;
-- check all for normal type (game invitations accepted or declined)
SELECT COUNT(*) FROM Messages WHERE Type='' AND Subject LIKE 'Game invitation%' ;
-- check for newer such entries (all should be <2009)
SELECT MAX(Time) FROM Messages WHERE Type='' ;
-- fix table data + check empty types again (should be 0)
UPDATE Messages
   SET Type='NORMAL' WHERE Type='' AND Subject LIKE 'Game invitation%' LIMIT 2489 ;
SELECT COUNT(*),Type FROM Messages GROUP BY Type ;

-- cleanup Messages.Type enum (ca. 2min)
ALTER TABLE Messages
   CHANGE Type Type enum('NORMAL','INVITATION','DISPUTED','RESULT') NOT NULL default 'NORMAL' ;
-----------

   * daily_cron.php:
   - removed (old) code to delete old invitations (if needed add again later)
   - removed vars to configure unused/missing code-fragments

   * do_registration_blocked.php, forum/post.php (hide_post, show_post),
     scripts/convert_from_old_forum.php, scripts/data_export.php:
   - refactoring-fix for db-fields:
     - replaced Forums.Moderated -> Forums.Options (FORUMOPT_MODERATED)
     - replaced Posts.PendingApproval -> Posts.Approved

   * forum/admin_show_forumlog.php:
   - add currrent Posts.Approved-status to forumlog-entries:
     S=shown, H=hidden, M=needs-moderation
   - detailed forumlog notes

   * include/std_functions.php ($DEBUG):
   - added global $DEBUG for better debugging (default OFF)

   * specs/db/dragon-data.sql:
   - fixed seeding of guest-player in database of new dragon-go-server:
     missed ConfigPages/ConfigBoard/UserQuota-table-entry

2009-07-24 juga

   * edit_vacation.php, halfhourly_cron.php:
   - removed alternative (old) code to handle vacation-is-over on games

   * change_bio.php, edit_bio.php, userinfo.php:
   - db-cleanup to use index on Bio.SortOrder (removed 2nd order-column)

   * include/board.php (Board.load_from_db):
   - db-cleanup to use index on Moves.MoveNr (replaced ID -> MoveNr),
     MoveNr is not unique for game-id, but order within same MoveNr is not needed

   * scripts/updates/database_changes_1_0_14_to_1_0_15.mysql:
   - cleanup [not-null] for db-fields:
     - Players.InitialRating: NOT-NULL + default -9999
     - Ratinglog.Rating:      NOT-NULL + removed default
     - Ratinglog.RatingMin:   NOT-NULL + removed default
     - Ratinglog.RatingMax:   NOT-NULL + removed default
     - Ratinglog.RatingDiff:  NOT-NULL + removed default
-----------
-- [not-null] Players.InitialRating -> NOT NULL -> default -9999 [ok]
UPDATE Players
   SET InitialRating='-9999' WHERE InitialRating IS NULL ;
ALTER TABLE Players
   CHANGE InitialRating InitialRating float NOT NULL default '-9999' ;

-- [not-null] Ratinglog.Rating/RatingMin/RatingMax/RatingDiff -> NOT NULL -> no default [mandatory fields]
-- following query-result should be 0
SELECT COUNT(*) FROM Ratinglog
   WHERE Rating IS NULL OR RatingMin IS NULL OR RatingMax IS NULL OR RatingDiff IS NULL ;
ALTER TABLE Ratinglog
   CHANGE Rating Rating float NOT NULL,
   CHANGE RatingMin RatingMin float NOT NULL,
   CHANGE RatingMax RatingMax float NOT NULL,
   CHANGE RatingDiff RatingDiff float NOT NULL ;
-----------

   * scripts/updates/database_changes_1_0_14_to_1_0_15.mysql:
   - added index to accelerate building of rating-graph (for ORDER BY Time)
-----------
-- added index to accelerate building of rating-graph (for ORDER BY Time)
ALTER TABLE Ratinglog
   DROP INDEX uid ;
ALTER TABLE Ratinglog
   ADD INDEX UserTime (uid,Time) ;
-----------

2009-07-23 juga

   * scripts/updates/database_changes_1_0_14_to_1_0_15.mysql,
     include/std_functions.php (RATING_NONE, RATING_INIT, RATING_RATED),
     include/classlib_user.php (User, ~.hasRating),
     include/make_game.php (make_invite_game, create_game),
     include/rating.php (update_rating, update_rating2, update_rating_glicko),
     tournaments/include/tournament_participant.php
       (TournamentParticipant.needTournamentRating),
     scripts/recalculate_ratings2.php, tournaments/register.php,
     add_to_waitingroom.php, change_profile.php, edit_profile.php,
     join_waitingroom_game.php, message.php, new_game.php, send_message.php,
     waiting_room.php:
   - [not-null] db-cleanup of Players.RatingStatus: NOT-NULL + default 'NONE'
     by adding new enum-value 'NONE' representing NULL-values,
     added consts for enum: RATING_NONE/INIT/RATED
-----------
-- [not-null] Players.RatingStatus -> NOT NULL -> default 'NONE' (enhance enum) [ok]
ALTER TABLE Players
   CHANGE RatingStatus RatingStatus enum('NONE','INIT','RATED') default 'NONE' ;
UPDATE Players
   SET RatingStatus='NONE' WHERE RatingStatus IS NULL OR RatingStatus='' ;
ALTER TABLE Players
   CHANGE RatingStatus RatingStatus enum('NONE','INIT','RATED') NOT NULL default 'NONE' ;
-----------

   * scripts/updates/database_changes_1_0_14_to_1_0_15.mysql,
     scripts/data_export.php:
   - [not-null] db-cleanup of TranslationTexts.Ref_ID: NOT-NULL + default 0
-----------
-- [not-null] TranslationTexts.Ref_ID -> NOT NULL -> default '0' [ok]
UPDATE TranslationTexts
   SET Ref_ID=0 WHERE Ref_ID IS NULL ;
ALTER TABLE TranslationTexts
   CHANGE Ref_ID Ref_ID int(11) NOT NULL default 0 ;
-----------

   * scripts/updates/database_changes_1_0_14_to_1_0_15.mysql:
   - [not-null] db-cleanup of Translationlog.Original_ID: NOT-NULL + default 0
-----------
-- [not-null] Translationlog.Original_ID -> NOT NULL -> default '0' [ok]
UPDATE Translationlog
   SET Original_ID=0 WHERE Original_ID IS NULL ;
ALTER TABLE Translationlog
   CHANGE Original_ID Original_ID int(11) NOT NULL default 0 ;
-----------

   * admin_show_errorlog.php, skins/dragon/screen.css:
   - added text-filter on Errorlog.Message
   - added table-navigation and found-rows for Errorlog
   - put too long Debug-info into 2nd line in table-rows
   - bugfix date-filter-const (FRDTU_ABS_ALL -> FRDTU_ALL_ABS)

   * include/table_columns.php (Table.get_column_count):
   - added method to ask for number of Table-columns

   * scripts/updates/database_changes_1_0_14_to_1_0_15.mysql:
   - cleanup unused db-fields in Translationlog-table,
     which have been replaced with Player_ID and Language_ID long before
-----------
-- [unused] cleanup Translationlog-table (fields not used and not referenced) -> CLEANUP
-- fields have been replaced with Player_ID/Language_ID, check with select
SELECT DISTINCT Handle, Language FROM Translationlog ;
ALTER TABLE Translationlog
   DROP COLUMN Handle,
   DROP COLUMN Language ;
-----------

   * bookmark.php:
   - fix sort-args for Opponents/Users online (field -> table-id)

   * halfhourly_cron.php:
   - removed unused Players.Lastaccess
   - use index for Messages.Time (removed function around index-field)

   * people.php:
   - removed unused Players.Lastaccess from queries

   * show_games.php:
   - fix showing of 0-dates for opponent-lastaccess and last-changed

   * include/connect2mysql.php (db_query):
   - added const DBG_QUERY to log db-query to error-log,
     const can be defined somewhere e.g. in local-config

   * scripts/updates/database_changes_1_0_14_to_1_0_15.mysql,
     admin_show_users.php, list_contacts.php, opponents.php, userinfo.php, users.php:
   - cleanup [not-null] for db-fields:
     - Players.Registerdate:  NOT-NULL + removed default
     - Players.Sessionexpire: NOT-NULL + default 0
     - Players.LastMove:      NOT-NULL + default 0
     - Players.Lastaccess:    NOT-NULL + default 0
-----------
-- [not-null] Players.Registerdate -> NOT NULL -> no default [mandatory field]
-- the following query-result should be empty before going on
SELECT COUNT(*) FROM Players WHERE Registerdate IS NULL ;
ALTER TABLE Players
   CHANGE Registerdate Registerdate date NOT NULL ;

-- [not-null] Players.Sessionexpire -> NOT NULL -> default '0' [ok]
UPDATE Players
   SET Sessionexpire=0 WHERE Sessionexpire IS NULL ;
ALTER TABLE Players
   CHANGE Sessionexpire Sessionexpire datetime NOT NULL default 0 ;

-- [not-null] Players.LastMove -> NOT NULL -> default '0' [ok]
UPDATE Players
   SET LastMove=0 WHERE LastMove IS NULL ;
ALTER TABLE Players
   CHANGE LastMove LastMove datetime NOT NULL default 0 ;

-- [not-null] Players.Lastaccess -> NOT NULL -> default '0' [ok]
UPDATE Players
   SET Lastaccess=0 WHERE Lastaccess IS NULL ;
ALTER TABLE Players
   CHANGE Lastaccess Lastaccess datetime NOT NULL default 0 ;
-----------

   * include/GoDiagram.php, include/board.php, include/connect2mysql.php,
     include/error_functions.php, include/faq_functions.php, include/filter_parser.php,
     include/form_functions.php, include/graph.php, include/gui_functions.php,
     include/index.php, include/make_game.php, include/make_translationfiles.php,
     include/message_functions.php, include/quick_common.php, include/rating.php,
     include/sgf_parser.php, include/std_functions.php, include/table_columns.php,
     include/table_infos.php, include/time_functions.php, include/utilities.php,
     include/translation_functions.php, goodies/index.php, js/index.php,
     forum/admin.php, forum/forum_functions.php, forum/index.php,
     forum/old_links_redirect.php, phorum/list.php, phorum/read.php,
     scripts/browser_stats.php, scripts/data_export.php, scripts/index.php,
     scripts/mailtest.php, scripts/player_consistency.php,
     scripts/tests/run_tests.php, scripts/update_translation_pages.php,
     skins/dragon/index.php, skins/dragon2/index.php, skins/index.php,
     rss/status.php, wap/status.php, pattern/index.php,
     admin_do_translators.php, admin_faq.php, admin_show_users.php, admin_translators.php,
     change_bio.php, change_password.php, change_profile.php, confirm.php, daily_cron.php,
     do_registration.php, edit_bio.php, edit_password.php, edit_profile.php,
     edit_vacation.php, error.php, game.php, game_comments.php, index.php,
     introduction.php, links.php, list_messages.php, message.php, new_game.php,
     people.php, quick_play.php, ratingpng.php, register.php, sgf.php, statistics.php,
     statratingspng.php, translate.php, update_translation.php:
   - cleanup + layout: indent, line-wraps, elseif, nested if's, braces,
     empty lines, switch, arrays, ?-op, clearer vars, comments

   * scripts/data_export.php:
   - replaced static config of scripts super-admin-role by using ARR_USERS_MAINTENANCE
     from 'include/config.php'

   * translate.php:
   - cleanup: removed old-way to determine translation-groups (static -> from db-table)

   * include/message_functions.php (game_settings_form), edit_profile.php, new_game.php:
   - use array_value_to_key_and_value() to build key-value map

   * change_bio.php:
   - bugfix: added missing str-concat

2009-07-22 juga

   * include/rating.php (get_rating_at_date):
   - bugfix get_rating_at_date: mysql_query -> mysql_single_fetch

   * daily_cron.php:
   - cleanup: removed unused code to update rating for users with not
     existing RatingStatus=READY

   * features/lib_votes.php, features/list_features.php features/list_votes.php,
     forum/admin.php, forum/admin_show_forumlog.php, forum/forum_functions.php,
     forum/post.php, code_examples/test_clock_tick.php,
     include/GoDiagram.php, include/board.php, include/classlib_profile.php,
     include/connect2mysql.php, include/contacts.php, include/game_functions.php,
     include/make_game.php, include/make_translationfiles.php,
     include/message_functions.php, include/rating.php, include/std_functions.php,
     rss/status.php, wap/status.php,
     admin_do_translators.php, admin_faq.php, admin_show_adminlog.php,
     admin_show_errorlog.php, admin_show_faqlog.php, admin_show_users.php,
     admin_users.php, change_bio.php, change_password.php, change_profile.php,
     clock_tick.php, confirm.php, daily_cron.php, do_registration.php,
     do_registration_blocked.php, edit_bio.php, edit_contact.php, edit_folders.php,
     edit_vacation.php, faq.php, halfhourly_cron.php, join_waitingroom_game.php,
     list_contacts.php, login.php, message.php, opponents.php, people.php,
     quick_play.php, quick_status.php, ratinggraph.php, ratingpng.php,
     send_message.php, send_new_password.php, statistics.php, statisticspng.php,
     statratingspng.php, status.php, translate.php, update_translation.php:
   - cleanup: replaced mysql_query() with db_query()-func (except for scripts/-stuff),
     enhanced query-debugmessage to provide more error-context

   * include/connect2mysql.php (db_query):
   - db_query: added 3rd arg for different error-code

   * include/std_functions.php (get_players_field):
   - cleanup: removed get_players_field()-func (not used so far anyway), because
     1. IPs may be re-used for different users,
     2. retrieving generic fields with a generic query can be cumbersome
        -> better do a specific (optimized and secured) selection
   - make quota-exceeded notify translateable

   * scripts/player_consistency.php:
   - removed sensible-fields replacement breaking query

   * scripts/browser_stats.php:
   - cleanup (SQL-keywords in upper-case)

   * scripts/convert_posindex.php:
   - added SQL optimization using index

   * include/message_functions.php (message_info_table, change_folders,
       change_folders_for_marked_messages, echo_folder_box),
     include/std_functions.php (FOLDER_DESTROYED),
     scripts/message_consistency.php,
     scripts/updates/database_changes_1_0_14_to_1_0_15.mysql,
     daily_cron.php, edit_folders.php, search_messages.php, NEWS:
   - cleanup for MessageCorrespondents.Folder_nr: NOT-NULL + removed default,
     replaced former NULL-values with FOLDER_DESTROYED (= -4)
-----------
-- [not-null] MessageCorrespondents.Folder_nr tinyint default NULL -> no default -> NOT NULL
-- the following query-result should be empty before going on [update ca. 10s, alter-table ca. 25s]
SELECT COUNT(*) FROM MessageCorrespondents WHERE Folder_nr < 0 ;
UPDATE MessageCorrespondents
   SET Folder_nr=-4 WHERE Folder_nr IS NULL ;
ALTER TABLE MessageCorrespondents
   CHANGE Folder_nr Folder_nr tinyint NOT NULL ;
-----------

   * daily_cron.php:
   - cleanup (removed unused method to delete old messages)

2009-07-21 juga

   * include/rating.php (update_rating,update_rating2,update_rating_glicko),
     include/make_translationfiles.php (make_include_files),
     include/std_functions.php (game_reference),
     scripts/convert_from_old_forum.php, scripts/message_consistency.php,
     scripts/recalculate_ratings2.php, scripts/start_frozen_clocks.php,
     code_examples/test_clock_tick.php, rss/status.php, wap/status.php,
     clock_tick.php, confirm.php, daily_cron.php, edit_vacation.php, faq.php,
     game.php, game_comments.php, halfhourly_cron.php, quick_play.php, sgf.php:
   - cleanup: since MySQL 5.0.x JOINs have higher precedence than ','-JOIN operator,
     so add braces to avoid potential confusion when accidentally used with JOINs.
     Should later be replaced with explicit JOIN-operators.

2009-07-20 juga

   * scripts/README.developers,
     scripts/convert_from_old_forum.php, scripts/game_consistency.php,
     scripts/sql_game_export.php, forum/admin.php,
     admin_faq.php, change_bio.php, edit_bio.php, userinfo.php:
   - cleanup (write SQL-keywords in upper-case)

   * scripts/message_consistency.php (game_settings_form),
     scripts/player_consistency.php, people.php, sgf.php:
   - cleanup (remove braces for single table-reference)

2009-07-19 juga

   * NEWS:
   - remaining-time-colored warning, found-rows status-games, row-nums users-page
   - reordered sections + cleanup newer items, fixed typos, added more links,
     added/adjusted/unified/clarified texts (single-quote-handling for link markup,
     quick-status external-link, user-types icons, site-map update)

   * news.php:
   - replaced <br> with LF within <pre>-context

   * include/std_functions.php (parse_tags_safe):
   - bugfix: added special handling to allow external link for tag needing closing tag,
     allow external link with '_'-tag-suffix notation for "<home_ ..></home>"

   * include/time_functions.php, include/game_functions.php, include/make_game.php,
     include/message_functions.php, tournaments/include/tournament_rules.php,
     add_to_waitingroom.php, game.php, waiting_room.php,
     code_examples/check_times.php:
   - used consts for byo-yomi types JAP, CAN, FIS: BYOTYPE_...

   * include/time_functions.php (time_remaining_value, get_time_remaining_warning_class),
     show_games.php (build_time_remaining), status.php, skins/dragon/screen.css:
   - warn with colors of my or opponents short remaining-time for status-games and my running games,
     - use yellow(-card)-like color to warn about remaining-time <7d
     - use red(-card)-like    color to warn about remaining-time <3d
   - added total found-rows to status games-list

   * show_games.php (build_time_remaining):
   - for my running-games added remaining-time for myself and opponent
   - fix ambiguity with Lastchanged-field (Games,Clock)

2009-07-18 juga

   * specs/db/optimize-sql.txt, scripts/README.developers:
   - SQL optimizations, add hint in developer-README

   * forum/forum_functions.php (Forum.fix_forum, ~.load_fix_forum_list, ~.load_forum),
     scripts/forum_consistency.php:
   - added forum consistency script to check- and fix forums and posts

   * specs/db/table-Forum.txt, specs/forums.txt:
   - corrected docu and specs about forums

2009-07-17 juga

   * include/classlib_userconfig.php (COORD_RELATIVE_MOVENUM, COORD_REVERSE_MOVENUM),
     include/board.php (Board.move_marks),
     change_profile.php, edit_profile.php,
     skins/dragon/screen.css, NEWS:
   - added options for move-numbering: relative and reverse
   - changed order, grouping and description of hover-options
   - show admin-CSS for SGF-move-hover
   - fixed building of bitmask: '+' -> '|'

2009-07-14 juga

   * change_profile.php, edit_profile.php:
   - bugfix setting SMOOTH_EDGE in user-profile (read wrong local var)
   - store SMOOTH_EDGE-setting only for textured wood-colors + added note about that

   * include/classlib_userpicture.php (UserPicture.getPicturePath),
     include/config.php (USERPIC_FOLDER), INSTALL:
   - fix userpic-directory handling: replaced DOC-root with relative base_path

   * specs/db/dragon-data.sql, specs/db/dragon-ddl.sql, init.mysql, INSTALL:
   - split init.mysql into dragon-ddl.sql and static dragon-data.sql
   - added note how to create Dragon DDL using PHPMyAdmin from live-server

2009-07-13 juga

   * include/std_functions.php (start_page, check_maintenance),
     include/quick_common.php ($is_maintenance),
     include/config.php ($ARR_USERS_MAINTENANCE),
     scripts/updates/other_changes_1_0_14_to_1_0_15.txt,
     index.php:
   - moved config-array $ARR_USERS_MAINTENANCE with allowed maintenance-users
   - check for maintenance-user to allow form-login, use URL:
     'index.php?userid=...' without exposing password in URL,
     'login.php?userid=...&password=...' is still possible (but exposing password)
   - added (unchanged) var-state for indication of maintenance-mode: $is_maintenance
   - added '[MAINTENANCE]'-text in top-bar if in maintenance-mode
   - added extra spaces around maintenance-message

2009-07-12 juga

   * admin_show_errorlog.php, list_contacts.php, search_messages.php,
     show_games.php:
   - added absolute timeunit-choice for some RelativeDate-filters

   * include/filter.php, features/list_features.php,
     forum/admin_show_forumlog.php, forum/search.php,
     tournaments/list_participants.php, code_examples/filter_example2.php:
   - renamed const for absolute timeunit-choice of RelativeDate-filter
   - increased size of input-field of date-filter

   * include/filter.php (FilterRelativeDate, ~.get_input_element, ~.getTimeUnitText):
   - added lazy-init for loading timeunit-choices for RelativeDate-filter

   * forum/admin_show_forumlog.php:
   - added all single moderator-actions for searching (hide/post/approve/reject post)
   - added full-page-navigation with found-rows
   - translated note

   * sgf.php (sgf_echo_comment):
   - fix bug with gamenote-appending in comment of last SGF-node for running-games

   * game.php, status.php, show_games.php, sgf.php, NEWS,
     scripts/updates/database_changes_1_0_14_to_1_0_15.mysql:
   - migrated GamesNotes.player enum-field -> GamesNotes.uid
     in preparation for more than B and W player (e.g. TeamGo)
-----------
-- change GamesNotes.player-enum to user-id (e.g. for later Rengo has more than one B and W player)
ALTER TABLE GamesNotes
   ADD uid int NOT NULL AFTER gid ;

-- migrate GamesNotes.player -> uid
UPDATE GamesNotes AS GN, Games AS G
   SET GN.uid=IF(GN.player='B',G.Black_ID,IF(G.White_ID<>G.Black_ID,G.White_ID,-1)) WHERE GN.gid=G.ID ;

-- check if migration successful (following query-result must be empty)
-- NOTE: this can happen if Games are "broken", e.g. with same user as B & W
--       -> resolve by deleting GamesNotes or correcting Games-table
SELECT gid FROM GamesNotes WHERE uid <= 0 ;

-- switch primary-key (gid,uid) must be unique (that's the case if above conflicts have been resolved)
ALTER TABLE GamesNotes
   DROP PRIMARY KEY,
   ADD PRIMARY KEY (gid,uid) ;

-- remove unused field GamesNotes.ID, .player -> CLEANUP
ALTER TABLE GamesNotes
   DROP COLUMN ID,
   DROP COLUMN player ;
-----------

   * edit_profile.php, NEWS,
     scripts/updates/database_changes_1_0_14_to_1_0_15.mysql:
   - enlarged length of Players.Open-field 40 -> 60
-----------
-- enlarge field-size of Players.Open 40 -> 60
ALTER TABLE Players
   CHANGE Open Open varchar(60) NOT NULL default '' ;
-----------

   * scripts/updates/database_changes_1_0_14_to_1_0_15.mysql, NEWS:
   - added index on Messages.Time
-----------
-- add index on Messages.Time to support searches on date (~ 2mins)
ALTER TABLE Messages
   ADD INDEX Time (Time) ;
-----------

2009-07-11 juga

   * scripts/updates/database_changes_1_0_14_to_1_0_15.mysql, NEWS:
   - Synchronized table-structure of various DGS-servers
     live - SourceForge - local - remote
   - Optimized all tables, checked categories "[category]":
     - [field-order] adjusted field-order within table to keep different server in sync
     - [field-size] minimized field data-types according to
       http://dev.mysql.com/doc/refman/5.0/en/choosing-types.html
     - [index] checked use of prefix-index for text/binary-types
     - [index] checked all multi-column indexes if needed or missing
     - [index] assured same field-type + length for joins
     - [index] analyzed data-distribution for query-optimizer
     - [not-null] avoided NULL in fields and indexes if possible, evtl. added default
     - [no-def] removed some defaults where it makes sense to have mandatory fields
     - [unused] corrected or removed unused fields or tables to save space
     - check of sources for changes [not-null] and [no-def] signaled by '[ok']
   - Database changes worth mentioning:
     - Changes alltogether: 3x [field-order], 94x [field-size], 42x [not-null],
       42x [index] (7x drop index, 8x add index, 4x fix wrong index, 23x analyze table),
       44x [no-def], 22x [unused]
     - Changes for category [index]:
       - added index on Bio(uid,SortOrder) to accelerate bio-show and sorting
       - added indexes on Errorlog to be able to better search for errors (for admin)
       - added index on Forumlog(Action) for admin-searches
       - added index on Posts.Approved, cleanup unused PendingApproval-index
       - cleanup of MessageCorrespondents index, removed double-index for Folder_nr
       - fixed wrong index on Moves(gid,ID) -> Moves(gid,MoveNr)
       - cleanup of Ratinglog index, index on gid alone
     - Changes for category [unused]:
       - remove game-id auto-increment in MoveMessages-table
       - remove unused fields 'From_ID' and 'To_ID' in Messages-table
       - remove unused (old) tables on live-server saving 370MB of space,
         useful to reduce backup-time
       - remove unused 'OFF'-enum-value in NotesSmall/LargeMode field of Players-table
     - Changes for category [field-size] with regard to foreign-keys (keep same-length):
       - Changed type for Folders.Folder_nr from int -> tinyint
       - Changed type for Clock.ID from int -> smallint
       - Changed type for Forums.ID from int -> smallint
       - Changed type for *.SortOrder from int -> smallint
       - Changed type for *.Rating* from double -> float
   - adjusted existing DDL-change for Players.Button (after pre-db-cleanup)
   - added notes to perform database-changes and CLEANUP
   - changed SQL-layout for updates

   * init.mysql:
   - sync with last known DDL for stable-version 1.0.14 with dump from PHPMyAdmin
     of current stable live-version. Enhanced with inserts for guest-Player and
     Clock-values.

   * include/game_functions.php (allow_add_time_opponent):
   - added TODO after DB-synchronization (removal of Games.Tournament_ID)

   * change_bio.php:
   - cleanup SQL-statements (LIMIT, Bio.uid)

   * people.php:
   - cleanup SQL-statement

   * new_game.php:
   - use clearer title: add game to waiting room

   * waiting_room.php:
   - show handicap-type text "Nigiri" for according "Manual (Nigiri)"-game

   * game.php, skins/dragon/screen.css:
   - show hint to close all boundaries before passing
   - add some CSS for Game-settings, change color for ExtraInfos

   * include/message_functions.php (game_settings_form):
   - add note for manual-game 'even or handicap game'

   * tournaments/include/tournament_round.php (TournamentRound),
     tournaments/manage_tournament.php,
     tournaments/edit_round.php,
     specs/db/table-Tournaments.txt:
   - added (unfinished) first draft of TournamentRound-table

   * scripts/build-game-cluster.pl:
   - added perl-script to determine user-clusters (from wishlist), see
     http://www.dragongoserver.net/forum/read.php?forum=4&thread=4690#25424

2009-06-21 juga

   * scripts/updates/database_changes_1_0_14_to_1_0_15.mysql:
   - added (optional) cleanup of unused tables and fields on live-server saving
     several hundreds MB of data

   * include/message_functions.php (message_info_table, get_message_directions,
       message_list_query, message_list_head, message_list_body,
       message_build_user_string),
     include/std_functions.php (send_message),
     include/gui_functions.php,
     scripts/updates/database_changes_1_0_14_to_1_0_15.mysql,
     scripts/updates/fix_message_thread-1_0_15.php,
     scripts/updates/other_changes_1_0_14_to_1_0_15.txt,
     specs/db/table-Messages.txt,
     message.php, message_thread.php, people.php, search_messages.php,
     skins/dragon/screen.css, site_map.php, NEWS:
   - added new page with message-thread
     - function to show or hide all message-texts for message-thread
     - added image-links to message-thread and first-message if feasible
       - for single message
       - for message-lists on status-page, search-messages page, list-messages page
     - added Messages.Thread and Messages.Level to manage message-thread,
       server-messages have no threads
     - added script and SQL-updates to set-up message-threads for messages on server
     - adjust sending of message to manage message-thread with thread and thread-levels
-----------
copy /images/thread.gif
copy /images/msg_first.gif

-- add message-thread (without the need for recursion), (~90s + ~90s)
ALTER TABLE Messages
   ADD Level smallint NOT NULL DEFAULT '0' AFTER Type,
   ADD Thread int(11) NOT NULL DEFAULT '0' AFTER Type ;
ALTER TABLE Messages
   ADD INDEX Thread (Thread) ;

-- fill Messages.Thread with some database-queries and fix-script
-- First do preparations for fix-scripts ...
-- * step 1, init (~25s): all starting messages start a thread
UPDATE Messages SET Thread=ID WHERE ReplyTo=0 ;
-- * step 2, init (~20s): revert Thread-field for system-message as they should have no replies and no threads
UPDATE Messages AS M INNER JOIN MessageCorrespondents AS MC ON MC.mid=M.ID SET M.Thread=0 WHERE M.Thread>0 AND MC.Sender='S' ;
-- * step 3, init: shouldn't happen, but did (system-message replied) -> add thread for those
UPDATE Messages AS M INNER JOIN Messages AS M2 ON M.ReplyTo=M2.ID AND M2.ReplyTo=0 SET M2.Thread=M2.ID WHERE M.ReplyTo>0 AND M.Thread=0 AND M2.Thread=0 ;
-- * step 4, check: message-count which need message-thread assigning ... (~530.000 rows)
SELECT COUNT(*) FROM Messages WHERE ReplyTo>0 AND Thread=0 ;
-- * step 5, pre-run (~20s): set message of reply-level #1
UPDATE Messages AS M INNER JOIN Messages AS M2 ON M.ReplyTo=M2.ID AND M2.ReplyTo=0 SET M.Thread=M.ReplyTo, M.Level=1 WHERE M.ReplyTo>0 ;
-- * step 6, pre-run (~4-20s each run): set message of reply-level #2 (execute 10 times) !!
UPDATE Messages AS M INNER JOIN Messages AS M2 ON M.ReplyTo=M2.ID AND M2.Thread>0 SET M.Thread=M2.Thread, M.Level=M2.Level+1 WHERE M.ReplyTo>0 and M.Thread=0 ;
UPDATE Messages AS M INNER JOIN Messages AS M2 ON M.ReplyTo=M2.ID AND M2.Thread>0 SET M.Thread=M2.Thread, M.Level=M2.Level+1 WHERE M.ReplyTo>0 and M.Thread=0 ;
UPDATE Messages AS M INNER JOIN Messages AS M2 ON M.ReplyTo=M2.ID AND M2.Thread>0 SET M.Thread=M2.Thread, M.Level=M2.Level+1 WHERE M.ReplyTo>0 and M.Thread=0 ;
UPDATE Messages AS M INNER JOIN Messages AS M2 ON M.ReplyTo=M2.ID AND M2.Thread>0 SET M.Thread=M2.Thread, M.Level=M2.Level+1 WHERE M.ReplyTo>0 and M.Thread=0 ;
UPDATE Messages AS M INNER JOIN Messages AS M2 ON M.ReplyTo=M2.ID AND M2.Thread>0 SET M.Thread=M2.Thread, M.Level=M2.Level+1 WHERE M.ReplyTo>0 and M.Thread=0 ;
UPDATE Messages AS M INNER JOIN Messages AS M2 ON M.ReplyTo=M2.ID AND M2.Thread>0 SET M.Thread=M2.Thread, M.Level=M2.Level+1 WHERE M.ReplyTo>0 and M.Thread=0 ;
UPDATE Messages AS M INNER JOIN Messages AS M2 ON M.ReplyTo=M2.ID AND M2.Thread>0 SET M.Thread=M2.Thread, M.Level=M2.Level+1 WHERE M.ReplyTo>0 and M.Thread=0 ;
UPDATE Messages AS M INNER JOIN Messages AS M2 ON M.ReplyTo=M2.ID AND M2.Thread>0 SET M.Thread=M2.Thread, M.Level=M2.Level+1 WHERE M.ReplyTo>0 and M.Thread=0 ;
UPDATE Messages AS M INNER JOIN Messages AS M2 ON M.ReplyTo=M2.ID AND M2.Thread>0 SET M.Thread=M2.Thread, M.Level=M2.Level+1 WHERE M.ReplyTo>0 and M.Thread=0 ;
UPDATE Messages AS M INNER JOIN Messages AS M2 ON M.ReplyTo=M2.ID AND M2.Thread>0 SET M.Thread=M2.Thread, M.Level=M2.Level+1 WHERE M.ReplyTo>0 and M.Thread=0 ;
-- * step 7, check: remaining message-count that need message-thread assigning ... (~37.000 rows left)
SELECT COUNT(*) FROM Messages WHERE ReplyTo>0 AND Thread=0 ;
-- * step 8, repeat for all thread-levels until no more rows affected any more using optimized script:
--           execute (with do_it=1):   'scripts/updates/fix_message_thread-1_0_15.php'
-- * step 9, execute 'scripts/message_consistency.php'
-----------

   * include/table_columns.php (make_tablerow):
   - added way to add extra-row within same row-class setting,
     added for message-thread including texts

   * include/std_classes.php (ThreadList):
   - added class ThreadList to help managing thread-like views

   * phorum/post.php:
   - Requesting 'post.php' looks like a "spam"-attack [htaccess 404: /phorum/post.php],
     but it consumes server-resources, because redirection writes Errorlog-entries.
     So now avoid redirection with "catching" it with existing page declaring
     it as "old page".

   * phorum/index.php, phorum/list.php, phorum/read.php:
   - committed "old" forum-pages to preserve code (not needed on newer servers)

   * waiting_room.php:
   - added notes about (FH) = Free handicap

   * list_messages.php:
   - bugfix adding FOUND_ROWS-SQL-directive for listing messages

2009-06-17 juga

   * opponents.php, show_games.php, NEWS:
   - added full-page-navigation with found-rows for:
     opponents-page, my finished and running games

   * include/std_classes.php (QuerySQL, ~.useUnionAll, ~.get_select):
   - added support for pages with UNION-queries, possible because LIMIT global in UNION
   - added support for both UNION-queries: 'UNION ALL' and 'UNION DISTINCT'

   * include/table_columns.php (Table.make_next_prev_links):
   - fixed last-page calculation from found-rows (was one page too much)

2009-06-14 juga

   * include/gui_functions.php (echo_image_table),
     opponents.php, show_games.php, NEWS:
   - opponent page:
     - added table-column with link to games with current opponent
       for finished or running games; all-games treated as running
       as there is no "all games view"
     - added named filter "opp_hdl" on show-games page

   * scripts/updates/other_changes_1_0_14_to_1_0_15.txt, people.php:
   - added table-list image from silk icons collection representing table-list
-----------
copy /images/table.gif
-----------

   * include/make_game.php (create_game),
     scripts/updates/database_changes_1_0_14_to_1_0_15.mysql,
     confirm.php, gameinfo.php, join_waitingroom_game.php, send_message.php, NEWS:
   - for (newly started) double-games:
     - show reference to game and game-info page of corresponding game
     - after double-game deleted remove link-reference on game-info for remaining game
-----------
-- added double-game reference
ALTER TABLE Games
   ADD DoubleGame_ID int(11) NOT NULL DEFAULT '0' AFTER Tournament_ID;
-----------

   * include/gui_functions.php (echo_image_gameinfo),
     game.php, show_games.php, status.php:
   - use helper-func echo_image_gameinfo() to draw game-info image

   * site_map.php:
   - added DGS-wishlist, install, snapshot

   * todo.php, TODO, docs.php site_map.php:
   - removed todo-list, moved content to DGS-Wishlist on Sensei's Library
     http://senseis.xmp.net/?DGSWishlist
   - keep todo-page redirecting to DGS-wishlist on SLs to avoid breaking links

   * forum/forum_functions.php (DisplayForum.init_navi_images),
     include/classlib_game.php (GameScore.draw_score_box),
     include/classlib_userpicture.php (UserPicture.getImageHtml),
     include/game_functions.php (build_image_double_game),
     include/gui_functions.php (echo_image_vacation, echo_image_nighttime,
       echo_image_weekendclock, echo_image_admin, echo_image_online),
     include/message_functions.php (game_info_table, get_colortext_probable),
     edit_bio.php, game.php, game_comments.php, gameinfo.php, people.php,
     show_games.php, status.php:
   - used option title=null of image()-func to copy alt-text of images
   - replaced CSS-image class for (non-) stone-images: InTextStone -> InTextImage
   - cleanup (const usage, some W3C-conformity for HTML)

   * include/std_functions.php (image, build_usertype_text):
   - added option title=null for image()-func to copy alt-text of images

   * include/contacts.php (Contact.load_globals, ~.getContactSystemFlags,
       ~.getContactUserFlags, ~.parse_system_flags, ~.parse_user_flags,
       ~.format_system_flags, ~.format_user_flags),
     edit_contact.php, list_contacts.php:
   - replace load_globals() with lazy-init static funcs to return "global" values
     for user- and system-flags

   * waiting_room.php, NEWS:
   - Game-settings: move standard-handicap-placement from Handicap-column
     to Game-Settings-column as "Free-handicap" if no standard-placement used

2009-06-13 juga

   * tournaments/include/tournament_rules.php (TournamentRules,
       ~.convertTournamentRules_to_EditForm, ~.convertEditForm_to_TournamentRules):
   - keep in sync with changes on waiting-room merging NIGIRI / DOUBLE
     into MANUAL-game-setting parsing from and filling to edit-form
   - bugfix: missed parsing/filling of handicap stones
   - bugfix: parsing adj-komi, jigo-mode

   * specs/db/table-Waitingroom.txt:
   - added MANUAL-game with fix color for my-color WHITE and BLACK in waitingroom
   - added future plans for fair-komi

   * include/message_functions.php (game_info_table), NEWS:
   - Changes on game-info table for waiting-room, new-game page, invite/dispute:
     - show handicap-type with category, my-color, handicap and komi
     - show different images to represent handicap-types for "color"
     - show jigo-mode adjustment: k.0|k.5 removed 'k' -> .0|.5
     - differ between 'Even game / Handicap game' for NIGIRI-handicap-type
   - changed nigiri-handling for CONVENTIONAL and PROPER handicap-type:
     - nigiri now only used if both players have same rating,
       old behaviour for CONV-handicap-type was to make nigiri if there is no handicap
     - show NIGIRI as my-color in probable game-settings in that case
   - always show probable game-settings if calculated (conv|proper) or
     resulting my-color, handicap and komi differing from setup handicap/komi

   * include/message_functions.php (game_settings_form, game_info_table,
       build_adjust_komi, build_suggestion_shortinfo, get_colortext_probable),
     include/game_functions.php (adjust_komi, get_category_handicaptype,
       build_image_double_game),
     include/make_game.php (make_invite_game),
     add_to_waitingroom.php, join_waitingroom_game.php,
     waiting_room.php (determine_color), skins/dragon/screen.css,
     scripts/updates/database_changes_1_0_14_to_1_0_15.mysql, NEWS:
   - Changes in waiting-room / new-game page:
     - added MANUAL-game with fix color for my-color WHITE and BLACK
     - replaced Color-column with (probable) Game-Settings (mentioned in notes) with:
       my-color, handicap and komi
     - changed handicap-type filter matching on collection
       of handicap-type categories: conv, proper, nigiri, double, fix-color, manual
   - migrated and merged handicap-types NIGIRI & DOUBLE with category MANUAL
     for waiting-room, invites/disputes and tournament-rules
     - replaced 'Even game with nigiri' with MANUAL-game with my-color NIGIRI
     - replaced 'Double game' with MANUAL-game with my-color DOUBLE
     - Waitingroom.Handicaptype is mapped to category and my-color
       - CONV / PROPER   -> category CONV,   no my-color
       - NIGIRI / DOUBLE -> category MANUAL, my-color NIGIRI / DOUBLE
       - WHITE / BLACK   -> category MANUAL, my-color WHITE / BLACK
   - bugfix of strange behaviour for adjust-komi: '-0' -> 0
   - cleanup: use consts, better error-labeling, merges to avoid redundancies
   - minor changes, layouting, comments
-----------
-- added manual coloring black/white
ALTER TABLE Waitingroom
   CHANGE Handicaptype Handicaptype enum('conv','proper','nigiri','double','black','white') NOT NULL default 'conv' ;
ALTER TABLE Waitingroom
   ADD INDEX Handicaptype (Handicaptype);
-----------

   * include/rating.php (suggest_proper, suggest_conventional):
   - changed nigiri-handling for CONVENTIONAL and PROPER handicap-type
     - nigiri only used if both players have same rating,
       old behaviour for CONV-type was to make nigiri if there is no handicap
   - bugfix: returning $iamblack as int

   * include/gui_functions.php (button_TD_width_insert, button_TD_insert_width):
   - refactoring: renamed method to easier finding of insert_width-methods

   * include/std_functions.php (insert_width), include/table_columns.php (make_tablehead):
   - defined const DEFAULT_KOMI = 6.5
   - insert_width: allow to enable/disable MinWidth-class for forced with using transparent-image
   - bugfix: use style MinWidth-class to achieve height 0 not disturbing other elements in table-cells

2009-06-12 juga

   * include/message_functions.php (game_info_table, echo_game_restrictions,
       echo_accept_same_opponent, build_accept_same_opponent_array,
       build_suggestion_shortinfo),
     scripts/updates/database_changes_1_0_14_to_1_0_15.mysql,
     specs/db/table-Waitingroom.txt,
     include/quick_common.php, include/std_functions.php, error.php,
     waiting_room.php (echo_rating_limit), new_game.php,
     add_to_waitingroom.php, join_waitingroom_game.php,
     daily_cron.php, NEWS:
   - added waiting-room restriction to avoid same opponent joining too many games,
     challenger has to wait some days or is restricted by number of games to join
     - daily-cron: delete unused WaitingroomJoined-entries
   - bugfix: added check on rated-finished-games restriction, limited board-size
   - increased number of games to 1..20 (=NEWGAME_MAX_GAMES)
   - cleaned up Waitingroom.Rated/MustBeRated: removed unused enum-value 'Done'
-----------
-- accept same opponent
ALTER TABLE Waitingroom
   ADD SameOpponent tinyint signed NOT NULL default '0' AFTER MinRatedGames ;

-- added table to keep track of joined waiting-room games with opponent
CREATE TABLE WaitingroomJoined (
   opp_id int(11) NOT NULL,
   wroom_id int(11) NOT NULL,
   JoinedCount tinyint signed NOT NULL default '0',
   ExpireDate datetime NOT NULL default '0000-00-00 00:00:00',
   PRIMARY KEY (wroom_id,opp_id)
) ENGINE=MyISAM;

-- cleanup table Waitingroom removing (unused) enum-value 'Done'
ALTER TABLE Waitingroom
   CHANGE Rated Rated enum('N','Y') NOT NULL default 'N',
   CHANGE MustBeRated MustBeRated enum('N','Y') NOT NULL default 'N' ;
-----------

   * confirm.php, game.php:
   - bugfix: on delete can't stay on board

2009-06-11 juga

   * confirm.php, game.php, skins/dragon/screen.css, NEWS:
   - added 'Stay on board'-checkbox allowing to stay on board after submit move
   - removed submit-button 'submit move and go to status'
   - increased width of message-box: 50 -> 60
   - adjusted text for submit button: 'submit and go to next game' -> 'submit move'
   - adjusted text for goback button: 'Go back' -> 'Cancel move',
     renamed action: nextback -> cancel
   - query-optimize: OR -> IN
   - adjusted layout: all message submit-buttons on one line

   * include/message_functions.php (game_settings_form):
   - move Komi-adjustment below handicap-adjustment
   - added timezone-info for weekend-clock setting

2009-06-10 juga

   * waiting_room.php, NEWS:
   - added color-column indicating which color game-offerer had chosen,
     'no image shown' stands for calculated color (that's not shown,
     because it would need too much calculation on every item)

2009-06-08 juga

   * include/message_functions.php (game_settings_form):
   - added headers for game-settings-form (Time settings & Restrictions)

   * include/message_functions.php (game_settings_form, game_info_table,
       build_adjust_komi),
     include/make_game.php (create_game),
     include/game_functions.php (adjust_komi),
     tournaments/include/tournament_rules.php (TournamentRules, ~.to_string,
       ~.build_persist_query_part, ~.convertTournamentRules_to_EditForm),
     tournaments/view_tournament.php,
     scripts/updates/database_changes_1_0_14_to_1_0_15.mysql,
     add_to_waitingroom.php, waiting_room.php, NEWS:
   - added komi-adjustment: +-komi-value and jigo-mode allowing or rejecting Jigo
   - to allow jigo always round komi down on absolute value
-----------
-- game-komi adjustment & jigo mode (for Waiting room)
ALTER TABLE `Waitingroom`
   ADD `AdjKomi` decimal(6,1) signed NOT NULL default '0.0' AFTER `Handicaptype`,
   ADD `JigoMode` enum('KEEP_KOMI','ALLOW_JIGO','NO_JIGO') NOT NULL default 'KEEP_KOMI' AFTER `AdjKomi` ;

-- game-komi adjustment & jigo mode (for Tournament rules)
ALTER TABLE `TournamentRules`
   ADD `AdjKomi` decimal(6,1) signed NOT NULL default '0.0' AFTER `Handicaptype`,
   ADD `JigoMode` enum('KEEP_KOMI','ALLOW_JIGO','NO_JIGO') NOT NULL default 'KEEP_KOMI' AFTER `AdjKomi` ;
-----------

   * list_contacts.php, opponents.php users.php:
   - show user-picture icon only if feature not disabled

   * include/classlib_userconfig.php (ConfigBoard):
   - bugfix: init notes-dimensions

   * include/message_functions.php (game_settings_form):
   - reformat handicap-stone Standard Placement on right side in form

   * game.php:
   - move showing of 'Comments'-link to the right of View-move-element
   - bugfix: show scoring-info only on last move

   * game_comments.php, NEWS:
   - bugfix: include comments on PASS, SCORE and RESIGN moves
   - optimize SQL-query (removed DISTINCT)

2009-06-07 juga

   * list_messages.php, search_messages.php, waiting_room.php,
     features/list_features.php, features/list_votes.php,
     tournaments/list_participants.php, tournaments/list_tournaments.php,
     NEWS:
   - added full-page-navigation for most pages with Tables
     - Waiting room, Tournaments, Tournament participants, Messages,
       Search messages, Users, Votes, Features
     - All finished and running games, Observed games

     - NOTE: User-specific (also my) finished and running games as well as the
       opponents page can not be equipped with full-page navigation, because of
       used UNION-db-queries, which do not work correctly with SQL_CALC_FOUND_ROWS.
       UNION-queries can be replaced by disabling global-config ALLOW_SQL_UNION,
       but would need performance-testing before using this option!!
     - NOTE (revised): It is possible under certain conditions.

   * show_games.php:
   - added full-page-navigation, except for queries using UNIONs

   * include/std_classes.php (QuerySQL.has_union, ~.get_part, ~.get_select):
   - QuerySQL: handling forbidden SQL-options with UNIONs;
     especially SQL_CALC_FOUND_ROWS, HIGH_PRIORITY

   * include/table_columns.php (Table.disable_table_mode, ~.make_next_prev_links):
   - allow to disable some table-modes after constructing Table
   - bugfix on full-page-navigation: show entries even if only one page showed (needing no navi)

   * include/classlib_game.php (GameScore.draw_score_box),
     game.php (draw_score_box):
   - moved draw_score_box()-function to 'include/classlib_game.php'

   * users.php:
   - added full page-navigation using SQL_CALC_FOUND_ROWS

   * include/table_columns.php (Table, ~.set_found_rows, ~.make_next_prev_links, ~.get_query),
     include/std_classes.php (QuerySQL, ~.get_part),
     include/connect2mysql.php (mysql_found_rows),
     include/config.php,
     skins/dragon/screen.css, INSTALL, NEWS:
   - added full page-navigation for Tables using SQL_CALC_FOUND_ROWS,
     this is experimental to evaluate need of additional load on live-server
     - enabled with Table-option TABLE_ROWS_NAVI
     - added additional navigation-links and info if used
     - feature can be disabled with global config ALLOW_SQL_CALC_ROWS
     - FOUND_ROWS() must be set from outside Table-class to avoid DB-queries in it
     - FOUND_ROWS() need php.ini config "mysql.trace_mode = Off" to work
   - added page-navigation-link to start of result-set

   * edit_picture.php:
   - added note about supported image-formats (JPEG, GIF, PNG)

   * include/classlib_game.php (GameScore.calculate_score):
   - fix negative komi-output in scoring-information: + -x -> -x

2009-06-06 juga

   * include/classlib_userconfig.php (ConfigBoard.insert_default),
     include/classlib_userquota.php (UserQuota.insert_default):
   - bugfix: use correct arg on static insert_default()-method

   * include/classlib_game.php (GameScore, ~.calculate_score, ~.recalculate_score),
     include/move.php (check_remove), confirm.php, game.php:
   - check_remove: made scoring-mode explicit
   - for testing, temporarily added 2nd score-box with area-scoring for comparison

   * include/board.php (Board.load_from_db):
   - cleanup: remove un-needed arg-ref

   * scripts/sql_game_export.php:
   - added script to export game-related tables as helping "template" for local import

   * NEWS:
   - game-info, off-time (vacation/nighttime/weekend), userinfo (2 cols),
     "online"-users, mark admin users, optimizations

   * userinfo.php, include/quick_common.php, skins/dragon/screen.css:
   - show user-info table in two columns (less game- and more-game-related info)
     with nearly equal number of rows
   - show additional vacation-icon if user on vacation
   - show night-icon when player is in sleeping-time (near Nighttime)
   - show full range of night-time (from - to)
   - bugfix: added mysql_free_result for bio-infos

   * include/time_functions.php (is_hour_clock_run, is_weekend, is_weekend_clock,
       is_weekend_clock_stopped, is_vacation_clock, is_nighttime_clock),
     include/game_functions.php (get_to_move),
     gameinfo.php, game.php:
   - show images for players being off-time for vacation, sleep-time, weekend-clock,
     show context-specific hint-tip on images
   - gameinfo: show current clock-status and reason why it is stopped (vacation, sleep-time, weekend)
   - show vacation-icon besides 'On vacation'-text if user on vacation

   * include/time_functions.php (get_clock_used):
   - bugfix: PHP5-adjustments for checking on invalid timestamp,
     use date-formatting without leading zeros

   * game.php:
   - replaced red-colored 'On vacation'-text with vacation-icon

   * gameinfo.php, skins/dragon/screen.css:
   - bugfix: reduce remaining-time by current number of ticks for player to move
   - add info which player (color) has to move next
   - use CSS to show empty-cells

   * status.php:
   - bugfix on games order on Lastchanged (was switched accidentally on rev 1.111)
   - show vacation-icon besides 'On vacation'-text if user on vacation
   - added hideable game-info column in games-list with link to respective gameinfo-page
   - added image-icon (house) for users being "online" (=lastaccess) within certain time range

   * list_contacts.php, users.php, opponents.php, include/std_functions.php:
   - added image-icon (house) for users being "online" (=lastaccess) within certain time range

   * forum/forum_functions.php (DisplayForum.draw_post, ForumUser),
     userinfo.php:
   - forum: show admin-icon near author-info for executive-user with link to people with executives
   - userinfo: show admin-icon on Dragon executives near user-id

   * include/gui_functions.php (echo_image_vacation, echo_image_nighttime,
       echo_image_weekendclock, echo_image_admin, echo_image_online, echo_off_time):
   - added methods to show icon for vacation, night-time, weekend-clock,
     being executive-admin, being "online", in off-time

   * people.php (get_executives), include/std_functions.php (section),
     scripts/updates/other_changes_1_0_14_to_1_0_15.txt:
   - added section with all Dragon executives matched by ADMINGROUP_EXECUTIVE,
     show admin-icon for Dragon executives (FAQ-editors, forum moderators)
   - added HTML-anchors for all sections
   - added images for: vacation, night-time
   - added modified icons from silk-collection for:
     admin (Dragon executive), being "online", stopped-weekend-clock
-----------
copy /images/admin.gif
copy /images/online.gif
copy /images/night.gif
copy /images/vacation.gif
copy /images/wclock_stop.gif
-----------

   * confirm.php:
   - optimized SQL-query for skip-to-next-game allowing to use Lastchanged-index

   * clock_tick.php:
   - changed SQL-query using BETWEEN..AND
   - added more comments on sleeping-time

   * admin_admins.php:
   - bugfix with db-query

   * INSTALL:
   - need GD-version 2.x at least for image-upload

2009-05-24 juga

   * include/filterlib_country.php (FilterCountry.get_input_element,
       ~.getFilterCountries):
   - cleanup: refactored static-init of _FILTERC-array into lazy-init where used

   * include/countries.php (getCountryText, getCountryFlagImage),
     change_profile.php, edit_profile.php, list_contacts.php, opponents.php,
     userinfo.php, users.php, waiting_room.php, tournaments/list_participants.php,
     scripts/README.developers:
   - fixed init of globals by lazy-loading
     - T_(..) needs $tr[] array to be set beforehand
     - lazy-init of countries-array
     - lazy-init of filter-countries
   - replaced global COUNTRIES-array with functions to check/get
     country-code/-text and country-flag-image

   * include/std_functions.php (basic_safe),
     include/utilities.php (basic_safe):
   - moved basic_safe() from std_functions.php to utilities.php

   * include/languages.php:
   - added known languages (for later)

2009-05-23 juga

   * features/lib_votes.php (Feature.update_vote, ~.fix_user_quota_feature_points,
       ~.build_feature_notes; FeatureVote.build_query_featurevote_list,
       ~.load_featurevote_summary),
     features/edit_feature.php, features/list_votes.php:
   - add feature-points to voters if feature-status changes ...
     - to NACK: return all voted points if feature rejected
     - to LIVE: return minimum of own-vote and average-vote
   - bugfix on consuming feature-points for unvoted feature
   - bugfix: handle abstention from voting (0-vote) by ignoring it in calculations
   - changed signature for FeatureVote::build_query_featurevote_list()
   - cleanup (mysql_query -> db_query), bugfixes (wrong var),
     minor text-adjustment for feature-notes

   * scripts/updates/database_changes_1_0_14_to_1_0_15.mysql,
     features/list_features.php:
   - enhanced feature my-vote filter: allow search for <0 =0 >0 points
-----------
-- need restriction on voted points
ALTER TABLE FeatureVote
   ADD INDEX Points (Points) ;
-----------

   * include/classlib_userconfig.php, features/list_features.php,
   * scripts/updates/database_changes_1_0_14_to_1_0_15.mysql:
   - added table-column-set for feature-list: ColumnsFeatureList
-----------
-- table-column-set for feature-list
ALTER TABLE ConfigPages
   ADD ColumnsFeatureList int(11) NOT NULL default '-1' AFTER ColumnsGamesObservedAll2 ;
-----------

   * features/lib_votes.php (Feature.update_vote, FeatureVote.check_points,
       ~.getFeaturePointsText),
     features/list_features.php, features/list_votes.php,
     features/vote_feature.php, features/edit_feature.php,
     error.php:
   - show and keep track of remaining feature-points with UserQuota
   - refined feature-searching on subject: min-chars 4 -> 2, mark matches
   - wordwrap feature-subject, reduced some feature-notes

   * include/classlib_userquota.php (UserQuota),
     scripts/updates/database_changes_1_0_14_to_1_0_15.mysql,
     specs/db/table-UserQuota.txt,
     do_registration.php,
     daily_cron.php:
   - added UserQuota to keep track of remaining feature-points
     that can be used to vote on features
   - increase users feature-points every 10 days by 1 point
-----------
-- added table for points-management and quota-like fields
CREATE TABLE UserQuota (
   uid int(11) NOT NULL,
   FeaturePoints smallint(5) NOT NULL default '25',
   FeaturePointsUpdated datetime NOT NULL default '0000-00-00 00:00:00',
   PRIMARY KEY (uid),
   KEY FeaturePointsUpdated (FeaturePointsUpdated)
) ENGINE=MyISAM;

-- create UserQuota for all players
INSERT UserQuota (uid,FeaturePointsUpdated)
   SELECT ID,NOW() FROM Players ;
-----------

   * features/vote_feature.php:
   - bugfix: show subject and description tag-formatting

   * features/list_votes.php:
   - added features-notes
   - renamed title: Feature vote list -> Feature vote result list

   * include/std_functions.php (start_page):
   - renamed main-menu item: Vote -> Feature vote

   * forum/list.php:
   - thread list: switch columns Hits <-> PostCount

2009-05-21 juga

   * users.php:
   - added table-row-number (in 1st column)

   * include/std_functions.php, admin_admins.php, admin_show_users.php,
     features/lib_votes.php (Feature.delete_feature, ~.is_admin),
     features/edit_feature.php, NEWS:
   - added voting-admin (ADMIN_VOTE) as admin-executive
   - allow feature-deletion & editor-showing to voting-admin

   * include/std_functions.php (start_page, make_menu_horizontal, make_menu_vertical):
   - allowed multi-texts in std-menu
   - changed Vote-link referring to feature-vote-results

   * site_map.php:
   - added links for feature-voting

   * features/lib_votes.php (Feature, ~.get_query_fields),
     scripts/updates/database_changes_1_0_14_to_1_0_15.mysql,
     features/list_features.php, features/list_votes.php,
     features/edit_feature.php, features/vote_feature.php, NEWS:
   - increase features-subject-maxlen: 120 -> 255, wrapped long feature-subject
   - cleanup
     - optimized query for vote-selection
     - renamed page-titles and bottom-links
     - removed Lastchanged from table-list (shown on detail-view anyway)
     - removed Editor from table-list (shown on detail-view anyway)
     - added more notes
-----------
-- allow longer Feature-subject
ALTER TABLE FeatureList
   CHANGE Subject Subject varchar(255) NOT NULL ;
-----------

   * include/classlib_userpicture.php (UserPicture.getPicturePath, ~.getImageHtml),
     include/quick_common.php,
     edit_picture.php, userinfo.php, list_contacts.php, opponents.php, users.php,
     scripts/updates/other_changes_1_0_14_to_1_0_15.txt, NEWS:
   - added indicator to show if user has an existing user-picture
   - refactoring: moved code to display user-picture into UserPicture::getImageHtml()
   - changed user-picture new-URL-suffix to readable date-format

   * people.php:
   - added picture-icon to show user has uploaded a picture (taken from silk icons)
-----------
copy /images/picture.gif
-----------

   * include/table_columns.php (Table, ~.make_table_head, ~.make_filter_row,
       ~.get_displayed_tableheads; TableHead):
   - allow image in table-header
     - added TableHead-class to manage table-headers
     - removed unused get_displayed_tableheads()-function

2009-05-20 juga

   * include/classlib_upload.php (UploadImageFile.*),
     include/classlib_userpicture.php, edit_picture.php:
   - removed resizing(-attempt) of user-picture
     - not really needed, users should upload "fitting" images
     - resizing needs too much special treatments for transparency
   - restricted max. upload filesize: 100KB -> 30KB
   - UploadImageFile.need_resize as indicator for resizing-need
   - adjusted error-texts

   * site_map.php:
   - added edit of user-picture

   * edit_picture.php:
   - added notes on uploading user-picture

2009-05-17 juga

   * admin_show_users.php, admin_users.php:
   - enhanced admin-options DENY_HIDE_BIO and DENY_EDIT_BIO to restrict
     user-picture too

   * include/classlib_upload.php (ImageFileUpload),
     include/classlib_userpicture.php (UserPicture),
     scripts/updates/database_changes_1_0_14_to_1_0_15.mysql,
     specs/db/table-Players.txt,
     include/config.php, INSTALL,
     edit_picture.php, error.php, userinfo.php, NEWS:
   - added user-picture on user-info page (support for GIF, JPEG, PNG)
   - added page to add or remove user-picture
   - restricted filesize and image dimensions
   - added config for USERPIC_FOLDER to store uploaded user-pictures,
     only use if USERPIC_FOLDER-config set
-----------
-- added user-picture
ALTER TABLE Players
   ADD UserPicture varchar(48) NOT NULL default '' ;
-----------

   * include/form_functions.php (Form, ~.set_form_attributes, ~.add_form_attribute,
       ~.create_form_string, ~.create_string_func_file, ~.print_start,
       ~.print_start_default, ~.print_insert_file):
   - needed for user-picture file-upload:
     - added neccessary form-attributes and form-element for FILE-upload-inputbox
     - enhanced signature of print_start(_default) with additional form-attributes,
       create_form_string: changed order of building form-string

   * tournaments/edit_properties.php (isNumberOrEmpty),
     tournaments/include/tournament_utils.php (TournamentUtils.isNumberOrEmpty):
   - cleanup: moved isNumberOrEmpty() to TournamentUtils::isNumberOrEmpty()

   * tournaments/edit_director.php, tournaments/list_directors.php:
   - added link to manage tournament

   * error.php:
   - added tournament-rules errors: tournament_miss_rules

   * include/std_functions.php (start_page), bookmark.php:
   - added system-bookmark to edit-profile as shortcut

2009-05-10 juga

   * bookmark.php, include/std_functions.php (start_page), NEWS:
   - added bookmarks in top-bar with 3 most requested queries
     - latest forum posts
     - players & opponents "online"

   * include/classlib_game.php (GameScore),
     include/board.php (Board.fill_game_score, ~.create_territories_and_score),
     include/move.php (check_remove),
     confirm.php, game.php (draw_score_box), skins/dragon/screen.css, NEWS:
   - added scoring information on game-page
     - show score-box in scoring step and for finished games handling
       to left of game-board with scoring data (dame, stone, dead-stones,
       territory, prisoners, komi, handicap) if needed for scoring mode
     - prepare for handling territory and area scoring
     - refactored check_remove() returning GameScore-object
       encapsulating score-calculation
   - fixed extra-info-table images (adding alternative-text) on game-page

2009-04-04 juga

   * include/std_functions.php (make_menu, make_menu_link),
     tournaments/manage_tournament.php, skins/dragon/screen.css, NEWS:
   - listed management-operations with descriptions and admin-links

   * site_map.php:
   - added tournament-rules, tournament-manager

   * tournaments/manage_tournament.php, tournaments/edit_tournament.php,
     tournaments/edit_participant.php, tournaments/edit_properties.php,
     tournaments/edit_rules.php, tournaments/view_tournament.php:
   - added separate page for tournament management with all admin-links
     and important info

   * status.php:
   - fix: check ALLOW_TOURNAMENTS-config for "My tournaments"-link

   * tournaments/view_tournament.php, skins/dragon/screen.css:
   - added CSS for Table_info for Game-rules and tournament status
   - adjusted output of tournament game-rules

   * tournaments/view_tournament.php:
   - added Tournament-status with current round, number of rounds,
     current tournament-status, registration status of user)

   * tournaments/include/tournament.php (Tournament.allow_create),
     tournaments/list_tournaments.php:
   - allow only tournament-admin to create new tournaments,
     this is in preparation for a release longing to support the official
     Dragon-tournament but with an "uncomplete" tournament-feature

   * tournaments/include/tournament_rules.php (
       TournamentRules.build_persist_query_part, ~.needsCalculatedHandicap,
       ~.needsCalculatedKomi, ~.getHandicaptypeText),
     tournaments/view_tournament.php:
   - show ruleset with current tournament round and game-related settings

   * include/table_infos.php (Table_info.make_table),
     include/message_functions.php (game_info_table),
     skins/dragon/screen.css:
   - renamed Table_info CSS-table-id suffix: Infos -> TableInfos
     to avoid "clash" with other CSS-id 'GameInfos'

   * waiting_room.php:
   - hide notes-section if showing game-info

   * include/std_functions.php, skins/dragon/screen.css, NEWS:
   - link-markup with optional text
   - added own CSS-class 'linkmarkup' for link-markup with normal layout at first

   * tournaments/list_participants.php:
   - added link to edit-participants

   * admin_show_errorlog.php, NEWS:
   - added filters on Errorlog: ID, Date, IP

2009-04-03 juga

   * include/message_functions.php (game_settings_form),
     tournaments/include/tournament_rules.php (TournamentRules),
     tournaments/edit_rules.php, tournaments/edit_tournament.php,
     scripts/updates/database_changes_1_0_14_to_1_0_15.mysql,
     specs/db/table-Tournaments.txt, NEWS:
   - added creating and editing of (single) tournament-ruleset
   - adjusted game-settings-form for editing Tournemant-rules (GSET_TOURNAMENT),
     - supported settings are: size, handicap-types (conventional/proper/even),
       handicap-adjustment, handicap-placement, time-settings, weekendclock, rated
     - added consts GSET_MSG_DISPUTE/INVITE/WAITINGROOM/TOURNAMENT
-----------
-- added tournament-rules with game-settings
CREATE TABLE TournamentRules (
   ID int(11) NOT NULL auto_increment,
   tid int(11) NOT NULL,
   Lastchanged datetime NOT NULL default '0000-00-00 00:00:00',
   Flags smallint(5) unsigned NOT NULL default '0',
   Size int(11) NOT NULL default '19',
   Handicaptype enum('CONV','PROPER','NIGIRI','DOUBLE') NOT NULL default 'CONV',
   Handicap int(11) NOT NULL default '0',
   Komi decimal(6,1) NOT NULL default '6.5',
   AdjHandicap tinyint signed NOT NULL default '0',
   MinHandicap tinyint signed NOT NULL default '0',
   MaxHandicap tinyint signed NOT NULL default '127',
   StdHandicap enum('N','Y') NOT NULL default 'N',
   Maintime int(11) NOT NULL default '0',
   Byotype enum('JAP','CAN','FIS') NOT NULL default 'JAP',
   Byotime int(11) NOT NULL default '0',
   Byoperiods int(11) NOT NULL default '0',
   WeekendClock enum('N','Y') NOT NULL default 'Y',
   Rated enum('N','Y') NOT NULL default 'N',
   Notes text NOT NULL,
   PRIMARY KEY (ID),
   KEY tid (tid)
) ENGINE=MyISAM;
-----------

   * message.php, new_game.php:
   - replaced strings with consts GSET_MSG_DISPUTE/INVITE/WAITINGROOM

   * error.php:
   - show debug-messages with sensitive data (db-message) only for admin user

   * tournaments/edit_participant.php:
   - added "Manage tournament" bottom-link

   * tournaments/edit_properties.php:
   - added tournament-title

   * tournaments/edit_tournament.php:
   - changed page-title to "Tournament Management"

2009-04-01 juga

   * error.php:
   - output Errorlog.ID only on "irregular" errors where useful
   - removed unused error-codes: mysql_update_player, no_action, no_game_nr, not_a_player,
     couldnt_make_backup, couldnt_open_transl_file, admin_no_longer_admin_admin

2009-03-29 juga

   * tournaments/include/tournament.php (Tournament, ~.formatRound, ~.getRoundLimitText,
       ~.build_persist_query_part, ~.new_from_row),
     scripts/updates/database_changes_1_0_14_to_1_0_15.mysql, specs/db/table-Tournaments.txt,
     tournaments/edit_participant.php, tournaments/edit_tournament.php,
     tournaments/list_tournaments.php, tournaments/register.php,
     tournaments/view_tournament.php:
   - added handling of Tournament-rounds in Tournament-table: Rounds, CurrentRound
-----------
-- added tournament-rounds
ALTER TABLE Tournament
   ADD Rounds int(11) NOT NULL default '1',
   ADD CurrentRound int(11) NOT NULL default '1' ;
-----------

   * tournaments/include/tournament_properties.php (TournamentProperties,
       ~.checkUserRegistration, ~._load_user, ~.build_query_sql),
     tournaments/include/tournament_participant.php (
       TournamentParticipant.count_tournament_participants, ~.build_query_sql, ~.getFlagsText),
     tournaments/include/tournament.php (Tournament, ~.allow_register),
     include/classlib_user.php (User, ~.setRating, ~.hasRating, ~.matchRating,
       ~.to_string, ~.new_from_row),
     include/gui_functions.php (echo_notes),
     tournaments/edit_participant.php, tournaments/register.php,
     tournaments/view_tournament.php, skins/dragon/screen.css, NEWS:
   - check user for tournament-registration restrictions
     - show registration restrictions for selected player
     - disallow registration for user, but allow for TD
     - mark user-registration with VIOLATE-flag if violated registration-restrictions by TD
   - User-class: added loading of PlayerGames-fields RatedGames, Finished for rated- and finished games

   * tournaments/view_tournament.php:
   - show registration restrictions in registration-section
   - show all registration-status of TPs

   * tournaments/include/tournament_properties.php (TournamentProperties,
       ~.checkUserRegistration, ~._load_user, ~.build_query_sql),
     scripts/updates/database_changes_1_0_14_to_1_0_15.mysql, specs/db/table-Tournaments.txt,
     tournaments/edit_properties.php, tournaments/view_tournament.php:
   - removed TournamentProperties.UserMinMoves: user can't see it, so bad to control

   * tournaments/include/tournament_utils.php (TournamentUtils.formatDate),
     tournaments/edit_tournament.php, tournaments/list_participants.php,
     tournaments/view_tournament.php:
   - moved date-formatting into TournamentUtils
   - minor cleanup

   * features/edit_feature.php, features/list_features.php,
     features/vote_feature.php, forum/index.php, NEWS:
   - marked admin bottom-links with CSS

   * include/error_functions.php (Error.add_error, err_log), error.php, NEWS:
   - output Erroglog-ID as [ERRLOG123] for easier debugging and error-location
   - output debug-message except if containing sensitive-data
   - added missing error-code 'mail_failure'

   * tournaments/list_participants.php, NEWS:
   - show table row-number

   * include/table_columns.php (Table, ~.add_tablehead, ~.is_column_displayed,
       ~.add_row, ~.make_table, ~.add_or_del_column, ~.make_tablehead,
       ~.parse_table_attbs, ~.make_table_filter, ~.make_tablerow, ~.build_cell_rownum):
   - added Table-config TABLE_ROW_NUM (on column-id #0) to show row-number on each row-line

   * waiting_room.php, NEWS:
   - simplified "suitable" games restrictions
   - added notes about suitable games

   * new_game.php (add_new_game_form), waiting_room.php (add_new_game_form),
     include/config.php, include/std_functions.php (start_page), NEWS:
   - splitted new-game form from waiting-room into separate new-game page
   - added new-game page in main-menu with access-key [n]

   * site_map.php:
   - added intro, tournaments (mine, management), new-game, site-map, logout
   - changed pos of: statistics, Admin/Translate-link
   - shortened/adjusted texts for bottom-link

   * edit_folders.php, status.php:
   - shortened/adjusted texts for bottom-link

   * userinfo.php, skins/dragon/screen.css:
   - use CSS for admin-links with lighter green

   * features/lib_votes.php (Feature.build_feature_notes):
   - removed user vote-restriction on user-moves (can't be seen everywhere on DGS pages)
   - fixed notes-text

   * tournaments/include/tournament_properties.php (TournamentProperties.build_notes):
   - fixed text

2009-03-27 juga

   * include/rating.php (getRatingArray),
     tournaments/edit_properties.php, waiting_room.php:
   - added getRatingArray() to get array with 30k..9dan (used for selectbox)

   * tournaments/include/tournament_properties.php (TournamentProperties,
       ~.getRatingUseModeText, ~.build_notes),
     tournaments/edit_properties.php, tournaments/view_tournament.php,
     scripts/updates/database_changes_1_0_14_to_1_0_15.mysql,
     specs/db/table-Tournaments.txt:
   - added edit-page for Tournament-properties for registration-restrictions
   - bugfixes (insert, defaults), text changes
   - added notes for tournament-properties-edit page

   * tournaments/edit_tournament.php:
   - added edit-properties in bottom-menu-link
   - removed unnecessary <center>-tags

   * include/std_functions.php:
   - added const RATING_9DAN

   * tournaments/include/tournament_utils.php (normalizeRating):
   - added numeric-check on rating

   * tournaments/edit_participant.php:
   - use translated texts for edits

2009-03-24 juga

   * tournaments/include/tournament_properties.php (TournamentProperties),
     scripts/updates/database_changes_1_0_14_to_1_0_15.mysql,
     specs/db/table-Tournaments.txt:
   - added TournamentProperties-table and persistence-layer-class to manage it
-----------
-- manage Tournament-Properties with restrictions for register-phase
CREATE TABLE TournamentProperties (
   tid int(11) NOT NULL,
   Lastchanged datetime NOT NULL default '0000-00-00 00:00:00',
   MinParticipants smallint NOT NULL default '2',
   MaxParticipants smallint NOT NULL default '0',
   RatingUseMode enum('COPY_CUSTOM','CURR_FIX','COPY_FIX','ENTER_FIX') NOT NULL default 'COPY_CUSTOM',
   RegisterEndTime datetime NOT NULL default '0000-00-00 00:00:00',
   UserMinRating double NOT NULL default '-9999',
   UserMaxRating double NOT NULL default '-9999',
   UserRated enum('N','Y') NOT NULL default 'N',
   UserMinGamesFinished smallint NOT NULL default '0',
   UserMinGamesRated smallint NOT NULL default '0',
   Notes text NOT NULL,
   PRIMARY KEY (tid)
) ENGINE=MyISAM;
-----------

   * tournaments/include/tournament_utils.php (TournamentUtils.isAdmin,
       ~.parseDate, ~.normalizeRating),
     tournaments/include/tournament_participant.php (TournamentParticipant.setRating),
     tournaments/include/tournament.php (Tournament.isAdmin, ~.parseDate),
     tournaments/edit_tournament.php, tournaments/list_tournaments.php:
   - moved some general consts and functions into tournament_utils.php

2009-03-23 juga

   * add_to_waitingroom.php, waiting_room.php, NEWS,
     include/message_functions.php (game_info_table),
     include/rating.php (echo_rating),
     scripts/updates/database_changes_1_0_14_to_1_0_15.mysql:
   - WaitingRoom: added (optional) minimum number of rated finished games
-----------
-- add required number of finished rated games
ALTER TABLE `Waitingroom`
   ADD `MinRatedGames` smallint NOT NULL default '0' AFTER `Ratingmax` ;
-----------

   * features/lib_votes.php (Feature.build_feature_notes),
     tournaments/view_tournament.php:
   - fixes translation-texts

   * NEWS:
   - tournaments (registration-edit for TDs, invite-handling)
   - added rating-type conversion: added KGS-rank, added DGS-rating
   - status page: open tournament-application, "My tournaments"-link

   * status.php, include/classlib_userconfig.php,
     tournaments/list_tournaments.php, tournaments/list_participants.php:
   - show open tournament-application of user
   - added bottom-menu-link to users tournament-list as "My tournaments"
   - added table-column-set ColumnsStatusTournaments:
     tournaments-list on status page
   - added table-column-set ColumnsTDTournamentParticipants:
     tournament-participants-list for TDs
-----------
-- table-column-set for status-tournaments-list
ALTER TABLE ConfigPages
   ADD ColumnsStatusTournaments int(11) NOT NULL default '-1' AFTER `ColumnsStatusGames`;

-- table-column-set for tournament-participant-list for TD
ALTER TABLE ConfigPages
   ADD ColumnsTDTournamentParticipants int(11) NOT NULL default '-1' ;
-----------

   * tournaments/include/tournament_participant.php (TournamentParticipant,
       ~.setStatus, ~.has_rating, ~.to_string, ~.build_persist_query_part),
     tournaments/edit_participant.php, tournaments/edit_tournament.php,
     tournaments/view_tournament.php, tournaments/register.php,
     site_map.php, skins/dragon/screen.css,
     scripts/updates/database_changes_1_0_14_to_1_0_15.mysql,
     scripts/updates/other_changes_1_0_14_to_1_0_15.txt,
     specs/db/table-Tournaments.txt:
   - added admin/tournament-director (TD) registration-edit on tournament-participants
     - edit customized rating and starting round
     - change user registration-status between: unset, APPLY, REGISTER, INVITE
     - added UserMessage, AdminMessage
   - added invitation-handling for user and TDs
     - approve invite or decline invite (leading to edit-invite)
     - renamed bottom-links 'Invite user' -> 'Edit participants'
   - registration:
     - added TP-flags: invited, ack-invite, ack-apply
     - don't show changeable fields when on invite-status or deleting user
   - minor changes (CSS, status-texts, notes)
-----------
-- added message-texts for talk between TD and participant-user
ALTER TABLE TournamentParticipant
   ADD UserMessage text NOT NULL,
   ADD AdminMessage text NOT NULL ;
-----------

   * tournaments/list_participants.php:
   - changed table-columns:
     - made registration-id optional
     - show status also for normal-user (hideable)
     - show current user rating if no tourney-rating set
     - replaced Notes-column with column indicating presence of Notes/User-/AdminMessage,
       removed notes-filter
   - minor changes, bugfixes

   * include/std_classes.php (ListIterator.addItem, ~.to_string),
     tournaments/include/tournament.php (Tournament.load_tournaments),
     tournaments/include/tournament_director.php (TournamentDirector.load_tournament_directors),
     tournaments/list_directors.php, tournaments/list_participants.php,
     tournaments/list_tournaments.php:
   - ListIterator: changed item-content to store original database-row for item

   * include/rating.php (is_valid_rating, echo_rating, getRatingTypes, convert_to_rating),
     change_profile.php, edit_profile.php:
   - moved rating-conversion-types into include/rating.php
   - added rating-types:
     - added 'kgs' with interpolation-table from http://senseis.xmp.net/?RankWorldwideComparison
     - added 'dragonrating' expecting ELO-rating, renamed 'dragonrating' -> 'dragonrank'
   - bugfixes, enhancements, minor changes

   * include/classlib_user.php (User, ~.to_string, ~.build_query_sql,
       ~.new_from_row, ~.load_user_query, ~.load_user, ~.load_user_by_handle):
   - added reading of Players.RatingStatus, added funcs to load user

2009-03-22 juga

   * tournaments/include/tournament.php (Tournament.getStatusText),
     tournaments/edit_tournament.php:
   - bugfix: get statustext for ADM also for non-admin

   * tournaments/include/tournament_director.php (TournamentDirector.build_query_sql),
     tournaments/list_directors.php:
   - fixed user-ref-link for tournament-directors-list (needed to read Players.ID)

   * include/classlib_profile.php, tournaments/list_directors.php,
     tournaments/list_participants.php, tournaments/list_tournaments.php:
   - renamed tournament-profile-consts: .._LIST -> ..S, e.g.
     PROFTYPE_FILTER_TOURNAMENT_LIST -> PROFTYPE_FILTER_TOURNAMENTS

   * NEWS:
   - tournaments (round-robin, list, scopes, registration, <tourney>-markup)
   - admin-roles (ADMIN_TOURNAMENT), server-configuration

2009-03-21 juga

   * tournaments/list_tournaments.php:
   - added role-search for participating user and tournament director
   - added link to return to show ALL tournaments

   * tournaments/edit_director.php,
     skins/dragon/screen.css,
     tournaments/edit_tournament.php,
     tournaments/list_directors.php,
     tournaments/view_tournament.php:
   - added checks, if tournament-editing is allowed
   - added checks, if adding/deleting tournament directors is allowed
   - mark admin-bottom-links with CSS
   - removed Tournaments-link from bottom-menu
   - separate preview for edit-tournament: title and description

   * tournaments/list_directors.php:
   - adjust text for sending user-message
   - introduced User-class to be used for Players-table-related data

   * tournaments/view_tournament.php:
   - added basic registration for tournament participants
     - show number of completed registrations
     - show number of registrations on other stati for admins/TDs only
     - show a users registration status
   - added general information section common to all tournaments,
     cleaned up section with tournament-title and description
   - added own set with "bottom"-links for each page-section

   * tournaments/include/tournament_participant.php (TournamentParticipant),
     scripts/updates/database_changes_1_0_14_to_1_0_15.mysql,
     specs/db/table-Tournaments.txt,
     tournaments/include/tournament.php (Tournament.allow_register),
     include/classlib_profile.php,
     tournaments/list_participants.php,
     tournaments/register.php,
     tournaments/view_tournament.php,
     skins/dragon/screen.css,
     error.php, site_map.php:
   - added basic registration for tournament participants
     - list of participants of a tournament
     - tournament registration page for users
   - added CSS for tournament-view, registration
-----------
-- manage Tournament-Participants
CREATE TABLE TournamentParticipant (
   ID int(11) NOT NULL auto_increment,
   tid int(11) NOT NULL,
   uid int(11) NOT NULL,
   Status enum('APPLY','REGISTER','INVITE') NOT NULL default 'APPLY',
   Flags smallint(5) unsigned NOT NULL default '0',
   Rating double NOT NULL default '-9999',
   StartRound tinyint(3) unsigned NOT NULL default '1',
   AuthToken varchar(32) NOT NULL default '',
   Created datetime NOT NULL default '0000-00-00 00:00:00',
   Lastchanged datetime NOT NULL default '0000-00-00 00:00:00',
   Comment varchar(60) NOT NULL default '',
   Notes text NOT NULL,
   PRIMARY KEY (ID),
   KEY tid (tid),
   KEY uid (uid)
) ENGINE=MyISAM;
-----------

   * include/gui_functions.php (echo_notes),
     features/lib_votes.php (Feature.build_feature_notes),
     features/edit_feature.php, features/list_features.php,
     tournaments/include/tournament.php (Tournament.build_notes, ~.getStatusText)
     tournaments/edit_tournament.php:
   - generalized Feature::echo_feature_notes()-func into echo_notes()-func
   - added tournament notes with status-legend

   * admin_admins.php, admin_show_users.php, error.php,
     tournaments/include/tournament.php (Tournament.allow_register),
     scripts/updates/database_changes_1_0_14_to_1_0_15.mysql:
   - added admin-role for tournament-admin: ADMIN_TOURNAMENT,
     replaced ADMIN_DEVELOPER with tournament-admin
   - removed admin-role ADMIN_ADD_ADMIN,
     one admin-role SUPERADMIN is enough to manage admins (add new and edit)
   - SUPERADMIN can't remove SUPERADMIN-flag for himself
   - minor changes (cleanup, comments, simplified URL-args)
-----------
-- removed ADMIN_ADD_ADMIN-role (has been merged with ADMIN_SUPERADMIN-role)
UPDATE Players SET Adminlevel=Adminlevel & ~0x20 WHERE Adminlevel > 0 ;
-----------

   * include/filter.php (SearchFilter.get_query),
     specs/filters.txt:
   - added filter-option FC_QUERYSQL to add arbitrary QuerySQL
     to filter-query if filter-value set

   * include/std_functions.php (make_menu, is_logged_in):
   - changed admin-roles:
     - added tournament-admin ADMIN_TOURNAMENT, added in executives-group
     - removed ADMIN_ADD_ADMIN, merged into admin-role SUPERADMIN
   - make_menu: added arg to disable access-key in links,
     link-values can be arrays with additional attributes for <a>-tag
   - is_logged_in: addded Lastaccess in $player_row

   * include/classlib_user.php (User),
     tournaments/include/tournament_director.php (TournamentDirector):
   - added User-class to represent some basic Players-table related data

   * include/classlib_userconfig.php (ConfigBoard.update_all),
     scripts/updates/database_changes_1_0_14_to_1_0_15.mysql:
   - fixed query for ConfigBoard-update (missed quotes, fixed query-syntax)
   - undo rename of table-column-set: ColumnsTournamentList -> ColumnsTournaments
   - added table-column-set for tournament-participant-list: ColumnsTournamentParticipants
-----------
-- undo rename of table-column-set for tournament-list
ALTER TABLE ConfigPages
   CHANGE ColumnsTournamentList ColumnsTournaments int(11) NOT NULL default '-1' ;

-- table-column-set for tournament-participant-list
ALTER TABLE ConfigPages
   ADD ColumnsTournamentParticipants int(11) NOT NULL default '-1' ;
-----------

   * site_map.php, status.php:
   - fixed URL for games i'm observing

2009-03-09 juga

   * js/goeditor.js:
   - used original pictures (found on SourceForge.net) for active/inactive tool,
     renamed original bl/gr.gif -> blue/grey.gif

   * goban_editor.php,
     include/std_functions.php (start_html, start_page),
     js/goban_editor.js,
     skins/dragon/screen.css:
   - added playing ground "goban_editor.php" for new Goban-editor using
     manual-edit and/or JavaScript-based editor, but also included
     old go-diagram-editor which is JavaScript-based too
   - added config-switch ALLOW_GOBAN_EDITOR to activate new Goban-editor
   - included JavaScript-file "js/goban_editor.js" into page
     if activated by ALLOW_GOBAN_EDITOR

   * forum/forum_functions.php (DisplayForum, ~.setConfigBoard,
       ~.forum_message_box, ~.draw_post):
   - added <igoban>-tag for "inline"-goban go-board

   * include/classlib_goban.php (Goban, MarkupHandlerGoban),
     include/goban_handler_gfx.php,
     include/goban_handler_sl.php:
   - added Goban-class as container to manage go-board with different
     input/output-formats
   - added MarkupHandlerGoban-class to handle <igoban>-tag with "inline"-goban
   - added GobanHandler for Goban-object to output as graphical-oriented board
   - added GobanHandler for reading/parsing the "Sensei's Library" goban-format

   * include/coords.php (is_hoshi):
   - enhanced method to be able to check for hoshi on non-square boards

   * include/board.php (Board):
   - added defined-check on EDGE_SIZE-definition (copied in other files to avoid include)
   - added comments for graphical board-output to "keep-in-sync"

   * include/GoDiagram.php (GoDiagram, ~.set_values_from_goban_tag, ~.echo_board,
       ~.echo_editor, extract_value, create_godiagrams),
     forum/forum_functions.php (DisplayForum, ~.setConfigBoard,
       ~.forum_message_box, ~.draw_post),
     forum/post.php (post_message), forum/read.php:
   - basic bugfixes and minor changes to bring Go-Diagrams to work for others developers
     - changed var cfg_board -> ConfigBoard, fixed usage
     - fixed default-handling of extract_value()-func and parsing <goban>-tag
     - fixed parsing of goban-'view' attribute
     - fixed parsing and checking of goban-'left/right/down/up' attributes
     - fixed base_path for go_editor.js
     - fixed handling of "altered" go-diagrams
   - allow to activate usage of Go-Diagrams
     - added config-switch ALLOW_GO_DIAGRAMS to activate old Go-Diagrams
     - included JavaScript "js/goeditor.js" into page if activated by ALLOW_GO_DIAGRAMS

   * js/goeditor.js (change_mode, show_button, dump_data, goeditor),
     scripts/updates/other_changes_1_0_14_to_1_0_15.txt:
   - basic bugfixes and minor changes to bring Go-Diagrams to work
     - fixed base_path handling
     - fixed missing images (to mark selected/unselected tool) using added bl.gif and existing dot.gif
     - added some comments, TODOs
     - replaced string-keyword
-----------
copy /images/blue.gif
copy /images/grey.gif
-----------

   * forum/read.php:
   - bugfix: don't show preview on editing forum-post

   * include/std_functions.php (start_page, tournament_reference, attb_build):
   - added check on config-switch ALLOW_TOURNAMENTS to activate Tournaments
   - added <tourney>-tag to reference tournaments
   - added <igoban>-tag for "inline"-goban go-board
   - attb_build: don't quote values of JavaScript-attributes "on...", e.g. onClick

   * include/utilities.php (extract_regex_value):
   - added method to extract attribute-string parsed with regex

   * tournaments/edit_director.php, tournaments/edit_tournament.php,
     tournaments/list_directors.php, tournaments/list_tournaments.php,
     tournaments/view_tournament.php, site_map.php:
   - added check on config-switch ALLOW_TOURNAMENTS to activate Tournaments

   * include/config.php:
   - added config-switches
     - ALLOW_GOBAN_EDITOR to activate new Goban-Editor, switched OFF by default
     - ALLOW_GO_DIAGRAMS to activate old Go-Diagrams, switched OFF by default
     - ALLOW_TOURNAMENTS to activate Tournaments, switched OFF by default

   * scripts/update_translation_pages.php, scripts/README.translations,
     tournaments/include/tournament.php, tournaments/include/tournament_director.php,
     tournaments/edit_tournament.php, tournaments/list_directors.php,
     tournaments/list_tournaments.php, tournaments/view_tournament.php,
     features/edit_feature.php:
   - added notes how to add new Translation-group
   - fixed adding of new Translation-groups for features and tournaments
   - used own translation-group for Features and Tournaments (fixed quoting: ' -> ")

   * edit_profile.php:
   - re-added profile for smooth-board-edge,
     seems it has been accidentally removed around 2008-06-06

2009-03-03 juga

   * site_map.php:
   - added Tournaments-pages (list/view/edit)
   - added TournamentDirectors-pages (list/edit)

   * tournaments/include/tournament.php (Tournament, ~.to_string, ~.persist,
       ~.build_persist_query_part, ~.insert, ~.update, ~.allow_edit_tournaments,
       ~.allow_edit_directors, ~.build_query_sql, ~.load_tournament,
       ~.load_tournaments, ~.allow_create, ~.parseDate),
     tournaments/include/tournament_director.php (TournamentDirector),
     tournaments/list_tournaments.php, tournaments/edit_tournament.php,
     tournaments/view_tournament.php,
     tournaments/list_directors.php, tournaments/edit_director.php,
     include/classlib_profile.php, include/gui_functions.php,
     error.php, skins/dragon/screen.css,
     scripts/updates/database_changes_1_0_14_to_1_0_15.mysql,
     specs/db/table-Tournaments.txt:
   - Changes to manage tournaments
     - create and edit tournaments
     - started page to view tournament
     - check if user is allowed to create/edit tournament
   - added management of tournament-directors
     - added table TournamentDirector and class to manage tournament-directors
     - create/delete/edit tournament-directors for a tournament
     - view list of tournament-directors of a tournament with search-profile
     - check if user is allowed to create/delete or edit tournament-directors
   - bugfixes, adjusted texts, added CSS
-----------
-- manage Tournament-Directors
CREATE TABLE TournamentDirector (
   tid int(11) NOT NULL,
   uid int(11) NOT NULL,
   Comment varchar(255) NOT NULL default '',
   PRIMARY KEY (tid,uid)
) ENGINE=MyISAM;
-----------

   * features/lib_votes.php (Feature.set_description),
     features/edit_feature.php, features/list_features.php, features/list_votes.php:
   - bugfix: format feature-subject/description with (intended) correct make_html_safe()-args
   - minor text-adjustments for empty-values

   * error.php:
   - cleanup: remove unused errors and old tournament-errors

   * users.php:
   - bugfix: correct ID-button-link to right user-info

   * include/std_functions.php (start_page),
     tournaments/index.php, tournaments/list_tournaments.php:
   - renamed tournaments/list.php -> ~/list_tournaments.php

2009-03-02 juga

   * tournaments/list_tournaments.php, tournaments/list.php:
   - renamed list.php -> list_tournaments.php

2009-03-01 juga

   * tournaments/include/tournament.php (Tournament.getStatusText, ~.isAdmin),
     tournaments/list.php:
   - added filter on tournament-owner: show all or my tournaments
   - show tournaments on admin-status only to developer-admins

   * tournaments/include/tournament.php (Tournament),
     tournaments/list.php, tournaments/index.php,
     include/classlib_profile.php, include/classlib_userconfig.php,
     include/config.php, include/std_functions.php (start_page),
     scripts/updates/database_changes_1_0_14_to_1_0_15.mysql,
     specs/db/table-Tournaments.txt:
   - started Tournament-management in tournaments/-subdir
     - added Tournament-list page with search-profile and own table-column-set,
       index-page redirects to tournament-list page
     - added link to Tournament-list page into main-menu with access-key [t],
       replaced access-key of Translate [t] -> [l]
     - added table Tournament and class to manage tournaments
     - ConfigPages: added table-column-set for tournament-list
-----------
-- manage Tournaments
CREATE TABLE Tournament (
   ID int(11) NOT NULL auto_increment,
   Scope enum('DRAGON','PUBLIC','PRIVATE') NOT NULL default 'PUBLIC',
   Type enum('ROUNDROBIN') NOT NULL default 'ROUNDROBIN',
   Title varchar(255) NOT NULL default '',
   Description text NOT NULL,
   Owner_ID int(11) NOT NULL default '0',
   Status enum('ADM','NEW','REG','PAIR','PLAY','CLOSED') NOT NULL default 'NEW',
   Created datetime NOT NULL default '0000-00-00 00:00:00',
   Lastchanged datetime NOT NULL default '0000-00-00 00:00:00',
   StartTime datetime NOT NULL default '0000-00-00 00:00:00',
   EndTime datetime NOT NULL default '0000-00-00 00:00:00',
   PRIMARY KEY (ID),
   KEY Status (Status),
   KEY StartTime (StartTime)
) ENGINE=MyISAM;

-- table-column-set for tournament-list
ALTER TABLE ConfigPages
   CHANGE ColumnsTournaments ColumnsTournamentList int(11) NOT NULL default '-1' ;
UPDATE ConfigPages
   SET ColumnsTournamentList=-1 ;
-----------

   * include/std_classes.php (ListIterator, WhereClause):
   - added ListIterator-class to help iterating over lists and keep track of query
   - cleanup: removed WhereClause-class (not needed)

   * new_tournament.php, list_tournaments.php, show_tournament.php, create_tournament.php,
     include/tournament.php, include/tournament_round.php,
     include/tournamenttypes/index.php, include/tournamenttypes/macmahon.php,
     include/tournamenttypes/all_types.php,
     init-tournaments.mysql:
   - removed old tournament-stuff (will be replaced),
     including previously added DDL

   * init-tournaments.mysql:
   - added DDL needed for old tournament-stuff to have it for one revision in CVS,
     exported from Dragon on SourceForget.NET

2009-02-28 juga

   * NEWS:
   - restructured (swapped code-improvements with minor-changes)
   - added more links to changed-feature page, corrected links

   * include/filter.php:
   - bugfix: added include for constant BITSET_MAXSIZE

   * show_games.php, NEWS:
   - added columns start-rating, end-rating and rating-diff of opponents
     counterpart-user for user-running/finished view
   - changed different default-sort for observe-all view to Observer-count

   * show_games.php:
   - renamd all SQL-fields & vars for user-running/finished view
     with prefix 'opp' in preparation of adding some user-specific fields
   - changed texts of color-filter (not always my-user-view):
     replaced "i'm/my" -> "user"

   * status.php:
   - shortened bottom menu link texts to save space (in sync with show-games-page)

   * include/classlib_profile.php, include/classlib_userconfig.php,
     scripts/updates/database_changes_1_0_14_to_1_0_15.mysql,
     show_games.php, site_map.php, NEWS:
   - added view-mode to show all observed games with own profile and column-set
     - show "#Observed"-column with number of observing users
     - show "Mine"-column if my games are observed
   - shortened bottom menu link texts to save space
-----------
-- added games-list view for [all observed games]
ALTER TABLE `ConfigPages`
   ADD ColumnsGamesObservedAll2 int(11) NOT NULL default '-1' AFTER `ColumnsGamesObserved2`,
   ADD ColumnsGamesObservedAll int(11) NOT NULL default '-1' AFTER `ColumnsGamesObserved2` ;
-----------

   * include/classlib_userconfig.php (ConfigBoard.load_config_board):
   - bugfix: read values from cookies only if there are some

   * ratinggraph.php:
   - fixed link-text (can be other user): "Show my finished games" -> "Show finished games"

   * show_games.php, NEWS, scripts/updates/other_changes_1_0_14_to_1_0_15.txt:
   - Table-class can now handle >32 columns, so
     - show weekendclock for all views
     - added game-info as column-id #32 linked to game-info-page

   * show_games.php:
   - minor adjustments (with some layouting/cleanup)
     - show links to all possible game-list-views in bottom menu and changed order
     - adjusted page/section title to reflect current view-mode
     - adjusted image-alt text for color-image

   * show_games.php, list_contacts.php, status.php, waiting_room.php,
     include/message_functions.php (message_list_head, message_list_body),
     scripts/updates/database_changes_1_0_14_to_1_0_15.mysql:
   - Table-class can now handle >32 columns, so changed column-IDs:
     - show-games-page: reverted column-ids to avoid data migration for
       - game-notes:   #15 -> #33
       - last-access:  #15 -> #25 -> back to #15
       - weekendclock: #12 -> #24 -> back to #12
     - contact-list:  moved column-id #33 -> #9  for static Actions-header
     - status-page:   moved column-id #15 -> #12 for Notes-column
     - waiting-room:  moved column-id #33 -> #17 for static Info-column
     - message-lists: moved column-id #33 -> #8  for static Message-flow-column

   * include/table_columns.php (is_column_displayed, add_or_del_column),
     include/filter.php (SearchFilter.add_filter, ~.init, ~.get_active_set, ~.get_url_parts),
     include/filter_functions.php (filter_id2mask),
     include/classlib_userconfig.php (ConfigTableColumns.get_maxsize):
   - enhanced Table- and Filter-classes to handle >32 columns
     using BitSet/ConfigTableColumns-class

   * include/classlib_profile.php (SearchProfile.handle_action):
   - bugfix: check for existing profile on deleting profile

2009-02-27 juga

   * list_contacts.php:
   - bugfix: handle ambiguous column-name Players/Contacts.UserFlags

   * opponents.php, skins/dragon/screen.css, NEWS:
   - added CSS to highlight sum-row/column in game-stats for opponents

   * include/table_columns.php (add_external_parameters),
     list_contacts.php, opponents.php, search_messages.php:
   - make use_hidden-option explicit (no default) for add_external_parameters()
   - bugfix: fix usage add_external_parameters(.., use_hidden) after recent signature-change

   * users.php:
   - bugfix for loading ConfigTableColumns for my-userid

   * forum/search.php:
   - bugfixes:
     - show forum-name in forum-filter selection
     - fix query on visible forums

2009-02-25 juga

   * include/classlib_userconfig.php (ConfigBoard, ConfigPages, ConfigTableColumns),
     include/classlib_bitset.php (read_from_int_array), scripts/tests/BitSetTest.php,
     include/std_functions.php ($cookie_pref_rows),
     include/table_columns.php (TableColumns, ~.is_column_displayed, ~.add_or_del_column),
     include/GoDiagram.php (GoDiagram, echo_board, echo_editor, create_godiagrams, draw_editors),
     include/board.php (Board.set_style),
     forum/forum_functions.php (toggle_forum_flags),
     forum/post.php (post_message),
     scripts/updates/database_changes_1_0_14_to_1_0_15.mysql,
     specs/db/table-Players.txt,
     scripts/data_export.php,
     scripts/README.developers,
     forum/index.php, forum/list.php, forum/read.php,
     do_registration.php, change_profile.php, edit_profile.php, edit_folders.php,
     status.php, waiting_room.php, users.php, opponents.php, list_contacts.php,
     show_games.php, game.php:
   - split Players-table into GUI-related config-tables
     - ConfigBoard-table with board-related GUI-config
       - cookie-prefs passing to ConfigBoard-handling via global var $player_row
         read in std_funcs.is_logged_in()
     - ConfigPages-table with (other) pages-related GUI-config mostly special
       to one single page like table-column-set
   - bugfix BitSet-class: added handling of negative-values: erase highest 2 bits + fixed phpunit-test
   - added PHP-experience with 32-bit (signed) integers to scripts/README.developers
   - for user-registration inserted defaults for splitted GUI-config-tables
   - load ConfigBoard/ConfigPages-table only when needed
     - use ConfigBoard-class to load/save board-related GUI-configs for ConfigBoard-table
     - use ConfigPages-class to load/save board-related GUI-configs for ConfigPages-table

   - added class ConfigTableColumns to handle persistence of table-column-set
     with more than 32 columns stored in bits using BitSet-class
     - writing 30 bits in one int(32)-dbfield to avoid any "signed int"-effect
     - added 2nd int(11)-signed dbfield to handle >32 table-columns,
       can be easily extended to more than 60 bits if needed
     - renamed and migrated data for db-fields for shown table-columns
       XyzColumns -> ColumnsXyz[2]
     - added own table-column-sets for
       - opponents page (copied data from users column-set)
       - splitted running/finished games into two sets: all + user running/finished games
-----------
-- split Players-table into GUI-related config-tables (board-related)
CREATE TABLE ConfigBoard (
   User_ID int(11) NOT NULL DEFAULT '0',
   Stonesize tinyint(3) unsigned NOT NULL default '25',
   Woodcolor int(11) NOT NULL default '1',
   Boardcoords int(11) NOT NULL default '31',
   MoveNumbers smallint(5) unsigned NOT NULL default '0',
   MoveModulo smallint(5) unsigned NOT NULL default '0',
   NotesSmallHeight tinyint(3) unsigned NOT NULL default '25',
   NotesSmallWidth tinyint(3) unsigned NOT NULL default '30',
   NotesSmallMode enum('RIGHT','BELOW','RIGHTOFF','BELOWOFF') NOT NULL default 'RIGHT',
   NotesLargeHeight tinyint(3) unsigned NOT NULL default '25',
   NotesLargeWidth tinyint(3) unsigned NOT NULL default '30',
   NotesLargeMode enum('RIGHT','BELOW','RIGHTOFF','BELOWOFF') NOT NULL default 'RIGHT',
   NotesCutoff tinyint(3) unsigned NOT NULL default '13',
   PRIMARY KEY (User_ID)
) ENGINE=MyISAM;

-- create ConfigBoard-entries for all players and drop copied columns
INSERT INTO ConfigBoard
   (User_ID,Stonesize,Woodcolor,Boardcoords,MoveNumbers,MoveModulo,
   NotesSmallHeight,NotesSmallWidth,NotesSmallMode,NotesLargeHeight,
   NotesLargeWidth,NotesLargeMode,NotesCutoff)
   SELECT ID,Stonesize,Woodcolor,Boardcoords,MoveNumbers,MoveModulo,
      NotesSmallHeight,NotesSmallWidth,NotesSmallMode,NotesLargeHeight,
      NotesLargeWidth,NotesLargeMode,NotesCutoff
   FROM Players ;

-- drop copied columns (ConfigBoard)
ALTER TABLE Players
   DROP COLUMN Stonesize,
   DROP COLUMN Woodcolor,
   DROP COLUMN Boardcoords,
   DROP COLUMN MoveNumbers,
   DROP COLUMN MoveModulo,
   DROP COLUMN NotesSmallHeight,
   DROP COLUMN NotesSmallWidth,
   DROP COLUMN NotesSmallMode,
   DROP COLUMN NotesLargeHeight,
   DROP COLUMN NotesLargeWidth,
   DROP COLUMN NotesLargeMode,
   DROP COLUMN NotesCutoff ;

-- split Players-table into GUI-related config-tables (related to other pages)
CREATE TABLE ConfigPages (
   User_ID int(11) NOT NULL DEFAULT '0',
   StatusFolders varchar(40) NOT NULL default '',
   ForumFlags tinyint(3) unsigned NOT NULL default '8',
   ColumnsStatusGames int(11) NOT NULL default '-1',
   ColumnsWaitingroom int(11) NOT NULL default '-1',
   ColumnsUsers int(11) NOT NULL default '-1',
   ColumnsOpponents int(11) NOT NULL default '-1',
   ColumnsContacts int(11) NOT NULL default '-1',
   ColumnsGamesRunningAll int(11) NOT NULL default '-1',
   ColumnsGamesRunningAll2 int(11) NOT NULL default '-1',
   ColumnsGamesRunningUser int(11) NOT NULL default '-1',
   ColumnsGamesRunningUser2 int(11) NOT NULL default '-1',
   ColumnsGamesFinishedAll int(11) NOT NULL default '-1',
   ColumnsGamesFinishedAll2 int(11) NOT NULL default '-1',
   ColumnsGamesFinishedUser int(11) NOT NULL default '-1',
   ColumnsGamesFinishedUser2 int(11) NOT NULL default '-1',
   ColumnsGamesObserved int(11) NOT NULL default '-1',
   ColumnsGamesObserved2 int(11) NOT NULL default '-1',
   ColumnsTournaments int(11) NOT NULL default '-1',
   PRIMARY KEY (User_ID)
) ENGINE=MyISAM;

-- create ConfigPages-entries for all players and drop copied columns (migration-split)
INSERT INTO ConfigPages
   (User_ID,StatusFolders,ForumFlags,
   ColumnsStatusGames,ColumnsWaitingroom,
   ColumnsUsers,ColumnsOpponents,ColumnsContacts,
   ColumnsGamesRunningAll,
   ColumnsGamesRunningAll2,
   ColumnsGamesRunningUser,
   ColumnsGamesRunningUser2,
   ColumnsGamesFinishedAll,
   ColumnsGamesFinishedAll2,
   ColumnsGamesFinishedUser,
   ColumnsGamesFinishedUser2,
   ColumnsGamesObserved,
   ColumnsGamesObserved2,
   ColumnsTournaments)
   SELECT
      ID,StatusFolders,ForumFlags,
      GamesColumns,
      WaitingroomColumns,
      UsersColumns,
      UsersColumns,
      ContactColumns,
      0x3fffffff & RunningGamesColumns,
      0x3ffffffc | ((RunningGamesColumns & 0x3fffffff) >> 30),
      0x3fffffff & RunningGamesColumns,
      0x3ffffffc | ((RunningGamesColumns & 0x3fffffff) >> 30),
      0x3fffffff & FinishedGamesColumns,
      0x3ffffffc | ((FinishedGamesColumns & 0x3fffffff) >> 30),
      0x3fffffff & FinishedGamesColumns,
      0x3ffffffc | ((FinishedGamesColumns & 0x3fffffff) >> 30),
      0x3fffffff & ObservedGamesColumns,
      0x3ffffffc | ((ObservedGamesColumns& 0x3fffffff) >> 30),
      TournamentsColumns
   FROM Players ;

-- drop copied columns (ConfigPages)
ALTER TABLE Players
   DROP COLUMN StatusFolders,
   DROP COLUMN ForumFlags,
   DROP COLUMN GamesColumns,
   DROP COLUMN WaitingroomColumns,
   DROP COLUMN UsersColumns,
   DROP COLUMN ContactColumns,
   DROP COLUMN RunningGamesColumns,
   DROP COLUMN FinishedGamesColumns,
   DROP COLUMN ObservedGamesColumns,
   DROP COLUMN TournamentsColumns ;
-----------

   * forum/forum_functions.php (display_posts_pending_approval):
   - bugfix: used wrong ID for post-id in URL-building

   * forum/index.php:
   - bugfix: make toggleflag-URL-arg more injection-secure

   * code_examples/filter_example2.php, include/contacts.php,
     scripts/data_export.php, scripts/player_consistency.php, NEWS:
   - minor changes/fixes, added docs

   * scripts/updates/database_changes_1_0_14_to_1_0_15.mysql:
   - Players-table: grouped global GUI-related configs, moved to table-end,
     in preparation for clearer table-structure and split
-----------
-- group (global) user-profile fields in Players-table
ALTER TABLE `Players`
   CHANGE Button Button tinyint unsigned NOT NULL default '0' AFTER UserFlags,
   CHANGE TableMaxRows TableMaxRows smallint(5) unsigned NOT NULL default '20'  AFTER UserFlags,
   CHANGE MenuDirection MenuDirection enum('VERTICAL','HORIZONTAL') NOT NULL default 'VERTICAL' AFTER UserFlags,
   CHANGE SkinName SkinName varchar(32) NOT NULL default '' AFTER UserFlags ;
-----------

2009-02-22 juga

   * include/std_functions.php (is_javascript_enabled, start_html),
     include/table_columns.php (Table),
     scripts/updates/database_changes_1_0_14_to_1_0_15.mysql,
     change_profile.php, edit_profile.php, game.php, scripts/data_report.php,
     specs/db/table-Players.txt:
   - moved JavaScript-enabling configuration from Players.Boardcoords
     to UserFlags field in preparation to split Players-table
     - added helper-func is_javascript_enabled()
     - JAVASCRIPT_ENABLED -> USERFLAG_JAVASCRIPT_ENABLED
-----------
-- global user profile flags (in preparation to split Players-table)
ALTER TABLE `Players`
   ADD `UserFlags` int(11) NOT NULL default '0' ;
-- move JavaScript-flags from Boardcoords into UserFlags
UPDATE Players SET UserFlags=IF(Boardcoords & 0x100,1,0) ;
UPDATE Players SET Boardcoords=Boardcoords & ~0x100 ;
-----------

   * specs/db/table-Players.txt:
   - doc about Players-table + split-info

   * quick_status.php, NEWS:
   - synced with changes in release-branch DGS-stable-200712
     - added column with time-remaining

   * code_examples/check_times.php:
   - various time-format outputs

   * donation.php:
   - redirect donate-button to thank-you forum post if disabled

   * include/config.php, include/std_functions.php (start_page),
     donation.php, donation_success.php, skins/dragon/screen.css,
     docs.php, site_map.php, NEWS:
   - synced with changes in release-branch DGS-stable-200712
     - added donation and donation thank-you page redirecting from and to PayPal,
       text mainly written by Erik
     - added config-switch ENABLE_DONATIONS to enable donation links
       on site-map, docs and status-page
       to forum-thank-you (needs adjustment for DGS-clones)
     - added donate-tool below main-menu linked to new donation-page
     - show only on status-page
-----------
copy /images/donate.gif
-----------

2009-02-15 juga

   * edit_bio.php, edit_folders.php, status.php, gameinfo.php:
   - adjusted some texts (show userinfo, Opponents -> Players)

2009-02-14 juga

   * include/filter.php (FilterDate, FilterRelativeDate),
     opponents.php, show_games.php, users.php, waiting_room.php,
     scripts/README.translations, specs/filters.txt:
   - added some docs and notes

   * forum/admin_show_forumlog.php:
   - cleanup: remove setting of filter-access-keys (are set per default)

   * include/connect2mysql.php (connect2mysql),
     include/config.php:
   - moved consts DB_CONNECT_RETRY_COUNT, DB_CONNECT_RETRY_SLEEP_MS
     from connect2mysql() into config.php
   - bugfix: don't sleep on last db-connect retry-loop

   * opponents.php, NEWS:
   - replaced repeating "Info"-column with ID-column (one column less)

   * users.php:
   - used button on ID-column (same as on opponents-page)

   * include/std_functions.php (end_page),
     scripts/updates/database_changes_1_0_14_to_1_0_15.mysql,
     admin_admins.php, admin_show_users.php:
   - removed ADMIN_TIME (has been replaced by ADMOPT_SHOW_TIME in previous release)
-----------
UPDATE Players SET Adminlevel=Adminlevel & ~0x10 WHERE Adminlevel > 0 ;
-----------

   * include/gui_functions.php (TD_button), include/faq_functions.php (TD_button),
     admin_faq.php, forum/admin.php:
   - moved TD_button() from include/faq_functions.php to include/gui_functions.php

   * faq.php, include/faq_functions.php (build_regex_term):
   - trim search-term (must not contain spaces around terms, otherwise regex drives havoc)
   - added search-syntax for input-box with search-term

   * include/form_functions.php (create_string_func_textinput,
       create_string_func_textinputx, print_insert_text_input,
       print_insert_submit_buttonx, parse_input_standard_attributes):
   - added TEXTINPUTX-type to allow to specify additional attributes
   - put redundant parsing of standard-attributes into separate func

   * features/edit_feature.php:
   - show preview only if something to show
   - switched position of save and preview like on other DGS-pages

   * INSTALL:
   - added note about timeadjust.php and some clarifications

   * admin_users.php:
   - bugfix: be able to clear textual fields like AdminNote/BlockReason

   * error.php:
   - bugfix after merge:
     placement of db-close (needed connection for writing admin_log)

   * include/connect2mysql.php (connect2mysql):
   - reduced db-connect retry-count: 6 -> 2 (enough for a user to wait for)
   - fixed usage of ignore_user_abort
   - adjusted comments

2009-02-13 juga

   * include/config.php, include/std_functions.php (start_page), error.php, NEWS,
     features/lib_votes.php (build_feature_notes, echo_feature_notes, allow_vote_check),
     features/list_features.php, features/list_votes.php,
     features/edit_feature.php, features/vote_feature.php:
   - completed feature-voting and feature-management:
     - added config-switch ALLOW_FEATURE_VOTE in config.php to switch feature-voting on/off
     - added feature-notes with status-legend and some small help
     - bugfixes, minor layouting

   * include/filterlib_mysqlmatch.php:
   - splitted over-long string-const MYSQL_MATCH_STOPWORDS after each 1000 chars

   * skins/dragon/screen.css:
   - admin-pages: use top vertical-alignment on admin-tables:
     user-attributes, FAQ-log, error-log

   * features/list_features.php, features/list_votes.php,
     include/table_columns.php (add_tablehead),
     skins/dragon/screen.css:
   - votes: added search-filters on SumPoints and CountVotes
   - layout: show own user-vote as centered number
   - re-organized & sync'ed table-column-IDs for feature-/vote-list

   * features/edit_feature.php:
   - added preview for feature-edit
   - bugfix showing HTML-un-encoded description in textarea

2009-02-12 juga

   * features/lib_votes.php (FeatureList, FeatureVote, build_filter_selection_status),
     features/edit_feature.php, features/list_features.php,
     features/list_votes.php, features/vote_feature.php,
     scripts/updates/database_changes_1_0_14_to_1_0_15.mysql,
     include/gui_functions.php (button_TD_anchor), include/quick_common.php,
     error.php, skins/dragon/screen.css:
   - changed feature-lifecycle (status): NEW > NACK|WORK > DONE > LIVE
     - NEW  = new feature, can be voted upon
     - NACK = rejected feature
     - WORK = feature implementation started
     - DONE = feature implemented, not released yet
     - LIVE = feature released and online
   - changes access rights on features:
     - feature-edit/add/delete only allowed for admins (executive- or developer-role)
     - feature-edit only allowed on NEW-status, except for super-admin (developer-role)
     - feature-delete only allowed for super-admin (developer-role)
     - added check on user to allow voting: min rated-games/moves/last-moved
     - added admin-option DENY_VOTE to forbid user to vote on features
     - allowed guest-user to view all features, but forbid to vote
     - added view of vote-points if voting not allowed
   - feature-delete:
     - added vote-constraint: feature-delete only allowed if no votes existing
     - cancel feature-delete leads to feature-edit
   - changes for feature-voting:
     - replaced actions-column with button to view/vote (Vote-ID) and admin edit-column
     - added feature-actions as bottom-links:
       show feature-/votes-list, add/edit/delete feature
     - added error-codes for feature-voting
     - replaced <font>-tag with CSS for error-message
     - moved redundant func to build filter-selection for status-field into lib_votes.php
-----------
ALTER TABLE `FeatureList`
   CHANGE Status Status enum('NEW','WORK','DONE','LIVE','NACK') NOT NULL DEFAULT 'NEW' ;
ALTER TABLE `FeatureList`
   DROP INDEX Editor_ID ;
-----------

   * include/std_functions.php (is_logged_in):
   - read X_LastMove as unix-timestamp from Players-row for feature-voting

   * include/gui_functions.php (button_TD_anchor):
   - added optional link-title

   * userinfo.php:
   - added convenience-link "Admin user" for admins to edit-user attributes

   * admin_show_users.php, admin_users.php, include/quick_common.php:
   - added admin-option DENY_VOTE to forbid user to vote on features

   * features/edit_feature.php:
   - fixed title (mixed up add/update-mode)

   * features/vote_feature.php:
   - vote-point-selector: show positive points first
   - aligned save-vote submit-button
   - bugfixes (null-object-checks)

   * features/lib_votes.php (FeatureVote),
     scripts/updates/database_changes_1_0_14_to_1_0_15.mysql:
   - save Voter-IP on voting
-----------
ALTER TABLE `FeatureVote`
   ADD `IP` varchar(16) NOT NULL default '' ;
-----------

   * features/edit_feature.php, features/lib_votes.php,
     features/list_features.php, features/list_votes.php,
     features/vote_feature.php, include/std_functions.php (start_page):
   - moved feature-voting from 'features/vote/' into parent sub-dir 'features/'

2009-02-11 juga

   * features/vote/lib_votes.php (Feature.is_admin, ~.is_super_admin, ~.allow_user_edit),
     features/vote/edit_feature.php, features/vote/list_features.php,
     features/vote/list_votes.php, features/vote/vote_feature.php:
   - differ two admin-roles: feature-admin + feature-super-admin with more rights:
     super-admin is allowed to edit all
   - used cell-button on feature-id
   - adjusted status-texts description

   * include/message_functions.php (game_info_table),
     include/table_infos.php (Table_info.add_info, ~.add_sinfo, ~.warning_cell_attb),
     gameinfo.php, userinfo.php, status.php:
   - changed Table_info::add_info/sinfo()-signature:
     replaced warning_cell_attb with iattb+nattb-args
   - replaced Table_info->add_row() with add_sinfo() if possible

   * include/gui_functions.php (button_style, button_TD_anchor,
       button_TD_width_insert, warning_cell_attb),
     include/table_columns.php (button_style, button_TD_anchor,
       button_TD_width_insert, warning_cell_attb),
     include/table_infos.php (Table_info.warning_cell_attb),
     list_tournaments.php, opponents.php, status.php, show_games.php, waiting_room.php:
   - code cleanup (removed code redundancy),
     moved some static GUI-funcs to include/gui_functions.php:
     button_style, button_TD_anchor, button_TD_width_insert, warning_cell_attb

2009-02-10 juga

   * include/message_functions.php (build_adjust_handicap, game_info_table),
     scripts/updates/other_changes_1_0_14_to_1_0_15.txt,
     waiting_room.php:
   - merged "showing" of handicap and std-placement, but kept separate column
     on StdPlacement for filtering on it, to let user choose what to use
   - simplified handicap-adjustment output-format (removed 'H'-prefix),
     moved NO_VALUE-formatting to caller

   * waiting_room.php:
   - added separate column for user-type

   * links.php:
   - corrected outdated links
   - added gosensations.com

   * message.php:
   - added handicap-suggestion also for dispute-view of invitation

   * scripts/README.developers:
   - note about faster echo()-output

   * translate.php:
   - adjusted readme-first text: fixed typos, more details

   * gameinfo.php:
   - added opponents rating diff for finished game

   * gameinfo.php, game.php, skins/dragon/screen.css,
     include/table_infos.php (Table_info, ~.add_row, ~.add_info, ~.add_sinfo,
       ~.check_cols, ~.make_tablerow, ~.add_cell),
     people.php, NEWS:
   - added game info page and two links from game-page (info.gif + bottom-link)
   - added info-icon to show for opening game-info page (taken from silk icons)
   - Table_info: added handling for multiple-columns (>2)
-----------
copy /images/info.gif
-----------

2009-02-09 juga

   * include/std_functions.php (activity_string),
     opponents.php, userinfo.php, users.php, NEWS:
   - reverted activity-level (Eriks wish)
     - higher activity shouldn't encourage more activity,
       two levels are enough
     - can use user-type to mark robots now

2009-02-07 juga

   * people.php:
   - added new section (other credits) to fulfill license-requirements
     for some used icons of Mark James' silk icons collection

   * include/std_functions.php (build_usertype_text),
     scripts/updates/database_changes_1_0_14_to_1_0_15.mysql,
     scripts/updates/other_changes_1_0_14_to_1_0_15.txt,
     admin_users.php, list_contacts.php, opponents.php, userinfo.php, users.php,
     waiting_room.php, NEWS:
   - added searchable user-type together with new icons to mark user
     as professional, teacher, robot, (team)
   - show iconographic user-type in contact-list and waiting-room
-----------
copy /images/robot.gif
copy /images/team.gif
copy /images/professional.gif
copy /images/teacher.gif

-- user-type characteristics: bot, teacher, pro, etc.
ALTER TABLE `Players`
   ADD `Type` smallint(5) unsigned NOT NULL default '0' AFTER `ID` ;
ALTER TABLE `Players`
   ADD INDEX `Type` (`Type`) ;
-----------

2009-02-01 juga

   * show_games.php, status.php:
   - load Notes-data only if column shown for user to reduce server-load for page
     avoiding additional outer-join on GamesNotes-table
   - changed table-column-id for Notes-column: 32 -> 15 (was unused)

   * include/config.php, include/std_functions.php:
   - moved LIST_GAMENOTE_LEN from std_functions.php to config.php controlling
     Notes-column for some games-lists

   * include/std_classes.php:
   - removed $TranslateGroups (no translation-texts)
   - adjust EMPTY_SQL_QUERY with mysql5 now to DUAL-table-feature

   * include/classlib_bitset.php (BitSet._get_intval_range, ~._set_intval_range),
     include/filter.php (FilterRating.parse_value),
     include/filter_parser.php (BasicParser.swap_range_start_end):
   - used swap()-func, moved into utilities.php

   * include/std_functions.php (mod, modf, swap, array_combine, array_bsearch,
       array_value_to_key_and_value, map_to_string, array_bsearch,
       activity_string, RGBA, limit),
     include/utilities.php (mod, modf, swap, array_combine, array_bsearch,
       array_value_to_key_and_value, map_to_string, limit),
     NEWS:
   - moved DGS-unrelated functions to separate include-file utilities.php and added more doc
   - changed colors for activity-levels:
     arranged activity-stars like traffic-light, keeping green as highest activity-level
     in order to reduce GUI-"change"
   - deprecated nsq_addslashes()

   * add_to_waitingroom.php:
   - fixed bug for handicap-adjustment: swap min/max-handicap if min>max

   * add_to_waitingroom.php, waiting_room.php, NEWS,
     include/game_functions.php (adjust_handicap),
     include/make_game.php (create_game),
     include/message_functions.php (game_settings_form, game_info_table,
       build_adjust_handicap),
     scripts/updates/database_changes_1_0_14_to_1_0_15.mysql:
   - added new-game options for waiting-room with adjustment and min/max-limitation
     of handicap stones
-----------
-- game-handicap adjustment & min/max-limits
ALTER TABLE `Waitingroom`
   ADD `AdjHandicap` tinyint signed NOT NULL default '0' AFTER `Handicaptype`,
   ADD `MinHandicap` tinyint signed NOT NULL default '0' AFTER `AdjHandicap`,
   ADD `MaxHandicap` tinyint signed NOT NULL default '127' AFTER `MinHandicap` ;
-----------

2009-01-26 juga

   * opponents.php, status.php, users.php, waiting_room.php:
   - fix add_tablehead()-defaults for "hideable, but not sortable" columns:
     - users, opponents: Rank info, Open for matches
     - status: sgf
     - waiting-room: comment, time-limit

2009-01-25 juga

   * include/classlib_profile.php (SearchProfile.handle_action),
     include/filter.php (set_profile_handler),
     include/std_classes.php (RequestParameters.use_hidden, ~.RequestParameters,
       ~.get_hiddens),
     include/table_columns.php (Table.add_external_parameters, ~.Table,
       ~.get_hiddens, ~.set_profile_handler),
     features/vote/list_features.php, features/vote/list_votes.php,
     list_contacts.php, opponents.php, search_messages.php, show_games.php,
     waiting_room.php, NEWS:
   - bugfixes for search-profiles:
     - reload profile after handling delete-profile
     - correct regex_save_args for search-profile including all
       additional-element-names for Score/RelativeDate/CheckboxArray/MysqlMatch-Filter
     - handling of hiddens of search-profiles replacing Table-global use_hidden-var
       by moving it into RequestParameters for multiple occurences
     - use prefix for sort-args
   - added search-profile for all pages with table-filters except forum-search and status-page:
     - users, opponents, waiting room, search messages, contacts, features, votes
     - observers of a game (users.php), observed games
     - different search-profile ones for all/my/other finished and running games

   * scripts/updates/database_changes_1_0_14_to_1_0_15.mysql:
   - synchronized: added Profiles-table

   * opponents.php, show_games.php:
   - show player-rating in title

2009-01-19 juga

   * users.php:
   - added prototype of (default) search-profile for Filters & Table
     to save form-entries as replacement for simple filter-reset-submit,
     needs restructuring of object-inits: SearchProfile, SearchFilter, Table

   * include/classlib_profile.php (Profile.get_text, ~.update_profile, ~.delete_profile,
       ~.delete_all_profiles, ~.new_from_row, ~.load_profile; class SearchProfile),
     include/filter.php (SearchProfile.set_profile_handler, ~.get_arg, ~.get_saved_arg,
       ~.init, ~.get_submit_elements),
     include/table_columns.php (Table.set_profile_handler, ~.get_saved_arg,
       ~.set_default_sort, ~.handle_show_rows):
   - added class SearchProfile to handle single (default) search-profile
     saving args for Filters & Table
   - added profile-handler SearchProfile to clear/reset/load/save profiles
   - disallowed writing of search-profile for guest-user
   - fixed SQL on Profiles-table, added safety-checks

   * include/filter.php (get_submit_elements),
     include/table_columns.php (make_add_column_form),
     code_examples/filter_example.php, code_examples/filter_example2.php,
     forum/search.php, opponents.php:
   - changed signature of filter->get_submit_elements(): added Form-object to use form-funcs

   * include/quick_common.php:
   - added notes/FIXME for arg_stripslashes/get_magic_quotes_gpc-funcs

2009-01-12 juga

   * include/classlib_profile.php (get_text, set_text),
     scripts/tests/ProfileTest.php, scripts/tests/AllTests.php,
     include/std_functions.php (build_url, split_url):
   - fixed text-conversion for get/set_text()
   - added phpunit-test for Profile-class
   - build_url (added separator-arg),
     split_url (handle '0'-value (<> unset or false))

   * include/classlib_profile.php:
   - added class Profile and DB-table Profiles to handle filter-search
     and form-element profiles
   - added phpunit-test
-----------
CREATE TABLE Profiles (
   ID int(11) NOT NULL auto_increment,
   User_ID int(11) NOT NULL default '0',
   Type smallint(5) NOT NULL default '0',
   SortOrder tinyint(3) NOT NULL default '1',
   Active enum('Y','N') NOT NULL default 'N',
   Name varchar(40) NOT NULL default '',
   Lastchanged datetime NOT NULL default '0000-00-00 00:00:00',
   Text blob NOT NULL,
   PRIMARY KEY (ID),
   KEY UserType (User_ID,Type)
) ENGINE=MyISAM ;
-----------

   * edit_profile.php:
   - fixed typo: Appearances -> Appearance

   * waiting_room.php:
   - fixed to clearer title: Handicap -> Handicap-Type

   * include/classlib_bitset.php (reset), scripts/tests/BitSetTest.php:
   - renamed and enhanced clear() -> reset() allowing to set all bits, adjusted test

2009-01-10 juga

   * include/classlib_bitset.php, scripts/tests/BitSetTest.php:
   - added class BitSet for bit-operations of arbitrary length,
     added phpunit-test

   * scripts/tests,
     scripts/tests/README.test,
     scripts/tests/Makefile,
     scripts/tests/AllTests.php,
     scripts/tests/run_tests.php:
   - introducing unit-tests for DGS-code based on phpunit,
     see README.test

2009-01-07 juga

   * message.php, NEWS, skins/dragon/screen.css,
     include/message_functions.php (game_settings_form,
       build_suggestion_shortinfo, get_colortext_probable):
   - from wishlist for invites:
     added color/handicap/komi-suggestion for conventional & proper type
   - fixed text-TODO using "probable" only for conv/proper-type

   * message_selector.php:
   - fixed expression: or -> ||

2009-01-06 juga

   * list_messages.php, NEWS:
   - from wishlist: added $follow option to stay in folder after message-move
   - changed default to stay in current-folder
   - changed move-elements in natural order from left to right,
     toggle-marks to the right (near the toggles)

   * include/message_functions.php (change_folders_for_marked_messages),
     list_messages.php:
   - secured parsing of args

   * game_comments.php:
   - fixed PHP-warning on missing mysql_free_result()

   * include/config.php,
     change_profile.php, edit_profile.php, game.php, include/std_functions.php,
     include/table_columns.php, include/table_infos.php, scripts/data_report.php:
   - renamed ALLOW_JSCRIPT and moved into config as ALLOW_JAVASCRIPT
   - added comment for ALLOW_QUOTING

   * change_profile.php, edit_profile.php, game.php, ratinggraph.php, ratingpng.php,
     include/std_functions.php, include/table_columns.php, scripts/data_report.php:
   - renamed consts
     - JSCRIPT_ENA -> JAVASCRIPT_ENABLED (clearer, JScript != JavaScript)
     - GRAPH_RATING_BY_NUM_ENA -> GRAPH_RATING_BY_NUM_ENABLED

   * sgf.php (switch_move_color), NEWS:
   - use 3rd PASS-move as node for scoring for better RESUME-handling
   - switched off inclusion of node-names, added switch $include_games_notes
   * game.php (draw_moves, get_final_score_move):
   - fix SGF-move-number for final score-step or exceeding max-moves
   * game.php, skins/dragon/screen.css, NEWS:
   - from wishlist: show SGF-move-number before view-moves-list, added CSS
   - mark setup-moves in view-moves-list with prefix: (H) =handicap-setup
   - always show some start- and end-moves in view-moves-list

   * change_bio.php:
   - fixed PHP-warning on missing mysql_free_result()

   * quick_status.php:
   - minor sql-change in ORDER: date -> Lastchanged

   * ratinggraph.php:
   - corrected bottom-link: Show finished games -> Show my finished games

   * sgf.php:
   - bugfix to include game-notes
   - included PASS-moves
   - removed node-name for PASS/SCORE-moves (strange effects with cgoban)
   - added no_cache-URL-arg to disable caching

2009-01-04 juga

   * edit_bio.php:
   - fixed adapted text-height for bio (more effect), increased width (60->70)

   * message.php:
   - changed text-width for userid (50,maxl80->25,40), subject & message-body (60->70)

   * show_games.php:
   - bugfix for RESTRICT_SHOW_GAMES_ALL:
     - use different day-restriction for full finished games list,
       adjusted restrict-note
     - use more elegant FC_DEFAULT-setting to restrict games-list Lastchanged
     - make end-date/last-move column (#13) static

   * include/message_functions.php (message_list_body), status.php:
   - fixed PHP-warning on missing mysql_free_result() after message_list_body()

   * forum/forum_functions.php (make_link_array, draw_post), forum/read.php:
   - bugfix: prevented moderate-action to be re-done on moderator-toggle,
     replaced show/hide/approve/reject-URL-arg by modact/modpid-URL-arg

   * skins/dragon/screen.css:
   - bugfix (reported): table-cell vertical-alignment only on forms

   * NEWS, policy.php:
   - merge-fix:
     - adjusted to new date-format and added release-info for 1.0.14
     - adjusted using new Page-class for CSS

2009-01-03 juga

   * include/message_functions.php (message_info_table),
     include/std_functions.php, NEWS:
   - from wishlist:
     - to send new message use "(no subject)"-text for empty subject (was '???')
     - for preview show warning on empty subject

   * include/table_columns.php (make_table, add_tablehead):
   - bugfix for new Table-mode TABLE_NO_SIZE: need-form for show-max-rows elements
   - added comment: known classes (CSS) for add_tablehead()

   * admin_admins.php:
   - fix translated-text for removal of translations: /*T_*/('...#header'),
     removed '#header' from now normal texts without "T_(..)"
   - bugfix for Table-use-rows: deactivate show-max-rows with TABLE_NO_SIZE

   * game_comments.php, list_messages.php:
   - bugfix for Table-use-rows: deactivate show-max-rows with TABLE_NO_SIZE

   * features/vote/list_features.php, features/vote/list_votes.php,
     code_examples/filter_example.php:
   - fix adjustment for add_tablehead()-signature and table-rows cell-values
   - reverted default-sort-order for ID, fixed class

   * forum/admin_show_forumlog.php:
   - cleanup table-IDs (removed #3-gap)

   * scripts/updates/database_changes_1_0_14_to_1_0_15.mysql,
     scripts/updates/other_changes_1_0_14_to_1_0_15.txt:
   - started with needed changes for next DGS-release 1.0.15,
     easier to upgrade existing devel-servers

# All changes between releases DGS 1.0.13 (CVS-tag dev-start-20081116)
# and DGS 1.0.14 (CVS-tag DGS-stable-200812) are now merged into
# the MAIN-branch.
# DDL-changes for release 1.0.14 are NOT repeated here within the merge.

   * admin.php, admin_show_adminlog.php, admin_show_errorlog.php,
     admin_show_faqlog.php, admin_show_users.php, forum/admin_show_forumlog.php,
     forum/index.php, forum/list.php, forum/read.php,
     include/quick_common.php, people.php:
   - more merge-fixes:
     - forum-management restriction ADMIN_FORUM -> ADMIN_DEVELOPER
     - overlooked some changes for forum-options
     - adjustment for new add_tablehead()-signature and table-rows cell-values,
       used DATE_FMT2-const, fixed wordwrapping
   - added Table-show-max-rows form-elements
   - added date-format DATE_FMT3 with seconds for admin-log

   * INSTALL, admin.php, admin_show_adminlog.php, admin_show_errorlog.php,
     admin_show_faqlog.php, admin_show_users.php, admin_users.php,
     change_bio.php, do_registration.php, do_registration_blocked.php,
     docs.php, edit_bio.php, error.php,
     forum/admin.php, forum/admin_show_forumlog.php, forum/index.php, forum/list.php,
     forum/forum_functions.php (ForumOptions; add_forum_log, load_forum_id;
       Forum, load_forum_names),
     forum/post.php (post_message, approve_post, reject_post, hide_post, show_post),
     forum/read.php, forum/search.php,
     include/config.php,
     include/connect2mysql.php (mysql_addslashes),
     include/error_functions.php,
     include/quick_common.php (error_on_blocked_ip, is_blocked_ip,
       check_subnet_ip),
     include/std_functions.php (end_page, is_logged_in),
     include/table_columns.php (button_style, make_next_prev_links),
     login.php, message.php, people.php, policy.php, quick_play.php, quick_status.php,
     register.php, rss/status.php, wap/status.php,
     scripts/apc_cache_info.php, scripts/apc_clear_cache.php, scripts/data_export.php,
     scripts/check_block_ip.php, scripts/convert_from_old_forum.php,
     scripts/updates/database_changes_1_0_13_to_1_0_14.mysql,
     scripts/updates/roadmap_1_0_13_to_1_0_14.txt,
     show_games.php, site_map.php, snapshot.php, userinfo.php, waiting_room.php,
     skins/dragon/screen.css:
   - merged all changes for release DGS 1.0.14 from branch [DGS-stable-200712],
     also see NEWS-file and ChangeLog for release 1.0.14:
     - added Dragon-Go-Server policy,
       added mandatory check to register account (need to accept policy)
     - added IP-blocking feature and alternative registration for blocked users
     - added admin-options on user and edit of certain user-attributes:
       - admin-options: deny login with block-reason, hide-bio, deny-edit-bio
       - edit: vacation-days, fever-values, hidden forums (admin/dev), show-time
       - view: IP, browser, some mail-based user attributes
       - added view-page with list of admins and administrated users
       - forum: only present visible forums to user (list, read, searching)
     - added viewing of various logs: Adminlog, Errorlog, FAQlog, added Forumlog
     - writing more logs for user and admin actions

     - dynamical adaption of height of text-areas to edit bio or messages
     - people-page: changed FAQ-main-editor, show list of forum-moderators
     - added optimization (RESTRICT_SHOW_GAMES_ALL-config) to reduce
       slow-queries for ALL-finished games
     - restricted forum-management: ADMIN_FORUM -> ADMIN_DEVELOPER
     - made forum-readings independent from forum-id;
       to prepare for move-thread-to-other-forum,
     - adjusted mysql-version in documentation: DGS needs MySQL5.0.X now
     - some minor bugfixes

     - added scripts to control APC (cache on live-server)
     - added snapshots and instructions for DGS-release 1.0.14

2009-01-02 juga

   * scripts/ChangeLog:
   - removed (msql5)-warning for "CREATE TABLE (..) TYPE=": replaced TYPE= with ENGINE=

2008-12-29 juga

   * scripts/ChangeLog, NEWS:
   - start of merge from all changes for release DGS 1.0.14 from the stable
     branch [DGS-stable-200712] tagged with [DGS-stable-200812]

2008-12-28 juga

# The code up to here is marked with CVS-tag [pre-merge-1_0_14-20081228].

   * features/vote/lib_votes.php:
   - fixed double used varname: voter -> points

   * forum/forum_functions.php (replace_row_forumread):
   - fixed SQL-syntax for INSERT IGNORE

   * change_password.php:
   - bugfix of last fix for guest-id (':'-typo -> ';')

2008-11-03 juga

   * faq.php, NEWS, skins/dragon/screen.css,
     include/faq_functions.php (search_faq_match_terms, check_faq_search_terms,
       build_regex_term),
     include/std_functions.php (contains_mark_terms):
   - added search on FAQ:
     matching words-regex on texts exported in translations-dir
     for user-specific language or FAQ-original-english

2008-11-01 juga

   * forum/post.php:
   - fix SQL-bug for use-case U06 (new thread)

   * include/game_functions.php (allow_add_time_opponent):
   - fix potential bug allowing max of 360 days to add time

   * include/std_functions.php, include/config.php:
   - changed bottom-bar: Logout -> Login, if user is logged out

2008-10-19 juga

   * admin_faq.php, change_bio.php, confirm.php, edit_bio.php, edit_contact.php,
     edit_profile.php, game.php, join_waitingroom_game.php, list_contacts.php,
     news.php, opponents.php, ratingpng.php, search_messages.php, send_message.php,
     sgf.php, snapshot.php, userinfo.php, users.php, waiting_room.php,
     code_examples/filter_example.php, code_examples/filter_example2.php,
     code_examples/form_example2.php, code_examples/test_clock_tick.php,
     code_examples/test_nigiri_random.php, code_examples/tokenizer_example.php,
     features/vote/edit_feature.php, features/vote/lib_votes.php,
     features/vote/list_features.php, features/vote/list_votes.php,
     features/vote/vote_feature.php, forum/forum_functions.php, forum/post.php,
     forum/read.php, forum/search.php, include/board.php, include/contacts.php,
     include/classlib_matrix.php, include/filter.php, include/filter_functions.php,
     include/filter_parser.php, include/filterlib_mysqlmatch.php,
     include/form_functions.php, include/game_functions.php, include/move.php,
     include/message_functions.php, include/quick_common.php, include/rating.php,
     include/std_classes.php, include/std_functions.php, include/table_columns.php,
     include/tokenizer.php, rss/status.php, wap/status.php,
     scripts/data_report.php, scripts/game_consistency.php,
     scripts/player_consistency.php, scripts/update_translation_pages.php:
   - fixed layout:
     'if/for/foreach/while ('-> 'cmd('; some 'else if' -> elseif

   * include/contacts.php:
   - text-change: Admin Crew -> Site Crew,
     item was also meant for translators, FAQ-editors or people
     "contributing" to the server

   * skins/dragon/screen.css:
   - fix v-alignment of page-related tables (bottom)

2008-10-12 juga

   * NEWS:
   - added new and changed features so far (since DGS release 1.0.13)

   * forum/read.php:
   - changed text: Hide -> Hide overview

2008-10-05 juga

   * docs.php:
   - added link to statistics page

   * include/config.php:
   - added note about unused keys for access-keys

   * include/std_functions.php (start_page):
   - added site-map page into main menu

2008-10-03 juga

   * include/connect2mysql.php, INSTALL:
   - use separate local config 'include/config-local.php' copied
     and adjusted from config-template 'include/config.php';
     easier for SourceForge website updates and to avoid CVS-conflicts

   * include/.cvsignore:
   - hide local config file from CVS

2008-09-28 juga

   * forum/forum_functions.php (get_new_string), forum/list.php:
   - thread-list: remove link from NEW-text

   * forum/post.php:
   - bugfix (SQL)

   * forum/forum_functions.php (set_approved, set_pending_approval,
       is_approved, is_pending_approval),
     forum/post.php (post_message, approve_post, reject_post),
     forum/read.php, forum/search.php, scripts/data_export.php:
   - replaced Posts.PendingApproval with new 'P'-enum-value in Posts.Approved
-----------
-- replace Posts.PendingApproval -> Approved (enum 'P')
ALTER TABLE `Posts`
   CHANGE COLUMN Approved Approved enum('Y','N','P') NOT NULL DEFAULT 'Y';
UPDATE Posts SET Approved='P' WHERE PendingApproval='Y';

-- after update above, the "old" column can be dropped
ALTER TABLE `Posts`
   DROP COLUMN PendingApproval;
-----------

   * daily_cron.php:
   - replace forumreads-cleanup: Forumreads -> ForumRead-table

   * forum/forum_functions.php (draw_post, load_threads, load_forum_list; ForumPost;
       ForumRead.replace_row_forumread, recalc_forum_reads, recalc_thread_reads),
     forum/post.php (recalc_forum_counts, cleanup_forum_read),
     forum/index.php, forum/list.php, forum/read.php:
   - calculate and show number of NEW unhidden (approved) posts in
     - forum-list (NEW feature), thread-list and post-list
     - NEW-update is trigger if Forum/Thread.Updated date is newer than last
       recalculation of corresponding ForumRead-entry
       - ForumPost: added field for Posts.Updated for NEW-handling
       - adjust ForumRead-methods to handle count for NEW entries
       - added methods to recalculate forum/thread-list NEW-reads
     - only approved posts are counted as NEW entries, also in moderator-mode

   - post-list: use tighter layout of navigation-images (less spacing)
   - added some safety-fixes on retrieving db-data
   - added methods to recalculate forum-counts (Threads/PostsInForum)
   - moved ForumRead-cleanup into daily_cron.php
   - used workaround to compensate for INSERT-IGNORE (mysql4.1-feature)

   * forum/read.php:
   - add toggle to switch post-tree-overview on/off, saved in Players.ForumFlags

   * include/config.php, include/quick_common.php:
   - defined number of weeks ending NEW-scope of older forum-entries:
     FORUM_WEEKS_NEW_END replacing DAYS/SECS_NEW_END
     - increased min read-date for forum: 4 -> 12 weeks
     - moved initial config for forum-old-entries from quick_common.php
       to config.php as FORUM_WEEKS_NEW_END

   * skins/dragon/screen.css:
   - added white-header font for all forum-views

   * specs/forums.txt:
   - fix some queries to recalculate forum/thread-NEW count

2008-09-15 juga

   * forum/forum_functions.php (replace_row_forumread):
   - fix use CSS-class MyPost
   - fix UPDATE non-affected-rows using insert-IGNORE to avoid duplicate-key-violation,
     removed unnecessary return-values in mark-read-funcs

   * skins/dragon/screen.css:
   - posts overview: use darkblue for own-posts, black for overview-posts
     to achieve fix link-colors sight (URL is changing through page-args)

2008-09-14 juga

   * forum/forum_functions.php (toggle_forum_flags, load_threads),
     forum/index.php, forum/list.php, include/std_functions.php,
     skins/dragon/screen.css:
   - added toggle to show/hide last-post author in forum/thread-list,
     - store current show-state in new Players.ForumFlags-field
     - defined bitmask-constants for flags
   - thread-list:
     - placed show-maxrows submit button on same line as rows-selectbox
     - bugfix loading threads with wrong LastPost
-----------
-- configure forum-GUI for user, manage hidden forum-config for user
ALTER TABLE `Players`
   ADD `ForumFlags` tinyint unsigned NOT NULL default '8' AFTER `MayPostOnForum` ;
-----------

   * scripts/convert_from_old_forum.php:
   - comment about recalculate_postsinforum-func not longer existing

   * forum/list.php:
   - changed valign-style using CSS for multiline-table-cells: middle -> top

   * forum/forum_functions.php (all classes & functions),
     forum/post.php (post_message, approve_post, reject_post, show_post,
       hide_post, recalc_thread_lastpost, recalc_forum_lastpost,
       recalc_thread_counts, cleanup_forum_read),
     forum/index.php, forum/list.php, forum/read.php:
   - changes to post view (forum/read.php):
     - viewing thread-posts now doesn't mark thread as read
     - user can mark single posts as read ('mark read'-link for unread post)
     - user can mark all posts as read ('mark all read'-link in top/bottom-bar)
     - force-reply: reply-form only shown for new thread or if only one post exists,
       so user has explicitly to choose post to reply to
     - added new set for thread-posts navigation: f_*.png (see below)
   - changed time-range for an old NEW (shown in lighter red): 2 -> 4 weeks
   - avoided some RACE-conditions on updating LastPost/Lastchanged-fields
     by using GREATEST(..): newer db-IDs or dates are always greater,
     so can take maximum in sql-updates
   - preparations for NEW-handling in forum- and thread-list
     - added class and db-table ForumRead for handling thread/post-read
       and forum/thread-new-count
   - moved and changed db-writing functions to forum/post.php
     resembling the documented and adjusted use-cases in specs/forums.txt
   - minor bugfixes and optimizations on db-operations
-----------
-- add Posts.Updated for NEW-handling
ALTER TABLE `Posts`
   ADD `Updated` datetime NOT NULL default '0000-00-00 00:00:00' AFTER `Lastedited` ;
UPDATE Posts SET Updated=Lastchanged WHERE Parent_ID=0 ;

-- add Forums.Updated for NEW-handling
ALTER TABLE `Forums`
   ADD `Updated` datetime NOT NULL default '0000-00-00 00:00:00' AFTER `LastPost` ;
UPDATE Forums, Posts
   SET Forums.Updated=Posts.Time WHERE Forums.LastPost>0 AND Posts.ID=Forums.LastPost ;

-- add Table ForumRead for NEW-handling (replacing Forumreads-table)
CREATE TABLE ForumRead (
   User_ID int(11) NOT NULL default '0',
   Forum_ID int(11) NOT NULL default '0',
   Thread_ID int(11) NOT NULL default '0',
   Post_ID int(11) NOT NULL default '0',
   NewCount int(11) NOT NULL default '-1',
   Time datetime NOT NULL default '0000-00-00 00:00:00',
   UNIQUE KEY FR_Uniq (Thread_ID,Post_ID,Forum_ID,User_ID),
   KEY Time (Time)
) ENGINE=MyISAM ;

-- migrate Forumreads- to ForumRead-table
DELETE FROM Forumreads WHERE Thread_ID=0 ;
INSERT INTO ForumRead (User_ID,Forum_ID,Thread_ID,Post_ID,NewCount,Time)
   SELECT FR.User_ID,P.Forum_ID,FR.Thread_ID,-1,-1,FR.Time
      FROM Forumreads as FR INNER JOIN Posts as P ON P.ID=FR.Thread_ID ;

// added images for thread-post-list navigation
copy images/f_bottom.png
copy images/f_firstanswer.png
copy images/f_nextanswer.png
copy images/f_nextparent.png
copy images/f_prevanswer.png
copy images/f_prevparent.png
copy images/f_top.png
-----------

   * specs/forums.txt:
   - added some specs and docu for forums

   * specs/filters.txt:
   - updated to recent changes (country, mysqlmatch, UNION, examples)

   * edit_contact.php:
   - bugfix:
     - check for adding guest-contact also denied adding new contact
     - guest can be added as contact (why not?)

   * skins/dragon/screen.css:
   - changed valign-style using CSS for multiline-table-cells: middle -> top
   - added some CSS for forum-NEW-flag

   * list_contacts.php, search_messages.php, forum/search.php,
     code_examples/filter_example2.php:
   - changed table-cell valign to top using CSS

2008-08-24 juga

   * forum/forum_functions.php (draw_post, create_navigation_tree, set_navigation;
       forum_start_table, make_link_array),
     forum/list.php, forum/search.php,
     change_profile.php, include/std_functions.php:
   - thread view: added post navi link to first answer
   - forum-thread-list: added configurable max-rows with selectbox
     - cleaned up usage for max-rows, set by DisplayForum.max_rows (was page_rows)
     - correctly include offset/maxrows in navigational links
     - replaced var $RowsPerPage with const MAXROWS_PER_PAGE_DEFAULT cause not longer needed
   - minor code-cleanup ("->', removed default-args)

   * include/std_classes.php (RequestParameters.get_entries):
   - added func get_entries to return entries to build-url with array


   * forum/forum_functions.php (draw_overview):
   - thread-tree-overview: show only first 40 chars of subject
     to prevent wrapping (in most cases)

   * forum/read.php:
   - show reply-form only for new-topic and when replying or editing,
     this enforces a user to explicitly choosing a post to reply to
   - omit thread-tree-overview if there are no posts in thread to show

   * skins/dragon/screen.css:
   - removed fixed table-layout for thread-tree-overview

   * edit_profile.php, include/rating.php (convert_to_rating):
   - removed converting of NNGS-rank/rating (not longer existing server)

   * error.php:
   - fixed wording for errors: userid_too_short, password_illegal_chars


   * forum/forum_functions.php (draw_post, draw_overview),
     skins/dragon/screen.css:
   - fixed page-local navigation: used only '#target' to navigate,
     because URL can vary (moderator, search-term, etc)
   - Thread tree-overview:
     - put subject, author, date in separate table-columns
     - mark own posts with bold font
     - use 2-rows-colored background for overview-list: don't use RowX
       standard because of existing background

2008-08-23 juga

   * forum/list.php:
   - removed link to first-new, because of introduced thread-tree-overview
     showing all new's

   * forum/forum_functions.php (DisplayForum.draw_overview, set_rx_term,
       forum_start_table, print_headline, get_new_string, draw_post,
       get_post_edited_string, build_url_post),
     forum/read.php, forum/search.php,
     skins/dragon/screen.css:
   - added thread-tree-overview at top (with own anchors for new entries)
     - added func DisplayForum.draw_overview
     - added separate headline (thread overview & thread read posts),
       moved headline-printing into func print_headline
     - moved handling of rx-terms into DisplayForum,
       added func DisplayForum.set_rx_term (moved passing in as arg)
   - added more anchors (ftop/fbottom) and full url (with rx-term-url-part)
     for navigating to avoid page-reload on jumping
   - added func get_post_edited_string to return edited date-string for post
   - added CSS for thread-tree-overview
   - bugfix draw_post: use post-created date replacing last-updated date


   * forum/forum_functions.php (DisplayForum.draw_post;
       ForumThread.create_navigation_tree, load_posts, load_revision_history;
       ForumPost.set_navigation),
     forum/read.php:
   - fixed navigation in tree-thread-view:
     - DisplayForum.draw_post:
       go to top/bottom, prev/next-parent, prev/next-answer
     - added funcs to create and set navigation:
       ForumThread.create_navigation_tree, ForumPost.set_navigation
     - adjusted funcs to support navigation:
       ForumThread.load_posts/load_revision_history using post_id as key

   * include/std_functions.php (insert_width),
     include/table_columns.php (button_TD_width_insert):
   - replaced var $button_width with const BUTTON_WIDTH
   - compiled func insert_width from table_columns.ph to draw transparent widthed-image

2008-08-21 juga

   * clock_tick.php, do_registration.php, edit_profile.php, error.php,
     features/vote/list_features.php, forum/forum_functions.php, game.php,
     halfhourly_cron.php, include/config.php, include/connect2mysql.php,
     include/error_functions.php, include/graph.php,
     include/message_functions.php, include/page_functions.php,
     include/quick_common.php, include/std_functions.php,
     include/time_functions.php, index.php, introduction.php, list_contacts.php,
     login.php, opponents.php, people.php, quick_status.php, ratinggraph.php,
     rss/status.php, scripts/data_export.php, scripts/data_report.php,
     scripts/mailtest.php, scripts/make_handicap_pattern.php,
     scripts/player_consistency.php, send_new_password.php, sgf.php,
     show_games.php, show_tournament.php, status.php, userinfo.php,
     users.php, wap/status.php:
   - changed vars in include/config.php (using constants)
   - replaced some unchanged vars with constant defines (can remove global-ref):
     DATE_FMT, DATE_FMT2, DB_NAME, EMAIL_FROM,
     FRIENDLY_LONG_NAME, FRIENDLY_SHORT_NAME, GMDATE_FMT, HOSTBASE, HOSTNAME,
     MYSQLHOST, MYSQLUSER, MYSQLPASSWORD, SESSION_DURATION,
     SUB_PATH, TICK_FREQUENCY

2008-08-20 juga

   * forum/forum_functions.php (
       class DisplayForum, Forum, ForumThread, ForumPost, ForumUser;
       change_depth, display_posts_pending_approval, draw_post, echo_links,
       forum_end_table, forum_message_box, forum_start_table, get_new_string,
       load_forum_names, load_revision_history, load_thread_last_read,
       make_link_array, print_moderation_note),
     forum/admin.php, forum/index.php, forum/list.php, forum/old_links_redirect.php,
     forum/post.php (hit_thread), skins/dragon/screen.css,
     status.php:
   - big (unfinished) refactoring
     - separated application logic and presentational layer (GUI & layout)
         from database operations by using classes.
       introduced container-classes used as database-objects with additional
         data used in application-logic.
       get rid of extract($row) and global vars using container-classes
         to pass data into funcs.
       - class ForumDisplay serving as general container to help in displaying
         forum content
       - class Forum representing a forum-object
       - class ForumThread helping in loading list of posts of a thread
       - class ForumPost representing a Post with all its fields
       - class ForumUser temporary representation of a user for creating
         user-references
     - moved funcs needing global data into classes serving as "global" container,
       adjusted function-signatures accordingly moving most args into container
       ready for more refactoring

     - bugfix: setting page-offset and page-rows in DisplayForum-container
       for navigating forum-pages
     - simplified has-more-pages handling for page-navigation
     - moved load_forum_names-func to load forum-names from forum/search.php
     - moved change_depth-func and globals vars from forum/read.php
     - moved loading of post revision history data from forum/read.php
     - added func: hit_thread to increase thread-hit-activity
     - used shared appearance of user-reference
     - used QuerySQL in order to share common parts

     - optimized and cleaned up code
       - replaced var $new_level1 with const NEW_LEVEL1
       - using convenience funcs for mysql-access
       - replaced nested ternary-operators with if-clause
       - position of code has changed due to refactoring
       - clearer naming of some vars (switching admin-status and more)
       - added comments & TODOs

     - adjusted chdir-bracing to include forum_functions.php (always expect root-dir)
     - moved ALLOW_QUOTING into config.php

   - changed thread-navigation for parent post '^' on left of subject
     into footer of post with full navigation to top/bottom, prev/next parent/post
     using existing icons;
     left to do is
     - position of 'navigation'
     - used icons
     - implementation of full navigation

   * forum/index.php:
   - added header-row with column-titles
   - added column "number of threads" per forum
   - added author with user-reference for last-post
   - added link from last-post-date to view post
   - adjusted CSS

   - moved and enhanced db-table description (Posts) from forum/index.php

   * forum/list.php:
   - added column hits representing "activity" in a thread
   - added author with user-reference for last-post
   - added link from last-post-date to view post
   - adjusted CSS

   * forum/read.php (revision_history, change_depth):
   - increased thread-hits representing thread-"activity"
   - moved loading of revision history data of a post from forum/read.php
-----------
-- add Forums.ThreadsInForum & seed it
ALTER TABLE `Forums`
   ADD `ThreadsInForum` int(11) NOT NULL default '0' AFTER `LastPost` ;
UPDATE Forums,
   (SELECT Forum_ID, COUNT(*) AS X_Count
       FROM Posts WHERE Approved='Y' AND Thread_ID>0 AND Parent_ID=0
       GROUP BY Forum_ID) as TMPF
   SET Forums.ThreadsInForum=TMPF.X_Count WHERE Forums.ID=TMPF.Forum_ID ;

-- add Posts.Hits
ALTER TABLE `Posts`
   ADD `Hits` int(11) NOT NULL default '0' AFTER `PostsInThread` ;
UPDATE Posts,
   (SELECT ID, COUNT(*) AS X_Count
       FROM Posts WHERE Thread_ID>0 AND PosIndex>''
       GROUP BY Thread_ID HAVING X_Count>0) as TMP
   SET Posts.Hits=TMP.X_Count WHERE Posts.ID=TMP.ID ;
-----------

   * forum/search.php:
   - bugfix: setting page-offset and page-rows in DisplayForum-container for navigating
   - simplified has-more-pages handling for page-navigation
   - bugfix: using standard access-keys for filters
   - optimized SQL-query (removing not needed join with Forums-table)

   * error.php:
   - added error-code 'invalid_args'
   - adjusted chdir-bracing to include forum_functions.php (always expect root-dir)

   * skins/dragon/screen.css:
   - forum-index: added header, column post-count, linked last-post-date
   - forum-thread-list: added column hits, linked last-post-date
   - added debug-CSS for table-working (commented out)

   * include/config.php:
   - moved global feature ALLOW_QUOTING from forum/forum_functions.php

   * daily_cron.php, include/quick_common.php:
   - replaced var $new_end with const SECS_NEW_END

2008-08-16 juga

   * specs/db/table-Posts.txt:
   - moved and enhanced db-table description (Posts) from forum/index.php

2008-08-15 juga

   * include/message_functions.php (game_settings_form):
   - changed time defaults of new game: from [JAP: 90d + 10x1d] to [Fischer: 30d + 1d]

   * forum/search.php,
     code_examples/filter_example2.php:
   - show potential filter-warnings for mysql-match-search
   - replaced some " -> '-strings

   * include/filter.php (class Filter: to_string, get_filter_keys, warnmsg, has_warn, init_parse),
     include/filter_functions.php,
     include/filterlib_mysqlmatch.php (class FilterMysqlMatch: parse_value, extract_match_terms):
   - added warning-message (used for stopwords-warning of mysql-match-search)
   - added prefix/suffix format for filter-warnings
   - added english stopwords

   * include/form_functions.php (create_string_func_filterwarn, print_insert_filterwarn):
   - added FILTERWARN-element to show potential filter-warnings

   * include/table_columns.php (make_filter_row, make_table_filter):
   - show potential filter-warnings in filter-row

   * skins/dragon/screen.css:
   - added formats for showing filter-warnings (color teal=darkcyan)

   * opponents.php:
   - replaced some " -> '-strings

2008-08-13 juga

   * news.php, skins/dragon/screen.css:
   - format TOC with CSS

2008-08-12 juga

   * confirm.php, game.php:
   - allow resign during opponents turn
   - share common Status-checks using var

2008-08-11 juga

   * game.php:
   - added preview of move-submit-message
   - added accesskeys for next-game-submit and preview
   - jump to message-box-anchor in validation-step
   - replaced some "-strings by '-strings

   * include/board.php (draw_board, draw_move_message):
   - added draw_move_message-func to draw and preview move-message

   * confirm.php, game.php:
   - allow deleting game on opponents turn

2008-08-10 juga

   * include/message_functions.php (game_settings_form):
   - set default for Standard-Handicap to on

   * userinfo.php:
   - show users timezone, local time and night-start;
     { from 26-Oct-2007 release-talk allowed by Erik }

   * include/classlib_matrix.php (get_x_axis, get_y_axis):
   - fixed get_x/y_axis returning only keys

2008-08-09 juga

   * include/std_functions.php (start_page, make_menu_horizontal,
       make_menu_vertical, cmp1, cmp2),
     include/classlib_matrix.php:
   - use Matrix-class to draw vertical and horizontal dragon-menu
     with any x/y-layout,
   - removed cmp1/cmp2-funcs involved in old dragon-menu drawings

2008-08-05 juga

   * include/filter.php (FilterCountry, FilterMysqlMatch),
     include/filterlib_country.php (FilterCountry),
     include/filterlib_mysqlmatch.php (FilterMysqlMatch),
     code_examples/filter_example2.php, forum/search.php, list_contacts.php,
     opponents.php, search_messages.php, users.php, waiting_room.php:
   - moved FilterCountry & FilterMysqlMatch into separate class-files
     include/filterlib_country.php, include/filterlib_mysqlmatch.php
   - moved init-countries into include/countries.php

   * include/countries.php (init_countries),
     change_profile.php, edit_profile.php, userinfo.php:
   - moved init-countries into include/countries.php (revert change),
     if countries-map is used, it must be initialized (require_once)

   * include/rating.php (con_value, a_value, convert_to_rating):
   - init consts-table as global vars: IGS_TABLE, A_TABLE, CON_TABLE
   - shorten case-statements (using less breaks, assuming needrank-default)

2008-08-03 juga

   * status.php:
   - reduced User-Info on status-page to most important values
     to have more space for games-list:
     - moved user-name/handle/rank into section-title
     - show vacation-info only if on vacation
     - all other info removed, can be viewed on user-info-page

   * INSTALL:
   - added description for CACHE_FOLDER

   * game.php, opponents.php, sgf.php:
   - layout (spacing around '?'-op)
   - added comments, fixed typos, fixed debug-msg

   * game_comments.php:
   - changed SQL: Moves.Stone= OR Moves.Stone= -> using IN-operator
   - using '-strings for some constant-strings

   * show_games.php:
   - uses $page-var
   - clearer comments for views & others
   - avoid double use of '?'-operator

   * site_map.php:
   - added statistics-page in site-map
   * statistics.php:
   - added FIXME (only for Linux)

   * include/config.php:
   - added note for MYSQL-version (refer to PHP-version_compare-function)

   * include/connect2mysql.php (mysql_single_fetch),
     scripts/convert_from_old_forum.php, scripts/data_export.php:
   - defined and used fetch-types FETCHTYPE_ARRAY/ASSOC/ROW
     for mysql_single_fetch(),
     renamed some local vars making usage clearer
   - replaced some strange-layouted use of '?'-operator
   - added doc for functions: check_passwd_method, check_password

   * include/contacts.php (load_globals):
   - changed userflag-text: Admin-crew -> Admin Crew

   * include/error_functions.php (dump_exit):
   - used local function to clear array

   * include/form_functions.php (Form):
   - clearer doc for make_texts_safe-var

   * include/page_functions.php (HTMLPage, Page):
   - renamed/fixed constructor of HTMLPage: Page -> HTMLPage,
     added constructor for Page-class
   - minor layout changes, fix typos

   * include/rating.php (read_rating, convert_to_rating):
   - put rating-pattern in constant
   - added more doc for functions: read_rating, convert_to_rating
   - renamed local var: needkyu -> needrank
   - minor layout changes

   * include/std_functions.php (read_from_file), game_comments.php:
   - added some comments, fixed typos
   - read_from_file: added FIXME (PHP6 has different signature)
   - using ' for some constant-strings and " for HTML-attributes

   * include/table_columns.php (warning_cell_attb), waiting_room.php:
   - warning_cell_attb-signature has bool-arg (clearer usage than int)
   - used clearer doc and vars for warning_cell_attb-function

   * scripts/ChangeLog:
   - detailed and corrected some older logs since Jan-2008 by Rod,
     added performed changes for easier creation of NEWS-file,
     especially for further actions needed for release and
     documentation about changes visible to DGS-users
   - fixed typos

2008-08-02 juga

   * include/config.php, include/filter.php,
     admin_admins.php, admin_faq.php, edit_bio.php, edit_folders.php,
     edit_profile.php, forum/admin.php, forum/forum_functions.php,
     game.php, include/form_functions.php, include/std_functions.php,
     include/table_columns.php, list_contacts.php, list_messages.php,
     message.php, opponents.php, search_messages.php, show_games.php,
     translate.php, users.php, waiting_room.php:
   - introduced constants for accesskeys,
     especially easier for configuration of DGS-clones
   - changed accesskeys for filter-search: x -> e, z stays =reset
   - fixes to allow '0' as accesskey

   * forum/list.php:
   - removed unused SQL-join (LastPost)
   - cleanup double comment

   * admin_admins.php, opponents.php, users.php:
   - reverted '#'-header to clearer 'ID',
     '#' has too many interpretations (id, number, count)
     and already is used as count-representation in wait-room
   * show_games.php, status.php:
   - changed '#'-header (former 'ID') to clearer 'Game ID'

   * features/vote/list_votes.php:
   - changed Type-header -> Status

   * add_to_waitingroom.php, admin_admins.php,
     admin_do_translators.php, admin_faq.php,
     code_examples/filter_example2.php, code_examples/test_clock_tick.php,
     confirm.php, daily_cron.php, edit_contact.php, edit_folders.php,
     edit_profile.php, features/vote/lib_votes.php, forum/admin.php,
     forum/forum_functions.php, forum/post.php, forum/search.php,
     halfhourly_cron.php, include/GoDiagram.php, include/board.php,
     include/contacts.php, include/coords.php, include/filter.php,
     include/filter_functions.php, include/filter_parser.php,
     include/form_functions.php, include/game_functions.php,
     include/make_game.php, include/message_functions.php, include/move.php,
     include/page_functions.php, include/quick_common.php, include/rating.php,
     include/std_classes.php, include/std_functions.php,
     include/table_columns.php, include/time_functions.php,
     include/tokenizer.php, include/tournament.php, join_waitingroom_game.php,
     list_messages.php, list_tournaments.php, login.php, message.php,
     message_selector.php, opponents.php, quick_play.php, quick_status.php,
     scripts/data_export.php, scripts/game_consistency.php,
     scripts/make_handicap_pattern.php, scripts/message_consistency.php,
     scripts/player_consistency.php, send_message.php, sgf.php,
     show_tournament.php, translate.php, update_translation.php,
     userinfo.php, waiting_room.php,
     scripts/ChangeLog:
   - replace and/or with &&/|| in logical expressions
     because of =-precendence; see README.developers
   - fix cast, layouting of 'or error()', correct typos

   * scripts/README.developers:
   - added texts about:
     - translation-texts
     - using and/or/xor <-> &&/||, logical expression vs. and/or-command
     - usage of list(), don't reuse varnames
     - DGS-conventions for SQL-aliases
     - string constants

2008-08-01 juga

   * features/vote/edit_feature.php, features/vote/lib_votes.php,
     features/vote/list_features.php, features/vote/list_votes.php,
     features/vote/vote_feature.php:
   - adjusted to Table-signature changes (new add_tablehead, default-sort)
   - use standardized GUESTS_ID_MAX-check for guest-user
   - used table-id 33 for static column (Actions)

2008-07-28 juga

   * .cvsignore:
   - ignore temp-dir (CACHE_FOLDER)
   - ignore favicon.ico

   * NEWS, news.php:
   - added %TOC% (table of contents) parsed from NEWS-file
   - added main changes for all releases

   * include/config.php:
   - adjusted comment

   * features/vote/edit_feature.php, features/vote/lib_votes.php,
     features/vote/list_features.php, features/vote/list_votes.php,
     features/vote/vote_feature.php:
   - added feature-voting (feature list, voting on feature)
   - start-page is list_features.php
-----------
-- add feature-voting
CREATE TABLE FeatureList (
   ID int(11) NOT NULL auto_increment,
   Status enum('NEW','NACK','ACK','WORK','DONE','LIVE','ARCH') NOT NULL default 'NEW',
   Subject varchar(120) NOT NULL,
   Description text NOT NULL,
   Editor_ID int(11) NOT NULL default '0',
   Created datetime NOT NULL default '0000-00-00 00:00:00',
   Lastchanged datetime NOT NULL default '0000-00-00 00:00:00',
   PRIMARY KEY (ID),
   KEY Status (Status),
   KEY Editor_ID (Editor_ID)
) ENGINE=MyISAM;

CREATE TABLE FeatureVote (
   fid int(11) NOT NULL,
   Voter_ID int(11) NOT NULL default '0',
   Points int(11) NOT NULL default '0',
   Lastchanged datetime NOT NULL default '0000-00-00 00:00:00',
   PRIMARY KEY (fid,Voter_ID),
   KEY Voter_ID (Voter_ID)
) ENGINE=MyISAM;
-----------

   * include/std_classes.php (add_part, add_part_fields):
   - added add_part_fields() to add SQL-part (for SQLP_FIELDS only)
   - added comments

   * include/filter.php (read_defaults):
   - fixed bug in read_defaults(): selectbox default failed

   * include/filter.php (SearchFilter.get_url_parts,
      Filter.get_url_parts, FilterMysqlMatch.extract_match_terms),
   * include/std_functions.php (build_hidden, build_url):
   - undo empty()-value-check, because some clients (e.g. filters) need ''<>0

   * include/table_columns.php (current_order_string):
   - overall more white-spaces, more doc, typos
   - current_order_string(): added FIXME with question (preg_replace usage?)

2008-06-06 rodival

   * include/std_functions.php (start_html),
     include/table_columns.php (make_tablerow),
     scripts/data_export.php, scripts/data_report.php,
     scripts/player_consistency.php, js/common.js,
     game.php, edit_profile.php, change_profile.php:
   - introducing the JavaScript tools and their management (profile setting)
-----------
-- enable JavaScript usage for old players (as actually):
-- perform this only, if your DGS-server wants to support JavaScript
UPDATE Players SET Boardcoords=Boardcoords|0x100;
-----------

   * statisticspng.php, statratingspng.php:
   - managed to disable the image-cache feature from the url

2008-06-05 rodival

   * game.php:
   - change the simple toggle notes feature to a true switch on/off one;
     to avoid a toggle back when refreshing the page
   - enhance the private notes management to avoid some database updates

   * include/table_columns.php (add_tablehead),
     include/message_functions.php (message_list_head),
     admin_admins.php, game_comments.php, list_contacts.php,
     list_tournaments.php, opponents.php, show_games.php, status.php,
     users.php, waiting_room.php,
     code_examples/filter_example.php:
   - adjusted the parameters of the add_tablehead() function.
     this should be the last step of the "tablehead" modifications

2008-06-04 rodival

   * include/std_functions.php (is_logged_in, activity_string),
     halfhourly_cron.php, daily_cron.php, confirm.php, quick_play.php,
     users.php, userinfo.php, opponents.php,
     statistics.php, statratingspng.php,
     scripts/browser_stats.php:
   - changed the type of the Activity column of the Players table
     from DOUBLE to INT to speed up the rebuilds of the table index.
   - also managed the Activity values as a fixed decimal number
     to preserve enough precision (Activity column= $activity * 1000)
   - added a third ActiveLevel which should help to distinguish
     the robots (overheated activity)
-----------
copy /images/star3.gif

-- change Players.Activity: float -> integer
UPDATE Players SET Activity=FLOOR(1000*Activity) WHERE Activity>0;
ALTER TABLE Players
   CHANGE Activity Activity INT(11) NOT NULL DEFAULT '15000';
-----------

   * include/time_functions.php, include/quick_common.php,
     include/connect2mysql.php (disable_cache),
     clock_tick.php, daily_cron.php, sgf.php, quick_status.php, graph.php,
     scripts/make_handicap_pattern.php:
   - added $gmtdate_fmt, updated the headers using GMT dates
   - moved $date_fmt to quick_common.php
   - minor MySQL query enhancements and comment adjustments
   - moved make_handicap_pattern.php from /pattern folder to /scripts folder

   * include/std_functions.php (game_reference), game_comments.php:
   - fix a bug since ADDTIME feature update (duplicated rows if ADDTIME)
   - changed the char used for the moves number in the games references

2008-05-31 rodival

   * include/std_functions.php (send_message, notify),
     halfhourly_cron.php, confirm.php, quick_play.php:
   - introduced the FIND_IN_SET function in notification queries

   * include/std_functions.php (start_html):
   - now set the favicon href with the full absolute path

2008-05-30 rodival

   * halfhourly_cron.php:
   - optimization of the update-vacations query

   * include/std_functions.php,
     status.php, show_games.php:
   - add of a "Notes" column in the Status and Games list-tables owned
     by the reader
   - this column had been added with the number 32 to also test this
     newly deletable column which use the sign bit
   - also modified the favicon href to "/favicon.ico"... as a new try

   * include/connect2mysql.php (connect2mysql, db_query, versioncmp):
   - adjusted db_query() when error() is not a "die" function
   - removed versioncmp() using version_compare() instead
   - a different way to manage the ignore_user_abort setting

2008-05-26 rodival

   * include/table_columns.php (Table, add_tablehead, make_table,
       is_column_displayed),
     include/message_functions.php (message_list_head, message_list_body),
     list_messages.php, search_messages.php, list_tournaments.php:
   - enhanced (and finished) the management of the TABLE_NO_SORT
     and TABLE_NO_HIDE options.
   - removed the now useless Static_Columns variable
   - removed the now useless $no_sort argument of message_list_head()

   * include/std_functions.php (is_logged_in, send_message, notify),
     send_new_password.php, admin_admins.php, send_message.php,
     list_contacts.php, join_waitingroom_game.php, edit_contact.php,
     change_profile.php, change_bio.php, add_to_waitingroom.php,
     contacts.php, change_password.php:
   - minor fixes around the 'guest' account particularity
   - at least, it highlight where the guest id is used in our code
   - now, is_logged_in returns the id (id>0) of the player who is logged in
     (instead of the previous simple true)
   - various LIMIT added on MySQL queries

   * include/std_functions.php (switch_admin_status, set_cookie_prefs),
     forum/search.php, forum/read.php, forum/index.php, forum/list.php,
     forum/forum_functions.php (set_moderator_cookie),
     change_profile.php:
   - generalized way to handle the moderator status
   - set_moderator_cookie() is replaced by switch_admin_status()
   - set_cookie_prefs() now had the player_row as parameter
     like get_cookie_prefs()

2008-05-24 rodival

   * include/table_columns.php, include/message_functions.php,
     list_contacts.php, opponents.php, waiting_room.php:
   - a full set of 32 columns which can be shown or hidden in the
     table-list (id from 1 to 32)
     - ids > 32 are static by definition
     - ids <= 0 are no longer allowed: replaced the few existing ones by id 33
   - the database fields of the Column_set must be reseted to SIGNED INT:
-----------
-- change Players table-columns-handling
ALTER TABLE Players
 CHANGE UsersColumns UsersColumns INT( 11 ) DEFAULT '-1' NOT NULL ,
 CHANGE GamesColumns GamesColumns INT( 11 ) DEFAULT '-1' NOT NULL ,
 CHANGE RunningGamesColumns RunningGamesColumns INT( 11 ) DEFAULT '-1' NOT NULL ,
 CHANGE FinishedGamesColumns FinishedGamesColumns INT( 11 ) DEFAULT '-1' NOT NULL ,
 CHANGE ObservedGamesColumns ObservedGamesColumns INT( 11 ) DEFAULT '-1' NOT NULL ,
 CHANGE WaitingroomColumns WaitingroomColumns INT( 11 ) DEFAULT '-1' NOT NULL ,
 CHANGE TournamentsColumns TournamentsColumns INT( 11 ) DEFAULT '-1' NOT NULL ,
 CHANGE ContactColumns ContactColumns INT( 11 ) DEFAULT '-1' NOT NULL ;
-----------

2008-05-23 rodival

   * include/std_functions.php (start_html), INSTALL:
   - because of old browsers favicon.ico should be in the root folder
-----------
copy /images/favicon.ico into the root folder
-----------

   * include/move.php, include/faq_functions.php, include/countries.php,
     include/tournament.php, include/tokenizer.php, include/table_infos.php,
     include/GoDiagram.php, include/contacts.php ,include/filter_parser.php,
     include/page_functions.php, include/time_functions.php,
     include/make_game.php, include/board.php, include/filter_functions.php,
     include/make_translationfiles.php, include/error_functions.php,
     include/rating.php,
     scripts/player_consistency.php, scripts/data_report.php,
     scripts/data_export.php, scripts/generate_translation_texts.php,
     rss/status.php, forum/search.php,
     index.php, edit_vacation.php, update_translation.php,
     translate.php, introduction.php, game_comments.php, login.php,
     join_waitingroom_game.php, error.php, confirm.php, add_to_waitingroom.php,
     edit_folders.php, change_profile.php, admin_do_translators.php:
   - a bunch of pending minor adjustements or comments

2008-05-22 rodival

   * game.php:
   - typo

   * include/table_columns.php (Table, set_default_sort, set_sort,
       current_order_string, make_sort_string, add_or_del_columnn,
       make_tablehead, current_filter_string),
     status.php (show games part), show_games.php,
     users.php, opponents.php, list_contacts.php,
     list_tournaments.php, waiting_room.php:
   - removing the risk of mysql injection using the sort? arguments
     now, the sort arguments of the URL mentions the column number
     instead of the raw MySQL field (or alias).
   - also replaced the TABLE_ALLOW_DOUBLE_SORT constant by
     TABLE_MAX_SORT and the cluster of $Sort?+$Desc? variables by
     a single array
   - added some asserts to clearly force the use of some functions
     before or after the table_head definitions (using Head_closed-var)
   - Table(): added a mode parameter to manage the global behaviour
     of the table (not yet fully implemented, coming soon)
   - removed set_sort() which is now dispatched into other functions
   - set_default_sort(), make_sort_string(): the arguments became
     +/- column numbers instead of mysql fields + desc_flags
   - show_games.php and status.php:
     changed default sort-direction for ID (descending)

   * include/message_functions.php (message_list_table,
       message_list_head, message_list_body),
     status.php (show messages part), list_messages.php, search_messages.php:
   - separated message_list_table($which_part) into two clear functions
     message_list_head and message_list_body with dispatched arguments

   * include/filter.php (get_url_parts),
     scripts/message_consistency.php, message.php:
   - filtering out empty url parts
   - minor adjustements and comments

   * change_profile.php:
   - the country was no more editable

2008-05-21 rodival

   * include/std_functions.php (make_url, build_url, build_hidden,
       write_to_file, read_from_file),
     include/filter.php, include.std_classes.php,
     include/form_functions.php,
     game.php:
   - split of the make_url function into make_url(unchanged behaviour)
     and build_url which build the query part of an URL from an array
   - add of build_hidden which build the 'hidden' lines of a form from
     an array
   - others are various use of build_hidden and build_url,
     and replacement of some calls to the array_push function
     by the quicker and equivalent "[]=" array operator

   * include/sgf_parser.php,
     scripts/update_translation_pages.php,
     pattern/make_handicap_pattern.php:
   - use of funcs: read_from_file, write_to_file

   * include/std_functions.php (get_request_user), show_games.php:
   - get_request_user() now return 0 if it had found nothing or
     the type of what it had found
   - slightly modified the columns in show_games.php to free
     some of them; needs migration of bitmasks in DB;
     changed table-field-numbers of
     - Games.Weekendclock: #12 -> #24
     - Players.LastAccess: #15 -> #25
   - changed position of handling for RU-section (user running games)
   - use of the get_request_user() returned info
   - table-field #11 and others had been put into FU-section only,
     FU=user finished games

2008-05-16 rodival

   * skins/dragon/screen.css, include/config.php,
     include/graph.php (get_image_type, image_passthru),
     include/std_functions.php (grab_output_start, grab_output_end,
       read_from_file),
     statistics.php, statisticspng.php, statratingspng.php,
     ratinggraph.php, ratingpng.php:
   - introduction of a cache management for the stats graphics
   - enabled/disabled with the CACHE_FOLDER constant in config.php
-----------
// see also CACHE_FOLDER in config.php
// The Sourceforge devel server needs a soft link: (where temp is CACHE_FOLDER)
// This is an example for the devel-server only
 mkdir /tmp/persistent/dragongoserver/temp/
 chmod 775 /tmp/persistent/dragongoserver/temp/
 ln -s -d /tmp/persistent/dragongoserver/temp /home/groups/d/dr/dragongoserver/htdocs/temp
-----------

   * install.php, licence.php, news.php, todo.php:
   - using the new read_from_file function

   * include/std_functions:
   - many changes like:
     - preg % -> /
     - use  " -> '  in html_safe_preg-array

2008-05-15 rodival

   * skins/dragon/screen.css,
     forum/forum_functions.php (draw_post),
     forum/post.php (post_message):
   - added an anchor to retrieve the replied post in the forums
   - CSS'ed the 3 rows post headers
   - replaced logical operators: and/or -> &&/||

2008-05-11 rodival

   * include/time_functions.php, clock_tick.php,
     edit_profile.php, change_profile.php:
   - limitation of the number of rows returned by the
     "find_timeout_games" query in clock_tick.php
   - NIGHT_LEN constant added
   - various comments around "night" clocks management

   * statratingspng.php:
   - just a comment added

2008-05-09 rodival

   * include/std_functions.php (send_email, verify_email,
       parse_tags_safe, make_html_safe, illegal_chars, is_logged_in,
       get_request_user, user_reference),
     include/error_functions.php (add_error),
     sgf.php (sgf_simpletext):
   - changing some bad ereg_* to preg_*... maybe, in the way to
     replace all the ereg* functions by their preg* equivalent!

2008-05-05 rodival

   * status.php, show_games.php, site_map.php:
   - replacing "Show my observed games" by "Show games I'm observing"

   * admin_translators.php:
   - removing missed translations in this page

2008-05-04 rodival

   * status.php, show_games.php, site_map.php,
     edit_bio.php, edit_folders.php:
   - various ajustments of the texts or urls of the bottom links
   - changed text: games -> my games

   * statistics.php, statisticspng.php:
   - removing the 'loadavg' stats from the end-users view
   - added the 'Activity' curve in the graph (activated in the URL)

   * clock_tick.php, halfhourly_cron.php, daily_cron.php,
     include/std_functions.php (end_html, get_accounts_from_ip),
     include/error_functions.php (echo_error_list, list_string, dump_exit):
   - better handling of the errors during cron jobs
   - a small optimization of the (often slow) 'Activity' level query
     in halfhourly_cron.php
   - changed echo_error_list to list_string which no more "echo" the string
   - added dump_exit which echo the pending errors and exit
   - added an automatic dump of pending errors at the end of pages
   - removed the not so good get_accounts_from_ip function

   * confirm.php, quick_play.php:
   - handled in the right order the game.Status and ToMove_ID errors

   * include/filter.php (get_submit_elements):
   - added the tooltips to the buttons of the search filters

   * include/std_functions.php (get_accounts_from_ip, get_players_field):
   - replaced get_accounts_from_ip()-func by more general get_players_field()

2008-05-02 rodival

   * include/std_functions.php (limit),
     include/coords.php (sgf2number_coords, board2number_coords),
     include/filter_parser.php (parse),
     include/form_functions.php (parse_layout_global),
     include/tokenizer.php (parse_quote_double, parse_quote_quote,
       parse_quote_escape),
     include/GoDiagram.php (echo_board):
   - replacing the string indexes using the deprecated '{}' by '[]'

   * edit_vacation.php, halfhourly_cron.php:
   - optimization of "vacations start/end" queries on the Games table

2008-04-29 rodival

   * include/form_functions.php (get_hiddens_string),
     include/table_columns.php (get_hiddens_string):
   - handled forbidden chars in hiddens

   * scripts/data_report.php:
   - fixed a possible W3C compliance problem

2008-04-28 rodival

   * include/std_functions.php (user_reference, make_tools):
   - user_reference: fix a badly matched parenthesis
   - make_tools: complete the last row with enough empty cells
   - else minor fixes

2008-04-27 rodival

   * error.php:
   - adjusting the "404 not found" error handling

   * skins/dragon/screen.css,
     edit_profile.php:
   - added warning messages for empty rating or email

   * skins/dragon/screen.css,
     forum/index.php, forum/list.php:
   - more CSS-ing including column-classes

   * scripts/update_translation_pages.php,
     scripts/generate_translation_texts.php:
   - displaying the group-names

   * include/translation_functions.php:
   - adjusted the '#'suffix removing function
     now, if you need a '#' which is removed, end the string with a '#'

   * admin.php, admin_admins.php, admin_password.php, admin_faq.php,
     admin_translators.php, admin_do_translators.php, translate.php,
     forum/admin.php:
   - removing translations for the "admin" pages.
     Some of them have already been removed during a previous commit,
     so for those, I just removed the now useless $TranslateGroups[] line.

   * skins/dragon/screen.css,
     game.php (draw_moves), include/board.php:
   - a try to make the HTML-code of the "goto move" selection box smaller
     by offering only a sub-set of the options;
     previously "230 moves" was meaning "230 option lines".
     Maybe this was causing the "Game page truncated" bug with some
     browsers on 25x25 boards.
   - modified the URI &toggleobserve= behaviour to avoid that
     a refresh of the page toggle back the game status.
     Former value '1' to toggle has been changed to y&n, which needs
     FAQ-adjustment for observing own-games-trick
   - adjusted some minor CSS

   * show_games.php:
   - an other query adjustment (maybe a go-back fix)

   * include/rating.php (update_rating):
   - commented the not used update_rating() function

   * forum/list.php:
   - add a full user_reference to the thread list

2008-04-25 rodival

   * include/message_functions.php (message_list_table),
     include/table_columns.php (add_tablehead, make_tablerow,
       make_table_filter, warning_cell_attb, button_TD_anchor),
     include/filter.php,
     status.php, users.php, show_games.php, game_comments.php,
     waiting_room.php, list_contacts.php, list_tournaments.php,
     opponents.php, admin_admins.php,
     skins/dragon/screen.css,
     code_examples/filter_example.php:
   - introducing a "by column" class in the list-tables
   - add_tablehead() now fully handle the last 'attbs' argument
   - the table_row array supplied to add_row() no more have to include
     the "<td></td>" tag: it will be added with the right attributs
   - also adjusted the filter-row build to handle the column-classes
   - adjusted all the pages using a list-tables

   * include/std_functions.php:
   - added consts NO_VALUE, UNKNOWN_VALUE

2008-04-17 rodival

   * include/countries.php (init_countries), include/filter.php,
     list_contacts.php, userinfo.php, users.php, waiting_room.php,
     opponents.php, edit_profile.php, change_profile.php:
   - modified the load of the $COUNTRIES array to have it translated
     at once (and so, fixing untranslated country-filters).
   - doing so, introduced the init_countries() to be used once the
     translations are already loaded.
   - removed the includes of countries.php and rating.php from
     filter.php. Now, they must be included by the calling script
     only when a "country" or "rating" column is used.

   * include/rating.php (read_rating, rank_to_rating, convert_to_rating,
     handicapfactor):
   - removed some calls to error() in the rating-decoding functions
     to avoid the rating-filters to rise a nasty jump_to error.php,
     returning instead the -OUT_OF_RATING value.
   - adjusted accordingly some other functions
   - introduced the handicapfactor() function to centralize this shared
     part of some calculus

   * include/make_game.php, add_to_waitingroom.php:
   - minor adjustement around ratings

   * include/contacts.php (has_contact), userinfo.php:
   - slightly modified the return value of has_contact() to include
     the case where the 2 users can't have contacts.

   * include/translation_functions.php (include_all_translate_groups,
       include_translate_group),
     include/quick_common.php (get_preferred_browser_language, recover_language),
     include/make_translationfiles.php (make_known_languages):
   - adjusted the including/reconstruction of known_languages.php
     to try to avoid some of its loads (according to APC-stats
     nearly loaded twice as needed)
   - allowed the 'N'=Native pseudo-language to be selected from the
     browser settings.
   - changed the $TranslateGroups of known_languages.php to "Common"
     to avoid to load the "Users" group when not needed
   - allowed '_' as alternate-text in T_('text#alternate')

   * include/form_functions.php (print_insert_select_box),
     admin_translators.php:
   - changed the behaviour of the 'SELECTBOX' operator of the form build.
     When multiple is enabled the right "[]" is appended to the name.

   * quick_status.php:
   - removed the profile language detection. no-translation => forced utf-8.

   * scripts/data_export.php:
   - changed MYSQL_VERSION to READ_MYSQL_VERSION

2008-04-16 rodival

   * include/filter.php (add_or_del_filter):
   - added the prefix to the "toggle filter" actions (else remove them
     into include/table_columns.php (make_table_filter)).
     Bugfix [http://www.dragongoserver.net/forum/read.php?forum=4&thread=18318]
     and each class/table using SearchFilter with prefix like:
       search_messages.php, show_games.php, opponents.php, list_contacts.php,
     though was only a problem for show_games.php because there are different
     filter-prefixes in use

2008-04-09 rodival

   * site_map.php:
   - fix an invalid link

   * error.php:
   - better handling (Errorlog recording) of the htaccess errors
   - temporary hide an unsolved DGS problem (numerous 404 on /favicon.ico
     and /phorum/post.php)... waiting better

2008-04-04 rodival

   * include/filter.php, include/filter_parser.php,
     include/std_classes.php, include/table_columns.php,
     users.php, opponents.php:
   - some mysql-'AS' adds, minor fixes and comments

   * message.php:
   - change a section title to emphasize the fact that only the
     message is previewed, not the game settings (as far as now)

   * include/connect2mysql.php (mysql_addslashes, db_close, db_query,
     versioncmp, check_passwd_method, connect2mysql):
   - because of a deprecated mysql_escape_string(), force the use
     of mysql_real_escape_string() if exists
   - introduce 2 new functions: db_close and db_query
   - enhance the password recovery: SHA1 instead of SHA and add versioncmp()
   - add a retry feature for the database connection in connect2mysql()

   * include/config.php:
   - set the default password encryption to SHA1

   * include/page_functions.php, include/std_functions.php (start_html),
     admin_faq.php, admin.php, userinfo.php, translate.php, status.php,
     snapshot.php, site_map.php, people.php, news.php, links.php,
     introduction.php, docs.php, show_games.php,
     forum/index.php, forum/admin.php:
   - introducing the pages classes. Right now, it mainly helps the CSS stuff
     and solves some E_WARNING messages disturbing the header() outputs,
     more to come
   - removing all the (old and temporary) "$ThePage['class']=..." lines,
     replacing them with the new "$ThePage = new Page(...)"
   - the start_html() is adjusted handle the presence of this new class

   * show_games.php:
   - fix some bugs around query (filter and sort)
     reduced a little the db connection time.
   - cleanup Weekendclock-column (was mixed with Lastchanged for FU/FA)
     -> keep Weekendclock for RU for col#12
   - changed col#12(FU+FA) 'Lastchanged' into col#13 (for FU/FA) together
     with OB/RU/RA (as 'Last move')

2008-03-17 rodival

   * include/form_functions.php (create_form_string,
     print_insert_text_input, print_insert_textarea):
   - fixed the textarea_safe() problem in the forms
     (because of the new PHP5) (fix located in create_form_string())
   - changed the not obvious $safe_text var-name to $make_texts_safe

   * scripts/data_report.php, scripts/data_export.php,
     include/graph.php, include/move.php,
     confirm.php, game.php, quick_play.php:
   - following the previous fix, ajusted some ambiguous uses of the
     list() operator along the code (see scripts/README.developers).

   * translate.php:
   - added comments to clarify the translation process
   - modified the various encodings management - both with OWNHTML now

   * statratingspng.php:
   - removed some trailing ';'s in mysql queries

   * quick_status.php:
   - substituted opponent.Name to opponent.Handle in the returned infos
     to avoid charsets mismatches (the names are independently recorded
     within the opponent charset, handles are all ascii compatible)

2008-02-20 rodival

   * sgf.php:
   - minor mysqlerror handling enhancement

2008-02-18 rodival

   * error.php:
   - hide the sensible infos from the Mysql errors displayed to users.

2008-01-20 rodival

   * include/contacts.php:
   - free the CUSERFLAG_ADMIN flag (and its translations) from a reference to DGS

2008-01-18 rodival

   * include/quick_common.php (fnop, get_preferred_browser_language,
       recover_language),
     include/std_functions.php, include/translation_functions.php:
   - to allow the managment of the encoding in quick_status.php
   - moved get_preferred_browser_language() and the LANG_* constants
     from translation_functions.php to quick_common.php
   - moved fnop() from std_functions.php to quick_common.php
   - added recover_language() to set the language-related globals without
     loading the translations datas.

   * quick_status.php (loc_start_page, loc_end_page):
   - enable encoding managment

   * include/config.php,
     include/connect2mysql.php (check_passwd_method, check_passwd):
   - added check_passwd_method() to allow a password check
     free from encryption method.
   - added the MYSQL_VERSION constant into config.php

2008-01-09 rodival

   * include/connect2mysql.php (check_password):
   - revert the bad PASSWORD() stored (because of the new MySQL version)
     to their OLD_PASWORD() value.
     Today, there are 448 users with a corrupted password and no Email address
     and this number grow. So, the previous "define the encryption function"
     fix should be useful too.

2008-01-06 rodival

   * skins/dragon/screen.css:
   - add a red OnVacation in game infos table

2008-01-05 rodival

   * include/config.php, include/connect2mysql.php (check_password),
     do_registration.php, change_password.php, send_new_password.php,
     scripts/data_export.php (after_table):
   - define the encryption function used for passwords in config.php

   * scripts/browser_stats.php:
   - add of new browser types

2007-12-27 juga

   * code_examples/test_clock_tick.php:
   - test for checking better query-time of clock-tick

   * NEWS:
   - prepare for new release 1.0.14

   * scripts/README.developers:
   - hints about using translations with T_() in classes

   * updates/,
     updates/database_changes_1_0_12_to_1_0_13.mysql,
     updates/other_changes_1_0_12_to_1_0_13.txt,
     updates/roadmap_1_0_12_to_1_0_13.txt:
   - moved text-files for server-updates into new updates-dir

   * translationdata.mysql, INSTALL:
   - synced with changes in release-branch DGS-stable-200712
   - removed translation-data from distribution
   - downloads from snapshot-page
   - info about GD & FreeType and refs to scripts-READMEs

2007-12-22 rodival

   * clock_tick.php:
   - delayed the Players join from timeout games query

   * include/std_functions.php,
     clock_tick.php, halfhourly_cron.php,
     send_new_password.php, send_message.php,
     confirm.php, join_waitingroom_game.php:
   - remove the backup lines of ENA_SEND_MESSAGE and send_email

   * include/std_functions.php (str_TD_class_button, button_style):
   - removed funcs

   * forum/search.php:
   - remove a T_() detection while commented


# From here on up development continued on MAIN-branch as continuation
# after release DGS 1.0.13 on 19-Dec-2007 till 03-Nov-2008,
# then development on branch DGS-stable-200712 is included below,
# ending in release DGS 1.0.14
#
# All changes between releases DGS 1.0.13 (CVS-tag dev-start-20081116)
# and DGS 1.0.14 (CVS-tag DGS-stable-200812) are merged into the MAIN-branch,
# which is included in this ChangeLog starting at 29-Dec-2008 above.
#
# DDL-changes for release 1.0.14 are NOT repeated within the merge,
# because those changes are already performed on the live-server
# and they are not conflicting with development on the MAIN-branch.


==================================================================
Update Release [2008-12-14] - DGS 1.0.14 - CVS-tag [DGS-stable-200812]
# (Release in branch DGS-stable-200712)

# History:
2008-12-14: release 1.0.14, mostly to add blocking functions
2009-01-04: bug fix update (by JUG) as DGS 1.0.14.b
2009-02-15: update (added PayPal-donation-page) as DGS 1.0.14.c
2009-02-21: bug fix update (by JUG) as DGS 1.0.14.d (opponents)
2009-02-22: bug fix update (by JUG) as DGS 1.0.14.e
2009-05-30: bug fix update (by JUG) as DGS 1.0.14.f
2009-06-06: uploaded games-export script (by JUG) as DGS 1.0.14.g
2009-08-08: bug fix update (by JUG) as DGS 1.0.14.h
2009-11-15: bug fix update (by JUG) as DGS 1.0.14.i
2009-12-13: uploaded contact-enhancement + bug fix (by JUG) as DGS 1.0.14.j
2010-01-01: bug fix update (by JUG) as DGS 1.0.14.k

2008-12-14 juga

   * snapshot.php:
   - added release snapshot for 1.0.14 (DGS-stable-200812)

   * site_map.php:
   - added policy link

   * NEWS:
   - prep for new release 1.0.14 (in stable-branch)

   * scripts/database_changes_1_0_13_to_1_0_14.mysql,
     scripts/roadmap_1_0_12_to_1_0_13.txt:
   - added information containing a collection of changes
     for updating from v1.0.13 to v1.0.14

2008-12-14 ejlo

   * scripts/apc_cache_info.php,
     scripts/apc_clear_cache.php:
   - Scripts to get info about and control APC-cache

   * do_registration.php, do_registration_blocked.php, error.php, register.php:
   - added checkbox to Accept policy for registration

2008-12-14 juga

   * NEWS:
   - added policy section about policy added

   * do_registration_blocked.php:
   - fixed bug: needed to update LastChanged for insert of post

   * NEWS, admin_show_users.php, admin_users.php, forum/admin.php,
     forum/forum_functions.php (ForumOptions), forum/index.php,
     include/config.php, include/quick_common.php:
   - removed user-restriction to initial forums predestinated for server newbies

   * admin_show_users.php:
   - don't show BlockReason for list of admin-users

   * do_registration.php, do_registration_blocked.php, register.php,
     include/quick_common.php (error_on_blocked_ip):
   - add admin-log entry on IP-block for registration or guest-login

   * error.php:
   - add steps how to register a new account if IP-blocked -> send (automated) forum-request to admin
   - error on IP-block for registration or guest-login
   - added admin-log on edit-bio denied

   * login.php:
   - add check for IP-block on guest-user

   * userinfo.php:
   - fix hiding of bio-message if user is denied of showing-bio

   * forum/forum_functions.php (add_forum_log):
   - add_forum_log: use default user-id

2008-12-14 ejlo

   * policy.php:
   - added link to FAQ

2008-12-07 juga

   * policy.php, docs.php, skins/dragon/screen.css:
   - added DGS-policy
   - policy-text provided by site-owner Erik Ouchterlony and Jens-Uwe Gaspar

   * admin_show_users.php, admin_users.php, error.php, forgot.php, index.php,
     login.php, quick_play.php, quick_status.php,
     include/quick_common.php (error_on_blocked_ip),
     include/std_functions.php (who_is_logged),
     rss/status.php, wap/status.php:
   - changed blocking-feature:
     - users with existing account can always login (need login-denied)
     - new account registration may get blocked by IP
     - show blocking reason on deny-login set on user
   - deactived admin-option bypass-IP-block

   * admin_users.php, forum/admin.php, forum/index.php,
     forum/forum_functions.php (ForumOptions):
   - INIT: don't show to users and admin if deactivated

   * include/connect2mysql.php (mysql_addslashes):
   - since PHP4.3.0 mysql_escape_string shows deprecated warning,
     use mysql_real_escape_string if existing db-connection

   * admin_show_users.php, admin_users.php:
   - added BlockReason
-----------
ALTER TABLE `Players`
   ADD `BlockReason` text NOT NULL default '' AFTER `TableMaxRows` ;
-----------

2008-11-23 juga

   * forum/forum_functions.php (display_posts_pending_approval):
   - added safety-check on users admin-level

   * forum/post.php, forum/forum_functions.php:
   - moderate editing posts if moderation needed

   * forum/admin_show_forumlog.php:
   - added search for pending-edit-post
   - added note about log-content

   * admin.php, admin_show_adminlog.php, admin_show_errorlog.php,
     admin_show_faqlog.php:
   - added admin-pages to show: FAQlog, Forumlog, Errorlog and Adminlog

   * admin_users.php, login.php, forum/post.php, forum/forum_functions.php:
   - write Adminlog-entry for user-changes by admin, user-login and login-denied
   - write Forumlog-entry for forum edit-post as edit_pend_post

   * forum/forum_functions.php (display_posts_pending_approval),
     skins/dragon/screen.css:
   - added link to show forumlog for pending-approval posts on status page

   * admin_users.php:
   - added link to Block-IP check-script with proper admin-level

   * admin_show_users.php, include/std_functions.php, forum/index.php:
   - use constant for executive admins ADMINGROUP_EXECUTIVE
   - properly format date

2008-11-20 juga

   * scripts/data_export.php:
   - added table Forumlog

   * NEWS:
   - added blocking features and corresponding admin functionality
   - added optimizations (queries, GUI) and bugfixes
   - added more info for people page, forum note for guest

   * admin.php, admin_show_users.php, scripts/check_block_ip.php:
   - bugfix bit-operator precedence

   * error.php, forum/index.php, forum/list.php, forum/post.php (post_message),
     forum/read.php, forum/search.php:
   - allow viewing, searching and posting only for visible forums configured
     by users admin-options and forum-groups
   - added error if user views non-visible forum

   * admin_users.php, admin_show_users.php, include/quick_common.php:
   - added admin-options for forum-groups INIT/ADMIN/DEV:
     - INIT  = Restrict user to marked INIT-forums
     - ADMIN = User can view marked ADMIN-forums
     - DEV   = User can view marked DEV-forums

   * forum/admin.php (build_forum_options, build_forum_options_text,
       add_form_forum_options),
     forum/forum_functions.php (class ForumOptions, forum_name),
     forum/index.php,
     include/config.php (NEWUSER_FGROUP_INIT_DAYS),
     include/std_functions.php (is_logged_in):
   - added forum-group options INIT/ADMIN/DEV and forum administration:
     - INIT-forum  = user can be restricted to only view marked INIT-forums
     - ADMIN-forum = user can view ADMIN-forum if corresponding admin-option set
     - DEV-forum   = user can view DEV-forum if corresponding admin-option set
   - for admins show forum-options in forum-list (hidden forum, INIT-forum)
   - added ForumOptions-class to handle Forums.Options and forum-visibility
   - added NEWUSER_FGROUP_INIT_DAYS to config number of days a user
     is only allowed to view INIT-forums after registration:
     - can be deactivated in config (val=-1)
     - -1 = deactivated (all non-hidden forums can be viewed by new users),
            except if admin-option overwrites this state
     - 0..n=days after which only INIT-forums can be viewed

   * forum/admin.php, forum/index.php, scripts/convert_from_old_forum.php,
     forum/forum_functions.php (forum_name):
   - replaced Forums.Moderated (char) to Options (int-bitmask)
   - defined forum options: moderated, groups (init/admin/developer)
-----------
ALTER TABLE `Forums`
   ADD `Options` int(11) unsigned NOT NULL default '0' AFTER `Moderated` ;

-- take over Moderated-flag
UPDATE Forums SET Options=IF(Moderated='Y',1,0) ;

-- remove Moderated-column (replaced by Options)
ALTER TABLE `Forums`
   DROP COLUMN `Moderated` ;
-----------

   * do_registration.php:
   - throw error on blocked ip

   * forgot.php, index.php, login.php, quick_status.php, register.php:
   - throw error on blocked ip except bypassed

   * include/quick_common.php (error_on_blocked_ip):
   - added method error_on_blocked_ip to throw error on blocked-ip
     except if bypassed with admin-option

   * login.php, quick_status.php, quick_play.php:
   - added check on deny-login admin-option
   - optimized query (select only used fields from table Players)

   * change_bio.php, edit_bio.php, userinfo.php, include/std_functions.php,
     quick_play.php, rss/status.php, wap/status.php:
   - replaced calced db-field admin_options -> AdminOptions

   * include/error_functions.php:
   - bugfix: added missing PHP-end-marker

2008-11-19 juga

   * include/quick_common.php (is_blocked_ip, check_subnet_ip),
     include/config.php, error.php,
     scripts/check_block_ip.php:
   - added IP-blocklist in include/config.php ARR_BLOCK_IPLIST
   - added script to test syntax of IP-blocklist in include/config.php
   - added methods to check for blocked-IP
   - added errors: ip_blocked_login, ip_blocked_register

   * admin_show_users.php, admin_users.php, include/quick_common.php:
   - renamed ADMOPT_BYPASS_IP_BAN -> ADMOPT_BYPASS_IP_BLOCK

   * admin.php, admin_show_users.php, skins/dragon/screen.css:
   - added new admin page to show current admin and administrated users,
     can be viewed by most admins

   * admin_users.php:
   - added read/write-field AdminNote
   - added admin-option ADMIN_HIDE_BIO (bio of user is hidden)
   - added refresh to reload user-data
   - added syntax to define width and maxlength for text-input-fields
   - added link to page showing administrated users
   - forbid to change admin-option DENY_LOGIN for oneself
-----------
ALTER TABLE `Players`
   ADD `AdminNote` varchar(100) NOT NULL default '' AFTER `AdminOptions` ;
-----------

   * userinfo.php, include/quick_common.php:
   - don't show bio if admin-option ADMIN_HIDE_BIO is active,
     show message if bio is hidden
   - show message 'Login denied' if admin-option ADMIN_DENY_LOGIN is active

   * forum/forum_functions.php (forum_message_box):
   - for guest show note on reply-textbox about forum-moderation

2008-11-18 juga

   * admin_users.php, error.php, change_bio.php, edit_bio.php,
     include/quick_common.php, include/std_functions.php (is_logged_in),
     quick_play.php, quick_status.php, rss/status.php, wap/status.php:
   - added and defined Players.AdminOptions:
     defined AdminOptions: BYPASS_IP_BAN, DENY_LOGIN, DENY_EDIT_BIO, SHOW_TIME
     - handle ADMOPT_DENY_EDIT_BIO denying edit bio
     - handle ADMOPT_DENY_LOGIN denying login
     - handle ADMOPT_SHOW_TIME showing time in bottom bar
   - added write-controls for edit-user in admin_users.php
   - added errors: login_denied, edit_bio_denied
-----------
ALTER TABLE `Players`
   ADD `AdminOptions` int(11) unsigned NOT NULL default '0' AFTER `Adminlevel` ;
ALTER TABLE `Players`
   ADD INDEX `AdminOptions` (`AdminOptions`) ;
-----------

   * include/filter.php (add_or_del_filter):
   - added prefix to the "toggle filter" actions (bugfix from CVS-Head)
     Bugfix [http://www.dragongoserver.net/forum/read.php?forum=4&thread=18318]
     for fixing Score-filter in finished games list

   * people.php:
   - FAQ-section:
     - changed main-editor: jug -> Ingmar
     - changed title, show last-update for all FAQ-editors
   - added forum moderators section
   - optimized query on admin-users (using index)
-----------
ALTER TABLE `Players`
   ADD INDEX `Adminlevel` (`Adminlevel`) ;
-----------

   * include/config.php, show_games.php:
   - added constant RESTRICT_SHOW_GAMES_ALL to restrict initial view
     in show_games.php when showing ALL games with default value,
     show explaining-note if config is active
   - fix: replace all and/or -> &&/||

   * edit_bio.php, message.php, waiting_room.php:
   - adapt height of bio text-area on line-count
   - increase size of message text-areas: width 50 > 60, height 8 > 12

   * forum/admin_show_forumlog.php,
     forum/forum_functions.php (add_forum_log, load_forum_id, approve_message),
     forum/index.php, forum/post.php (post_message), forum/read.php:
   - added forum log for forum-post changes (new/edit/moderate-post)
     - viewable only to moderators
     - show Forumlog.IP only to admin DEVELOPER-role

   * include/table_columns.php (button_style, make_next_prev_links):
   - added base_path to images (needed for forum log)
-----------
CREATE TABLE Forumlog (
   ID int(11) NOT NULL auto_increment,
   User_ID int(11) NOT NULL default '0',
   Thread_ID int(11) NOT NULL default '0',
   Post_ID int(11) NOT NULL default '0',
   Time datetime NOT NULL default '0000-00-00 00:00:00',
   Action varchar(40) NOT NULL default '',
   IP varchar(16) NOT NULL default '',
   PRIMARY KEY (ID),
   KEY User_ID (User_ID),
   KEY Time (Time)
) ENGINE=MyISAM ;

-- add NEW-POST events from all users
INSERT INTO Forumlog (User_ID,Thread_ID,Post_ID,Time,Action)
   SELECT User_ID,Thread_ID,ID AS Post_ID,Time,
          CONCAT(IF(PendingApproval='Y','new_pend_post:','new_post:'),IF(ID=Thread_ID,'new_thread','reply')) AS Action
   FROM Posts WHERE Thread_ID>0 AND PosIndex>='' ORDER BY Time ;
-- if column PendingApproval already dropped (from HEAD-development),
-- then replace CONCAT-statement in above SQL-command:
   CONCAT(IF(Approved='P','new_pend_post:','new_post:'),IF(ID=Thread_ID,'new_thread','reply')) AS Action

-- add EDIT-POST events from all users
INSERT INTO Forumlog (User_ID,Thread_ID,Post_ID,Time,Action)
   SELECT User_ID,-1 AS Thread_ID,Parent_ID AS Post_ID,Time,'edit_post' AS Action
   FROM Posts WHERE PosIndex='' ORDER BY Time ;
UPDATE Forumlog, Posts AS P
   SET Forumlog.Thread_ID=P.Thread_ID
   WHERE P.ID=Forumlog.Post_ID and Forumlog.Thread_ID=-1 ;
-----------

   * admin_users.php, admin.php:
   - added admin-page for ADMIN_DEVELOPER to edit and show some
     user attributes:
     - edit: Handle, Name, VaultCnt, VaultTime, VacationDays, OnVacation,
             MayPostOnForum
     - show: Registerdate, Lastaccess, LastMove, Activity, Lang,
             Email, IP, Browser, Sessionexpire, SendEmail, Notify

   * forum/admin.php:
   - changed access-right to manage forums from ADMIN_FORUM to ADMIN_DEVELOPER

   * forum/list.php:
   - show full user-reference in forum thread-list

   * skins/dragon/screen.css:
   - changed valign-style using CSS for multiline-table-cells: middle -> top


# development continued on MAIN-branch from 17-Mar-2008 up to 03-Nov-2008.
# Normally ChangeLog-entries from branches are not included, but the changes
# for release 1.0.14 had been released on the live server and therefore had been
# included in the MAIN-branch ChangeLog.
# (see changes up in ChangeLog from release DGS 1.0.14),
#
# development continued in branch DGS-stable-200712 (from here on up to add blocking features)


2008-03-17 rodival

   * include/form_functions.php (create_form_string,
     print_insert_text_input, print_insert_textarea):
   - fixed the textarea_safe() problem in the forms
     (because of the new PHP5) (fix located in create_form_string())
   - changed the not obvious $safe_text var-name to $make_texts_safe

   * translate.php:
   - added comments to clarify the translation process
   - modified the various encodings management - both with OWNHTML now

   * quick_status.php:
   - substitued opponent.Handle to opponent.Name in the returned infos
     to avoid charsets mismatches (the names are independently recorded
     within the opponent charset, handles are all ascii compatible)

==================================================================
Update Release [2008-01-10] - DGS 1.0.13.b - CVS-tag [DGS-stable-200712]

2008-01-09 rodival

   * include/connect2mysql.php (check_password):
   - revert the bad PASSWORD() stored (because of the new MySQL version)
     to their OLD_PASWORD() value.
     Today, there are 448 users with a corrupted password and no Email address
     and this number grow. So, the previous "define the encryption function"
     fix should be useful too.

2008-01-06 rodival

   * skins/dragon/screen.css:
   - add a red OnVacation in game infos table

2008-01-05 rodival

   * include/config.php, include/connect2mysql.php (check_password),
     do_registration.php, change_password.php, send_new_password.php,
     scripts/data_export.php (after_table):
   - define the encryption function used for passwords in config.php

   * scripts/browser_stats.php:
   - add of new browser types

2007-12-22 rodival

   * clock_tick.php:
   - delayed the Players join from timeout games query

==================================================================
Release [2007-12-19] - DGS 1.0.13 - CVS-tag [DGS-stable-200712]

# History:
2007-10-06: first big update of DGS 1.0.13
2007-11-07: bug fix update
2007-12-19: bug fix update + release
2008-01-10: bug fix update (see above DGS 1.0.13.b)


2007-12-27 juga

   * translationdata.mysql, INSTALL:
   - removed translation-data from distribution
   - downloads from snapshot-page
   - info about GD & FreeType and refs to scripts-READMEs

2007-12-19 rodival

   * statratingspng.php:
   - fixing a new MySQL5 bug: renaming the temporary field "rank" to "p_rank"

   * statisticspng.php:
   - added missing mysql_free_result()

   * forum/forum_functions.php (draw_post):
   - forum-search: use new 3-line-header, postpone 3-<TR>-header

2007-12-19 juga

   * all files containing license preamble:
   - replaced preamble for license-change: GPLv2 -> Affero GPLv3

   * scripts/change_files.pl:
   - helping script to replace license-preamble

   * NEWS:
   - document changes since last bug-update at 26-Oct-2007

   * show_games.php:
   - extend color-filter for my running games: filter on my color / my move

2007-12-18 juga

   * COPYING, licence.php, docs.php, site_map.php, NEWS:
   - replaced GPLv2 with AGPL (Affero GPLv3 - 19-Nov-2007)
   - changed some licence[BE] -> license[AE] like in AGPL

   * edit_contact.php, list_contacts.php, include/contacts.php (load_globals),
     include/filter.php (FilterRelativeDate):
   - added TODOs for init of global vars

   * forum/forum_functions.php (draw_post):
   - forum-search: use former 2-line-header, postpone 3-line-header

2007-12-02 juga

   * waiting_room.php:
   - fix typo of 'Fischer'-time

   * forum/forum_functions.php (make_link_array, forum_start_table),
     forum/search.php, NEWS:
   - added max-rows for forum-search (don't use TableMaxRows from player)
   - only show max number of rows (instead of +1)

   * include/std_functions.php:
   - added max-rows for forum-search: MAXROWS_PER_PAGE_FORUM,
   - removed some globals

2007-11-25 juga

   * include/filter.php (FilterMysqlMatch.extract_match_terms):
   - fix for escaping of regex-delimiter '/'

   * include/filter.php (FilterRelativeDate.build_query):
   - implement suggested alternative to build query (WEEK=7*DAY)

2007-11-20 rodival

   * include/filter.php (FilterRelativeDate),
     include/contacts.php (load_globals),
     edit_contact.php, list_contacts.php:
   - delayed the load of the globals containing translations

   * include/filter.php (Filter.build_generic_selectbox_elem),
     include/form_functions.php (print_insert_select_box),
     game.php (draw_moves, draw_add_time):
   - fixed safe HTML inside <OPTION></OPTION>

   * include/filter.php (FilterSelection.parse_value, SearchFilter.add_filter):
   - fixed the sql query in case of empty clause (parse_value)
   - changed an eval() to a more conventional call (add_filter)

   * include/std_functions.php (start_html):
   - fixed safe HTML inside <TITLE></TITLE>

2007-11-18 rodival

   * forum/forum_functions.php (draw_post):
   - added an auto-reference link to posts (to allow its address copy&paste)

   * skins/dragon/screen.css,
     forum/read.php (revision_history),
     forum/forum_functions.php (draw_post):
   - adjusted some links problems
   - added some missing (ugly) globals... waiting better!

2007-11-17 juga

   * include/filter.php (FilterMysqlMatch.extract_match_terms),
     include/tokenizer.php (Token, StringTokenizer.parse_quote_quote):
   - Filter: special handling for "quoted-text" in mysql-match search-pattern
   - Tokenizer: mark quoted token-text using added Token.flags

2007-11-16 rodival

   * include/std_functions.php (delete_all_observers):
   - exclude guest from message notifications for observers

   * include/std_functions.php (parse_html_safe),
     include/filter_functions.php (sql_extract_terms):
   - set the $parse_mark_regex delimiter to a more natural '/'

   * include/std_functions.php (parse_tags_safe):
   - fixed a bad marking of the search-term of the </code> tag
   - ajusted some comments

   * include/message_functions.php (echo_folders),
     search_messages.php:
   - introduced the FOLDER_COLS_MODULO constant

   * include/message_functions.php (message_list_table):
   - changed the links of the Correspondent and Subject columns to make
     them more intuitive and like thoses of the search-message table

   * skins/dragon/screen.css, skins/dragon/print.css,
     forum/forum_functions.php (draw_post):
   - fixed the layout of the approved/hidden status cell
   - moved the "found in forum" part above the subject line in the search page

2007-11-16 juga

   * include/filter_functions.php (sql_extract_terms):
   - fixes: if handling of trailing (un-)escaped '%' and avoid dublette,
     add regex-delimiter to escape and escape '\' correctly

2007-11-16 rodival

   * include/filter_functions.php (sql_extract_terms):
   - don't remove a trailing "\%" from the sql_term

   * include/filter_parser.php (parse):
   - typo ($v1 => $v2)

2007-11-16 juga

   * forum/forum_functions.php (draw_post):
   - allow '0' as regex-term (replace empty-check)

2007-11-15 rodival

   * include/faq_functions.php (faq_item_html),
     include/message_functions.php (message_info_table, message_list_table),
     include/filter.php (get_terms -> get_rx_terms),
     include/filter_functions.php (sql_extract_terms),
     code_examples/filter_example2.php,
     forum/read.php (revision_history), forum/search.php,
     forum/forum_functions.php (make_link_array, draw_post),
     translate.php, search_messages.php, message.php, list_messages.php,
     list_contacts.php, admin_faq.php:
   - searching some missing urlencode() around the search terms like in
     the Mac Safari/Camino problem
   - to trace the previous inconsistancy and clearly separate what
     is "reg_exp" and "sql_like" terms, a bunch of vars renaming.
   - moved the $rx_term variable (old name: $markterms) used in
     revision_history() from the global array to the arguments list
     (like for the draw_post() function)
   - changed the URL-var name from "terms" to "xterm" (reg_exp)
     in message.php, list_messages.php, include/message_functions.php
   - changed the URL-var name from "markterms" to "xterm" (reg_exp)
     in forum/read.php, forum/forum_functions.php
   - changed the URL-var name from "term" to "qterm" (sql_like)
     in admin_faq.php
   - renamed the get_terms() function to get_rx_terms() to avoid ambiguities
     in include/filter.php, code_examples/filter_example2.php, forum/search.php,
     search_messages.php, list_contacts.php

2007-11-14 juga

   * forum/forum_functions.php:
   - optimize-fix: remove search-terms (not needed, are extracted from filter)

   * forum/search.php:
   - fix: prevent SQL-injection on ordering (map order values)
   - added ascending ordering for creation and modification date

2007-11-12 rodival

   * scripts/test.php:
   - a second test to debug the Mac Safari/Camino problem of url-decoding

2007-11-10 rodival

   * forum/search.php:
   - one protection from an incoming injection to a MySQL query...

   * scripts/test.php:
   - one test to debug the Mac Safari/Camino problem of url-decoding

2007-11-09 rodival

   * translate.php:
   - better handling of the rows of prev/next with the empty 3rd column.

   * skins/dragon/print.css:
   - typo

2007-11-08 rodival

   * translate.php:
   - re-added the fake empty 3rd column.
     It may be useful in case of a very long unbreakable word in some
     browsers, while not disturbing other browsers.

   * skins/dragon/screen.css,
     statistics.php, snapshot.php, news.php:
   - some W3C compliance fixes.

2007-11-07 rodival

   * translate.php:
   - adjusted the text of the quick-info box, mainly about the use of
     our pseudo-html tags.
   - removed the useless 3rd column.

2007-11-07 juga

   * robots.txt:
   - disallow all pages to web-crawlers for now

2007-11-04 juga

   * include/table_columns.php:
   - bugfix: use filter-prefix (not table-prefix) for filter-toggles

2007-10-31 rodival

   * statratingspng.php:
   - adjusted the relative scales of graphs.

2007-10-29 rodival

   * translate.php:
   - adjusted the boxes size to the max of original and translated strings.

2007-10-26 ejlo

   * docs.php, snapshot.php:
   - added snapshot-page

2007-10-26 juga

   * people.php:
   - switched role of FAQ-maintainer/editor of Ingmar <-> jug

   * INSTALL:
   - adjust CVS-hostname on SourceForge

2007-10-25 rodival

   * send_message.php:
   - don't reject the messages of an invitation discussion when the
     contact flags are "messages reject" and "invite accept"
   - also allow to continue an already started invitation

   * skins\dragon\print.css,
     opponents.php, send_message.php:
   - comments adds and garbages

   * init.mysql:
   - adjustments to release

2007-10-25 juga

   * scripts/player_consistency.php (cnt_diff):
   - correct echo for DEBUG-mode

2007-10-24 rodival

   * scripts/player_consistency.php,
     clock_tick.php:
   - minor fixes and comment adds

   * skins/dragon/screen.css,
     include/make_translationfiles.php,
     people.php:
   - fix a bad translation of languages (with uppercase letters) in the people
     page
   - adjusted CSS for the people page

2007-10-20 juga

   * scripts/player_consistency.php (cnt_diff):
   - minimize duration of read-locks on tables
   - added SQL_BUFFER_RESULT for selects (default),
     added arg 'buffer=no' to deactivate it
   - GROUP BY already sorts result, do additional sorting in PHP
   - added times needed
   - replaced SQL-operator '!=' on Games.Rated

2007-10-18 juga

    * userinfo.php, site_map.php, NEWS:
    - added bottom-link to show my opponents

2007-10-16 juga

   * clock_tick.php:
   - fix slow-query by returning to former query (for running games)
     using index-optimization

2007-10-16 rodival

   * skins/dragon/screen.css, skins/dragon/print.css:
   - updated the CSS printer part

   * include/message_functions.php:
   - CSSed the MessageBox rows

   * include/std_functions.php:
   - translation of the vault message

   * scripts/data_report.php:
   - disable the unbuffered feature

   * scripts/message_consistency.php,
     include/message_functions.php,
     message.php:
   - On 2007-10-15, we have found, in the DGS database,
     30 records of MessageCorrespondents with .mid == 0
     all between "2004-06-03 09:25:17" and "2006-08-10 20:40:31".
     While this should not have occured, those "lost" records can disturb
     some queries where, for instance, .mid is compared to .ReplyTo which
     may be 0 (meaning "no reply").
     We have strengthened those queries but also manually changed the faulty
     .mid from 0 to -9999 (directly in the database) to move them apart.

2007-10-15 juga

   * NEWS:
   - added bugfix (about SGF-download)

2007-10-13 juga

   * NEWS:
   - added <home_ page>... opening new window

   * skins/dragon/screen.css, translate.php:
   - JUG's dream of page-layout for translate-page
   - fix extracting of highlight-regex term (leading & trailing %, 0)

2007-10-13 rodival

   * skins/dragon/screen.css, translate.php:
   - fix the embossed tables display for the browsers not understanding
     the 'outset' and/or 'inset' border style of CSS.

   * include/board.php:
   - closing the board display problems.

2007-10-12 rodival

   * skins/dragon/screen.css,
     include/board.php:
   - An other try to analyze the board display problems.

2007-10-11 rodival

   * include/filter.php:
   - minor HTML args enhancement

   * translate.php:
   - just adjusted the profile-encoding for the translators' ADMINS only

   * include/std_functions.php:
   - enabling the <home_ ...> pseudo-tags
   - enhanced the $html_safe_preg by the way

   * skins/dragon/screen.css,
     include/board.php:
   - An other try to analyze the board display problems.

2007-10-10 rodival

   * sgf.php:
   - Changed the header Content-Disposition: inline; to attachment;

2007-10-09 rodival

   * skins/dragon/screen.css,
     translate.php:
   - A midway page re-format to simplify the translators work

   * skins/dragon/screen.css,
     include/board.php:
   - A try to analyze the [Go Ban Joe (Banjo)] PocketPC IE problem
     around the board display.

2007-10-09 juga

   * waiting_room.php:
   - preserve filter-values for links:
     Info-button, bottom-link to add new game

   * show_games.php:
   - bugfix: show values Rated & Last moved for observed games

2007-10-08 rodival

   * scripts/generate_translation_texts.php,
     status.php, opponents.php, waiting_room.php, message_functions.php:
   - Adjusting and adding strings to translation

2007-10-08 juga

   * NEWS:
   - adjusted text about <image>-tag (release 1.0.13)

   * quick_play.php:
   - fix: mismatch of an empty argument

2007-10-07 juga

   * include/filter.php (FilterRating.parse_value):
   - fix handling of range-search using '-' with upper limit

   * opponents.php:
   - show form-submits for opponents-info game-stats-view

2007-10-07 rodival

   * translate.php, skins/dragon/screen.css:
   - better display of found term vs raw code

   * include/std_functions.php, scripts/mailtest.php,
     admin.php, admin_admins.php, people.php:
   - Changed the ADMIN_ADMINS constant name to a more obvious one (ADMIN_SUPERADMIN)

   * include/std_functions.php:
   - re-enabled the <TT> pseudo tag

   * forum/index.php:
   - minor CSS fix

2007-10-06 rodival

   * skins/dragon/screen.css,
     game.php:
   - adjustment of the "Go back" button placement in the game page.

   * include/message_functions.php:
   - description for 'Proper handicap' completion

   * scripts/translation_consistency.php:
   - adjusting the detection of the "FAQ entries without 'FAQ' group"

   * scripts/game_consistency.php:
   - removed an extract($row)
   - adjusted the detections according to the args limitations
   - added some warning messages

   * scripts/roadmap_1_0_12_to_1_0_13.txt:
   - minor adjustments correlated to the previous commits

2007-10-05 juga

   * NEWS:
   - changed final release date

   * include/filter.php (FilterRating),
     include/filter_parser.php (TextParser.handle_reverse_range):
   - fix: FilterRating, correct range-search of percentaged rating
   - fix: remove non-ASCII7-char

   * include/message_functions.php:
   - short description for 'Proper handicap'

2007-09-11 juga

   * INSTALL:
   - removed board-link in images-dir

   * NEWS:
   - game-page title, bio textinput width, no pie-chart in rating, <image>-tag

2007-09-10 rodival

   * ratingpng.php:
   - hidden the win/lost pie

   * skins/dragon/screen.css,
     include/std_functions.php:
   - fixed the bad left-alignment of the "not logged" or "is down" pages
   - adjusted some comments of the fever vault

   * game.php:
   - added the game ID and move number to the page title

   * scripts/other_changes_1_0_12_to_1_0_13.txt,
     include/std_functions.php:
   - hard-coded the re-direction of <image board/*> to /17/*
-----------
Caution: maybe not needed, this is a rollback of a previous modification
remove the soft-link on server: go to the dragon root-directory (e.g. 'htdocs' for the devel server)
 cd images
 rm board
-----------

2007-09-09 juga

   * init.mysql, scripts/database_changes_1_0_12_to_1_0_13.mysql:
   - split combined indexes (Forum_ID and Pos) into separate indexes
     to speed up forum-search and forum-views/sort,
     particularly on PosIndex and Lastchanged
-----------
ALTER TABLE `Posts`
 DROP INDEX `Pos` ;
ALTER TABLE `Posts`
 ADD INDEX `Thread_ID` (`Thread_ID`) ;
ALTER TABLE `Posts`
 ADD INDEX `PosIndex` (`PosIndex`) ;
ALTER TABLE `Posts`
 DROP INDEX `Forum_ID` ;  -- on some servers this is named 'List'
ALTER TABLE `Posts`
 ADD INDEX `Forum_ID` (`Forum_ID`) ;
ALTER TABLE `Posts`
 ADD INDEX `Lastchanged` (`Lastchanged`) ;
-----------

   * include/filter.php (FilterRating):
   - bugfix FilterRating: fix rank-conversion for rating with percentage

   * include/filter.php (all Filters), code_examples/filter_example2.php,
     specs/filters.txt:
   - added syntax-help-id in syntax-hover-text-description (for FAQ-reference),
     added with #filterhelp-namespace to allow adjustment and translations
   - added FC_SYNTAX_HELP-config to overwrite syntax-help-id

2007-09-07 juga

   * scripts/database_changes_1_0_12_to_1_0_13.mysql:
   - consolidate changes on Contacts-table

2007-08-29 rodival

   * scripts/roadmap_1_0_12_to_1_0_13.txt:
   - "how to" for next update

2007-08-23 ejlo

   * scripts/database_changes_1_0_12_to_1_0_13.mysql,
     scripts/other_changes_1_0_12_to_1_0_13.txt:
   - initial commit of two files containing a collection of changes
     for updating from v1.0.12 to v1.0.13.

2007-08-23 juga

   * search_messages.php:
   - select folder form-element: use 8 columns to display folders

2007-08-21 rodival

   * include/std_functions.php,
     include/make_translationfiles.php (add_text_to_translate),
     admin_faq.php, admin_do_translators.php, list_contacts.php:
   - removed the "LOWER(...) LIKE strtolower($pattern)" tricks.
   - changed the TranslationTexts.Text field to latin1 as it should contain
     only english phrases
   - changed (reversed) the Contacts.Notes field to latin1
-----------
ALTER TABLE `TranslationTexts`
 CHANGE `Text` `Text` text NOT NULL ;
ALTER TABLE `Contacts`
 CHANGE `Notes` `Notes` varchar(255) NOT NULL DEFAULT '' ;
-----------
   - added related latin1 checks in admin_faq.php and make_translationfiles.php
   - removed the translated strings from admin_do_translators.php

2007-08-21 juga

    * INSTALL:
    - hint about needing /images/board link

2007-08-19 rodival

   * include/std_functions.php:
   - added the <image> pseudo tag
   - must be completed by a "Linux soft-link" (or an "Apache alias")
     from /images/board to /17
-----------
Caution: no more needed (see rollback above)
add soft-link on server: go to the dragon root-directory (e.g. 'htdocs' for the devel server)
 cd images
 ln -s ../17 board
-----------

2007-08-19 juga

   * NEWS:
   - added: bio-fix, new-window-links, language=N profile

   * show_games.php:
   - spare translators-work (reverted change): observed games are always mine

2007-08-18 rodival

   * skins/dragon/screen.css,
     include/form_functions.php, include/message_functions.php,
     forum/search.php, forum/forum_functions.php,
     waiting_room.php, game.php, forgot.php, index.php:
   - CSS and layout adjustments

   * include/make_translationfiles.php,
     include/translation_functions.php,
     edit_profile.php, change_profile.php:
   - fixed glued translation files when they must be emptied
   - highlighted the NativeText for the ?language=N option
   - allowed to set language=N in profile for translators

   * skins/dragon/screen.css,
     include/message_functions.php, include/form_functions.php (sptext)
     edit_profile.php, waiting_room.php:
   - CSSed the radio/check boxes of forms. Added sptext() to help. Temporary
     solution

   * userinfo.php, edit_bio.php, change_bio.php:
   - allowed to input a foreign category with the same spelling as one of
     the default english categories without seeing it translated
   - distinguished them in the database with a leading '=':
-----------
UPDATE Bio SET Category=CONCAT('=',Category)
 WHERE !(Category IN('Country','City','State','Club','Homepage','Email','ICQ-number',
   'Game preferences','Hobbies','Occupation','Native Language','Language Competence')
  OR LEFT(Category,1)='=') ;
-----------

   * skins/dragon/screen.css,
     include/form_functions.php,
     forum/forum_functions.php,
     admin_faq.php, edit_contact.php, edit_profile.php, message.php, waiting_room.php:
   - CSSed some other Form parts.

2007-08-17 juga

   * NEWS:
   - added: on-vacation showing hours too, bottom-links left-alignment,
     '&language=browsercode'
   - removed goodies
   - cleanup (FAQ-refs, double entries, better text)

   * docs.php, site_map.php:
   - "hide" unwanted translations for Goodies

2007-08-16 rodival

   * skins/dragon/screen.css,
     include/message_functions.php (echo_folders, echo_folder_box),
     include/filter.php (get_input_element),
     include/form_functions.php (create_form_string),
     search_messages.php:
   - fixed the left alignement of the CheckboxArray of folders
   - changed the signature:
      echo_folder_box($folders, $folder_nr, $bgcolor=null, $attbs='', $layout_fmt='')
     where $layout_fmt is a sprintf format string to replace the previous
     $prefix and $suffix arguments.

   * include/time_functions.php (echo_onvacation)
     status.php, userinfo.php:
   - introduced echo_onvacation() to have the vacations displayed on a hour basis

   * skins/dragon/screen.css,
     include/table_columns.php (make_tablehead, make_table_filter):
   - a try to fix the alignement of the headers and remove tools for JUG browser

2007-08-15 juga

   * NEWS:
   - added info about bugfix: move numbering hover option

   * docs.php, site_map.php:
   - don't show goodies (Greasemonkey-scripts) as they are no DGS-features
   - reverted minor translation changes

   * introduction.php:
   - added todo-note about wrong sentence

   * site_map.php:
   - completed items for other user info

2007-08-15 rodival

   * include/translation_functions.php:
   - fixed the "&language=de" shortcut

2007-08-14 rodival

   * userinfo.php:
   - fixed the "<color red>" display problem in Open and Rank infos

   * skins/dragon/screen.css:
   - centered the folders tabs table
   - left aligned and narrowed the table of the bottom links

   * include/message_functions.php (echo_folder_box),
     search_messages.php:
   - reduced the space betwwen the checkbox and the folder name

   * userinfo.php, waiting_room.php, edit_bio.php, opponents.php,
     list_contacts.php, edit_contact.php, faq.php, people.php,
     admin_admins.php,
     scripts/update_translation_pages.php, scripts/translation_consistency.php,
     scripts/start_frozen_clocks.php, scripts/recalculate_ratings2.php,
     scripts/player_consistency.php, scripts/message_consistency.php,
     scripts/game_consistency.php, scripts/convert_from_old_forum.php,
     scripts/browser_stats.php,
     forum/index.php, forum/search.php, forum/list.php, forum/read.php:
   - added some mysql_free_result()
     Note: with my new local server, omitting them induce some warning messages
     to be added after the end our HTML code. Because of thoses and our
     ob_start('ob_gzhandler'), this make the IE5 browser unable to even display
     the page, reporting a "page not found" error message (in the best case!)

   * docs.php:
   - removed the "goodies" link: this is NOT a DGS feature.

   * join_waitingroom_game.php, waiting_room.php:
   - adjusted the join and delete forms
   - cleaned some links
   - fixed glued games (not deleted when count reach 0)

2007-08-13 juga

   * list_contacts.php:
   - avoid to show 'filter' term to users

   * forum/search.php:
   - removed empty row between search elements and order element

   * include/form_functions.php:
   - removed old build_areas() algorithm

   * site_map.php:
   - cleanup, adding new and missing pages:
     contacts, opponents, add time, show observers, news, people, goodies
   - order roughly oriented at main-menu

   * docs.php:
   - more descriptions for items, more logical order
   - added Goodies, DGSWishlist on SL

   * show_games.php:
   - allow B/W to translate
   - hide score filter (saving col-space)
   - use absolute RelativeDate-Filter on end-date

2007-08-13 rodival

   * include/message_functions.php (message_list_query, message_list_table),
     include/std_functions.php (send_message),
     scripts/message_consistency.php,
     rss/status.php, wap/status.php,
     quick_status.php, join_waitingroom_game.php, confirm.php, message.php,
     halfhourly_cron.php, clock_tick.php:
   - adjusted the use of the new MessageCorrespondents enum type 'S'
   - added the recovery of 'S' type from old messages in message_consistency.php
   - added the recovery of old 'result' messages in message_consistency.php

   * list_messages.php:
   - fixed a move-message bug

   * scripts/update_translation_pages.php, scripts/translation_consistency.php,
     scripts/start_frozen_clocks.php, scripts/start_frozen_clocks.php,
     scripts/player_consistency.php, scripts/generate_translation_texts.php,
     scripts/convert_posindex.php:
   - better url args handling

   * skins/dragon/screen.css,
     include/std_functions.php (attb_build),
     include/form_functions.php (create_form_string),
     opponents.php, search.php, search_messages.php,
     code_examples/filter_example2.php:
   - attb_build: remove useless colspan
   - removed (partially) the Align property of the forms. Changed it to 'Attbs'
     to allow to add 'class=???' arguments... a step to a full CSS management.
   - changed FEA_ALIGN to FEA_ATTBS
   - aligned the descriptions of search_message

   * include/make_translationfiles.php,
     generate_translation_texts.php,
     forum/forum_functions.php, forum/post.php:
   - re-added previously badly suppressed $TranslateGroups[]
   - added small debug infos

2007-08-12 rodival

   * init.mysql,
     scripts/data_export.php:
   - adjusted init.mysql to the current state of the devel server database

2007-08-12 juga

   * include/filter.php, include/filter_parser.php, include/tokenizer.php,
     include/message_functions.php (message_list_table),
     list_contacts.php, opponents.php, search_messages.php, show_games.php,
     status.php, users.php, waiting_room.php:
   - use different table headers and filter texts to allow saving space with
     shorter translations and provide a clear context for text
   - provide shorter filter input-elements to save column width space

   * opponents.php:
   - no filter on Rank-Info and Open-for-matches (no efficient search)

   * include/filter.php (FilterRelativeDate.get_input_elements):
   - remove &nbsp; in RelativeDate-filter layout

   * forum/search.php, list_contacts.php, opponents.php,
     search_messages.php, show_games.php, users.php, waiting_room.php:
   - added accesskey 'x' for search, 'e' for reset search
   - removed second pair of filter-submits (if external-form)

   * include/filter.php (set_accesskeys, get_submit_elements):
   - added config for accesskeys for filter-submit elements search & reset
   - replaced technical 'filter' term by user-friendly 'search' term

   * include/table_columns.php (make_table, make_add_column_form):
   - searching wants focus on table-data, not add-column-form
   - replaced technical 'filter' term by user-friendly 'search' term
     on filter-submit elements

   * search_messages.php:
   - removed filter on Message-type
   - added checkbox to show pending invitations
   - added Server as direction (Sender = 'S')
-----------
ALTER TABLE `MessageCorrespondents`
 CHANGE `Sender` `Sender` enum('M','N','Y','S') NOT NULL DEFAULT 'Y' ;
ALTER TABLE `MessageCorrespondents`      -- +2 MB (for filter/sort)
 ADD INDEX `Sender` (`Sender`) ;
-----------

   * all files
     except the following
        init.mysql, translationdata.mysql, goodies/*.js, include/config.php,
        scripts/README.developers, scripts/README.translations,
        scripts/doxygenConfig:
   - changed copyright notice and added where missing (-2007)

   * NEWS, news.php, skins/dragon/screen.css:
   - make an emphasized release title with anchor
     for reference in SL's DGSWishlist

   * NEWS:
   - added new features and changes of last release [2006-08-07]

2007-08-11 juga

   * NEWS, news.php:
   - added new features and changes since last release [2006-08-07]
   - resolve DGS-tags in NEWS-page

2007-08-09 rodival

   * skins/dragon/screen.css,
     include/std_functions.php (section, centered_container),
     docs.php, admin.php, licence.php:
   - adjusted the problem of centered containers

2007-08-08 rodival

   * scripts/FAQtransl_consistency.php, scripts/translation_consistency.php:
   - renamed scripts/FAQtransl_consistency.php
     to scripts/translation_consistency.php

   * userinfo.php, opponents.php:
   - Rank and Open html_safe adds

   * skins/dragon/screen.css,
     include/std_functions.php (section),
     status.php:
   - CSS ajustments of PendingApproval section

2007-08-07 rodival

   * include/faq_functions.php,
     forum/admin.php,
     admin_faq.php, error.php:
   - reviewed and CSSed forum/admin.php
   - normalized forum/admin.php and admin_faq.php to have an easier comparison
   - moved the TD_button() function to faq_functions.php to share it between
     admin_faq.php and forum/admin.php
   - removed the unused 'admin_already_translated' message

   * include/filter_functions.php,
     include/table_columns.php (make_table_filter),
     include/form_functions.php (print_insert_filtererror),
     forum/forum_functions.php,
     game.php (draw_game_info, draw_board_info),
     admin.php, search.php, post.php, index.php, login.php:
   - CSS and W3C fixes
   - minor translation related fixes

   * userinfo.php:
   - removed the 'forced column' part of the links to show_games.php

2007-08-06 rodival

   * include/std_functions.php (section, start_html, end_page,
     add_link_page_link, parse_tags_safe):
   - introduced the section() function which allow to split the page
     in distinct sections
   - introduced the $ThePage['class'] to temporary solve some CSS problems
   - adjusted add_link_page_link() to fully handle the structure
   - fix potentially corrupted marks of TT tag in parse_tags_safe()... to be reviewed

   * skins/dragon/screen.css,
     docs.php, admin.php, links.php, people.php, site_map.php,
     introduction.php, todo.php, news.php, licence.php, install.php:
   - full CSS of the Docs pages

   * skins/dragon/screen.css,
     include/std_functions.php (section, parse_tags_safe),
     status.php, faq.php:
   - added sections in the status page
   - removed linefeeds causing insert of badly placed <br>
   - checked and fixed the W3C compliance of the CSS sheet

   * include/table_infos.php, include/table_columns.php,
     include/form_functions.php,
     links.php, edit_folders.php, list_contacts.php:
   - minor fixes around W3C compliance

2007-08-05 rodival

   * skins/dragon/screen.css,
     include/table_columns.php (make_table_filter):
   - adjusted some CSS of filters

   * include/std_functions.php:
   - removed the &nbsp; of the TD_EMPTY definition

   * userinfo.php, include/table_columns.php (add_or_del_column):
   - as a first try to enable the columns when a filter is requested...
     but it actually fail to active the filters when the column is added.

   * include/game_functions.php, include/time_functions.php (time_remaining),
     game.php:
   - adjusted the time check in case of byoyomi disabled

   * userinfo.php, edit_contact.php, list_contacts.php:
   - excluded guest from contacts features (edit and add... but not list)
   - jump to list_contacts.php after a Contact had been saved

   * include/contacts.php, include/message_functions.php,
     send_message.php, join_waitingroom_game.php, waiting_room.php:
   - denied the access to a waitingroom game protected by its owner
   - rejection of messages or invitations to protected users
   - renaming some column and row headers from 'Color' to 'Type' when they
     contain datas like 'Double game', 'Proper handicap' or 'Even game'.

   * skins/dragon/screen.css,
     code_examples/form_example2.php,
     opponents.php:
   - CSS and layout bug fixes

2007-08-04 juga

   * game.php,
     include/game_functions.php (allow_add_time_opponent, add_time_opponent):
   - add-time: no byoyomi-reset if there is no byoyomi,
     don't allow if maintime would exceed 365 days,
     allow up to 14 days to add,
     corrected some relating texts

   * include/message_functions.php:
   - added 'AS' in SQL

   * include/table_columns.php (make_filter_row):
   - removed useless arg 'thead'

   * admin_faq.php, include/faq_functions.php (faq_item_html):
   - highlight terms for edit-FAQ and returning (except preview)

   * include/filter_parser.php (TextParser.parse, TextParser.extract_terms),
     include/filter_functions.php (sql_extract_terms):
   - moved sql_extract_terms-func from filter_parser -> filter_functions

   * edit_contact.php:
   - fix: show errormsg for invalid contact-user
   - delete-cancel returns to contact-list
   - delete is only confirm (don't show edit-elements)

   * list_contacts.php:
   - use case-insensitive filter-search on now binary Notes-column
   - removed alt-attrib in some filter-form-elements: changed FC_MULTIPLE-format
   - default sort by name

   * include/filter.php (build_generic_input_text_elem, build_input_text_elem,
     build_generic_checkbox_elem, FilterCheckboxArray),
     code_examples/filter_example2.php, search_messages.php:
   - cleanup: removed alt-attrib in some filter-form-elements,
     changed FC_MULTIPLE-format

   * show_games.php, userinfo.php:
   - introduced named filter-columns for Rated/Won fields in show_games.php
   - make Rated (14) and Won (11) games-column static
     to provide valid links from userinfo

2007-08-04 rodival

   * include/contacts.php (update_contact, load_contact),
     list_contacts.php, edit_contact.php:
   - modified some $uid/$cid checks
   - changed the Notes field of the Contacts table (including its name)
-----------
ALTER TABLE `Contacts`
 CHANGE `Note` `Notes` varbinary(255) NOT NULL DEFAULT '' ;
-----------
   - CSSed the pages

   * opponents.php:
   - added buttons to have a more visible stat link column
   - CSSed the page
   - adjusted the appearence of some bottom-of-the-page links

   * include/form_functions.php (add_empty_row):
   - changed add_empty_row() to respect the colspan of the table
   - others modifications are just TAB re-formats

   * include/filter.php (build_generic_input_text_elem,
     build_generic_checkbox_elem, get_input_element):
   - removed the useless "alt=" of the "<input>" tags
     removed the "$alt" parameters from build_generic_checkbox_elem()
     and of the code calling it

   * include/std_classes.php (merge):
   - fixed an error() call

   * include/table_columns.php:
   - adjusted some id cases

   * include/std_functions.php (user_reference), error.php:
   - added some comments and adjusted the code

   * admin_faq.php:
   - removed useless empty_row

2007-08-04 juga

   * error.php, confirm.php, game.php, opponents.php,
     include/contacts.php (Contact, load_contact),
     include/filter.php, include/filter_parser.php,
     include/form_functions.php, include/std_classes.php,
     include/table_columns.php, include/tokenizer.php:
   - added error-codes: invalid_user, invalid_opponent, invalid_filter
   - fix error()-calls: adjusted errorcode and debug-message

   * edit_contact.php, include/contacts.php:
   - show user-error (not internal-error) for adding own user,
     so no check for equal user- and contact-id in loading-funcs but update

   * skins/dragon/screen.css:
   - changed some styles for JUG-devel-server

2007-08-03 rodival

   * include/form_functions.php (build_areas, create_form_string, get_merged_attbs),
     code_examples/form_example2.php:
   - proposition for a new build_areas() layout managment
   - removed some useless levels of tables nesting
   - added the $TRlevel argument to build_areas() (default to previous behaviour)
   - introduced the optional 'title' of the areas
   - added the get_merged_attbs() function
   - fixed some error messages

2007-08-02 rodival

   * include/make_translationfiles.php:
   - fix to search case-insensitive on mysql-binary translation-texts

   * translate.php:
   - highlighted the found terms.

   * include/std_functions.php (parse_html_safe, parse_tags_safe):
   - removed the first newline after div-like pseudo-tags
   - fixed a bug in parse_html when $html_code is empty

   * include/translation_functions.php (T_, include_translate_group):
   - introduced the &language=N argument to disable any translation of the page
   - allowed more shortcuts to this argument: &language={browser_code}

   * include/table_infos.php (make_tablerow):
   - changed the priority of the class option of the rows
   - removed row highlight for the info tables

   * list_messages.php, edit_bio.php, admin_admins.php:
   - CSS adjustments

   * list_contacts.php, edit_contact.php:
   - disabled for guest

   * forum/list.php, forum/forum_functions.php (draw_post):
   - fixed the wrong display of 'first new'

2007-08-01 juga

   * list_contacts.php:
   - bugfix: show only own contacts

   * admin_faq.php:
   - fix to search case-insensitive on mysql-binary translation-texts

2007-07-31 rodival

   * include/game_functions.php (add_time_opponent),
     confirm.php, game.php:
   - fixed the add_time error when nothing is changed in byoyomi settings

   * skins/dragon/screen.css,
     admin_faq.php:
   - CSS adjusted (for IE, Opera and Avant), info box adjusted

   * /images/send.gif, /images/read.gif, /images/invite.gif, /images/edit.gif,
     /images/trashcan.gif, list_contact.php:
   - added or modified images for 16x16 buttons of list_contact.php
-----------

2007-07-29 rodival

   * skins/dragon/screen.css,
     include/table_columns.php (make_table, make_tablerow, make_next_prev_links),
     include/form_functions.php (create_form_string),
     forum/forum_functions.php (echo_links),
     search_messages.php, game.php, opponents.php:
   - added the 'ROW' form command
   - various CSS adjustments

   * translate.php, admin_faq.php:
   - CSSed the pages (final?)

   * include/std_functions.php (start_page),
     list_contacts.php:
   - quick fix of some contacts stuff (remove center tags) (more to come!)

   * opponents.php, userinfo.php, game.php, confirm.php, show_games.php:
   - normalized the $my_id var.
   - comments fixed

   * userinfo.php:
   - CSS adjustment
   - ajusted the links on the games list (using filters)

   * include/std_functions.php, include/board.php (load_from_db, draw_board),
     include/game_functions.php, include/time_functions.php (time_remaining),
     game.php (draw_game_info, draw_board_info), confirm.php (do_add_time),
     sgf.php:
   - checked the add_time stuff
   - adjusted time_remaining() to handle the byoyomi settings reset
   - changed POSX_ADDTIME from -5 to -50 (somehow enabling a "settings" section
     far from the terminating moves)
   - added the add_time infos in game.php from board.php via the new function
     draw_board_info()
   - moved the database updates from do_add_time() to add_time_opponent()
   - removed the $gid argument from add_time_opponent()
   - normalized most of the error handlers of add_time_opponent() (few stay)

2007-07-29 juga

   * waiting_room.php:
   - implement Contacts system-flag "Deny game":
     don't show games from players that "deny games" to current user

   * edit_contact.php, list_contacts.php, include/contacts.php:
   - added categorized contact-list for other users,
     support for system categories: deny game, etc.
     support for user   categories: friend, student, etc.
     allow free-text notes about contact, save created and lastchanged-date,
     show some players-data (name, userid, country, rating, lastaccess)
   - added Contacts table
-----------
CREATE TABLE Contacts (
   uid int(11) NOT NULL default '0',
   cid int(11) NOT NULL default '0',
   SystemFlags smallint(5) unsigned NOT NULL default '0',
   UserFlags int(10) unsigned NOT NULL default '0',
   Created datetime NOT NULL default '0000-00-00 00:00:00',
   Lastchanged datetime NOT NULL default '0000-00-00 00:00:00',
   Note varchar(255) NOT NULL default '',
   PRIMARY KEY Contact (uid,cid)
) TYPE=MyISAM;

ALTER TABLE `Players`
 ADD `ContactColumns` int(10) unsigned NOT NULL default '225' AFTER `WaitingroomColumns`;
-----------

   * include/table_columns.php (make_tablerow):
   - added top-vertical-alignment on table-rows (for contacts),
     need some CSS-magic to fix that

   * include/std_functions.php (start_page):
   - main-menu: added Contacts-link
   - main-menu: moved Translate-link into bottom-bar (show only for translators)

   * userinfo.php:
   - added bottom-link to add or edit user as contact


   * include/filter.php (get_terms, FilterText, FilterCheckboxArray),
     code_examples/filter_example2.php,
     specs/filters.txt:
   - added filter-config FC_SUBSTRING for Text-filter for auto-substring-search
   - added filter-config FC_BITMASK for CheckboxArray-filter
     to build sql-query using bitmask
   - added extracting of regex-terms also for Text-Filter (when using wildcards)

   * include/filter_parser.php (TextParser):
   - added TEXTPARSER_IMPLICIT_WILD to support substring-search for filters
   - added extracting of regex-terms (when using wildcards)

2007-07-28 juga

   * confirm.php (do_add_time), game.php,
     include/std_functions.php (POSX_ADDTIME),
     include/game_functions.php (add_time_opponent),
   * sgf.php, include/board.php, scripts/game_consistency.php:
   - game: write add-time into database,
     can choose to reset byo-yomi on add-time (not for Fisher-time),
     jump to add-time form if adding time
   - added support to add-time for opponent,
     adding hours to maintime and/or reset byoyomi,
   - added add-time-entry into Moves-table:
     PosX=POSX_ADDTIME, Stone=time-adder, PosY=BYO-RESET, Hours=added-hours

   * message.php, search_messages.php, send_message.php,
     include/message_functions.php, scripts/ChangeLog:
   - removed add-time-support (moved to game-page)
   - reverted change to Message.Type enum: removed ADDTIME

2007-07-27 juga

   * game.php:
   - add-time: reduced to one bottom-link to game-page for validation
   - also show add-time for my games where it's the opponents to move next

   * include/game_functions.php:
   - removed some comments, added TODO for no-add-time option

2007-07-27 rodival

   * skins/dragon/screen.css, include/std_functions.php,
     game_comments.php:
   - CSSed the game_comment page.
   - fixed a bug leaving the <c> and <h> tags unchanged in the HTML.

2007-07-26 rodival

   * include/time_functions.php (time_convert_to_hours),
     include/message_functions.php (interpret_time_limit_forms),
     send_message.php, game_functions.php, clock_tick.php:
   - introduced the time_convert_to_hours() function

   * include/quick_common.php (setTZ)
     status.php, daily_cron.php, userinfo.php,
     users.php, change_profile.php:
   - moved (and fixed) the summertime changes check from daily_cron.php
     to status.php in a "by user" basis.
   - now setTZ() return the previous timezone (backup purpose)
   - added a way to check the clock of a user in userinfo.php
   - comments adjusted for the other files

   * scripts/message_consistency.php,
     include/message_functions.php,
     status.php, add_to_waitingroom.php, join_waitingroom_game.php,
     list_messages.php, search_messages.php:
   - checked and removed the useless init_standard_folders(). This function
     could be merged into get_folders() as they are always used together.

2007-07-25 juga

   * game.php:
   - experimental support for adding time for opponent
   - added 3 alternative links for add-time for discussion

   * include/std_functions.php (make_menu):
   - support for allowing Form-object included in bottom-links

2007-07-24 rodival

   * skins/dragon/screen.css, include/message_functions.php:
   - messages and folders CSS adjustments

   * include/faq_functions.php, faq.php:
   - remove translations from the admin_faq preview.

   * include/std_functions.php, include/faq_functions.php,
     faq.php, admin_faq.php, translate.php,
     skins/dragon/screen.css:
   - full (and final?) CSS refund of the FAQ pages
   - introduced the "note" pseudo-tag which is always removed from display.
     this allow, for example, the faq admins to send infos to the translators.

   * edit_folders.php:
   - fix a bug disabling the possibility of renaming the STANDARD_FOLDERS
   - now, one can use mysql slashed chars in the folders' names


2007-07-23 rodival

   * include/make_game.php,
     send_message.php, join_waitingroom_game.php, error.php:
   - problem of "bad Running count" fix: more checks to find if the
     game had already been accepted.

   * game.php:
   - minor W3C compliance fix.

   * include/std_functions.php:
   - added an easier way to configure the vault parameters

   * edit_profile.php:
   - added the 'x' access key to the submit button

   * skins/dragon/screen.css, game.php, include/board.php:
   - forum list and board page CSS adjustments
   - players rating info fixed to CurrentRating/EndRating
     added StartRating in a CSS hidden element

2007-07-22 rodival

   * include/faq_functions.php, faq.php, admin_faq.php:
   - enhanced the admin_faq preview.
     added the file faq_functions.php for the common functions of the
     faq scripts.
     removed the T_() from admin_faq.php

   * include/form_functions.php:
   - removed useless include, added a comment

2007-07-22 juga

   * include/message_functions.php (message_list_table):
   - set correspondent for server-message or if unknown

   * game.php, message.php, search_messages.php, send_message.php,
     include/game_functions.php (allow_add_time_opponent, add_time_opponent):
   - added support to add time for opponent

   * error.php:
   - fixed typos

2007-07-22 rodival

   * include/countries.php, include/filter.php:
   - removed the obsolet 'Serbia and Montenegro (Yugoslavia)'
     from countries list

   * search_messages.php, docs.php, translate.php:
   - minor comments adjustments

   * include/error_functions.php (echo_error_list),
     clock_tick.php, halfhourly_cron.php, daily_cron.php:
   - enhanced a little the error handling of cron jobs
     added an argument $prefix to echo_error_list()
     added completion flags in the cron scripts (using the Ticks
     field of their owned clock)

2007-07-22 juga

   * links.php:
   - removed invalid and corrected existing links and texts
   - added IGF as mediator to most international go associations
   - added OGS

2007-07-21 juga

   * forum/search.php, include/filter.php, include/form_functions.php,
     include/tokenizer.php, opponents.php, search_messages.php,
     show_games.php, site_map.php:
   - corrected translated texts (typo, upper/lower-case,
     use '#'-notation to avoid ambiguities and allow notes-like namespaces)

   * docs.php:
   - added NEWS as "Release notes"

   * translate.php:
   - more instructive text about '#'-notation

   * admin_faq.php:
   - mark "current" entry with green marker
   - moved marker in front of entries (inbetween hard to see)
   - added cookie-based move-distance for up-/down-move of entries
     resettable with 0 to default 1

   * include/message_functions.php (message_list_table),
     search_messages.php:
   - abstracted details of types-filter to: Private, Game messages
   - moved 'Myself' into direction-column as message with from & to
     changed texts of direction-filter: Recieved/Sent -> From/To
   - left-aligned text in colored folder-checkboxes
   - removed bottom-links (Browser/Edit folders),
     because redundant with main-menu-links

   * admin_faq.php:
   - added preview-option in new/edit-entry page
   - added search to find texts also in hidden entries
   - locate page roughly where recent working took place using anchors
   - overworked instructions, some more comments
   - minor layout-adjustments: submit-button, labels, alignment

   * include/form_functions.php:
   - allows to omit maxlength of INPUTBOX-element specifying as <0

2007-07-21 rodival

   * include/std_functions.php, admin_admins.php:
   - introduced 2 new admins classes: developers and skinners
-----------
UPDATE `Players`
   SET `Adminlevel`=-1 WHERE `ID`=2 LIMIT 1 ;
-----------

   * edit_profile.php:
   - reduced the access to the skins (temporary)

   * translate.php, update_translation.php,
     include/make_translationfiles.php:
   - gave an access to all languages to the ADMIN_TRANSLATORS

   * include/std_functions.php, admin_do_translators.php, admin.php,
     admin_faq.php, admin_password.php, admin_translators.php,
     change_password.php, people.php, send_new_password.php, status.php,
   * scripts/convert_from_old_forum.php, scripts/convert_posindex.php,
     scripts/data_export.php, scripts/data_report.php,
     scripts/FAQtransl_consistency.php, scripts/game_consistency.php,
     scripts/generate_translation_texts.php, scripts/mailtest.php,
     scripts/message_consistency.php, scripts/player_consistency.php,
     scripts/recalculate_ratings2.php, scripts/start_frozen_clocks.php,
     scripts/update_translation_pages.php,
   * forum/admin.php, forum/index.php, forum/list.php, forum/read.php,
     forum/search.php:
   - removed the global $admin_level (use $player_row['admin_level'] instead)
   - normalization of each places where $player_row['admin_level'] is used

2007-07-20 rodival

   * forum/forum_functions.php, skins/dragon/screen.css:
   - added a "go back to first new" link at bottom of lists
     CSSed the "new" links
   - adjusted the MarkTerm colors

   * admin_password.php, send_new_password.php, forgot.php:
   - added a way to overwrite the current new password process for admins.

   * include/make_translationfiles.php, admin_faq.php, faq.php,
     translate.php, update_translation.php:
   - add of a better 'translated' flags management between the translators
     and the FAQ admins.
     now, the different languages may set their translated flag independently.
-----------
ALTER TABLE `Translations`
 ADD `Translated` ENUM( 'Y', 'N') NOT NULL DEFAULT 'N' AFTER `Text` ;
UPDATE `Translations` SET `Translated` = 'Y';
-----------
   - changed the 'hidden' and 'translatable' buttons of admin_faq.php
     from a toggle process to a set/reset process. Basicaly, they acts
     the same way but a simple refresh of the page will not "toggle-back"
     the option now.
   - modified the "move" part of admin_faq.php to allow a move greater
     than 1: admin_faq.php?move=u&dir=3 now move the item 3 steps higher.
     alas, actualy, this is only usable my manualy modifying the URL.

   * scripts/FAQtransl_consistency.php:
   - added file (as a seed for more)

2007-07-19 rodival

   * admin_translators.php, admin_do_translators.php:
   - added a 'Known languages' listing

2007-07-18 juga

   * change_profile.php, edit_profile.php,
     include/std_functions.php (get_maxrows, build_maxrows_array),
     include/table_columns.php:
   - added TableMaxRows (can be locally changed using cookie),
     store table-max-rows in new column Players.TableMaxRows
   - Table: URL-var 'maxrows' overrules user-prefs for max-rows
   - changed default for RowsPerPage: 50 -> 20
   - added limits for profiled maxrows: MAXROWS_PER_PAGE_PROFILE
   - added maxrows-default for get_maxrows(): MAXROWS_PER_PAGE_DEFAULT
   - added default rows-limit for build_maxrows_array() to restrict
     max-rows in edit-profile to MAXROWS_PER_PAGE [50]
-----------
ALTER TABLE `Players`
 ADD `TableMaxRows` smallint(5) unsigned default 20 NOT NULL;
-----------

   * list_messages.php:
   - reverted bottom-link to verbal form: Search messages (according to site-map)

   * include/filter.php (add_or_del_filter):
   - removed todo to save filter (for now)


   * include/filter.php (is_static),
     code_examples/filter_example.php, code_examples/filter_example2.php:
   - added global const FILTER_CONF_FORCE_STATIC making all
     filter-elements static (no filter-hide, set at the moment),
     added filter-config FC_HIDE to overrule that const
   - use default size 8 for Rating-Filters

   * opponents.php, users.php, waiting_room.php:
   - added filter-config FC_HIDE on Country-filter
   - use (default) size 8 for Rating-Filters

   * search_messages.php:
   - SQL-optimization: replaced 'Game_ID<>0' with 'Game_ID>0'

2007-07-18 rodival

   * include/std_functions.php, include/quick_common.php:
   - moved the IS_RUNNING_GAME constant in quick_common.php to make it
     usable by the rss and wap stuff and the 'quick_*' suite.

   * include/config.php:
   - moved a line closer to its friends.

   * include/message_functions.php, include/countries.php, site_map.php:
   - minor fixes, comments and translated strings.

2007-07-18 juga

   * opponents.php, user_stats.php, site_map.php, userinfo.php, users.php,
     include/filter.php, code_examples/filter_example.php:
   - "renamed" user_stats.php (removed) to opponents.php (added),
     copied full CVS-log from user_stats.php on initial revision


   * show_games.php, user_stats.php:
   - optimized SQL replacing 'OR'-operator with UNION-based SQL-query,
     activated with global const ALLOW_SQL_UNION in "include/config.php",
     needed to adjust sort-fieldnames (UNION forces to use fields from SELECT)
   - used more detailed bottom link-texts for games-page to show
     where you are and where you can go (showing my/all/other-users games,
     without adding more links), for observer-game-view added additional
     links to show all games (preserving shared URL-vars)

   * include/config.php (ALLOW_SQL_UNION):
   - added ALLOW_SQL_UNION as on/off-switch to control UNION-support,
     default now is to support UNION-queries


   * search_messages.php:
   - avoid SQL-'OR'-operator by reducing Correspondent-filter on Players.Handle,
     may later be reverted by using UNION-based-query
   - extended filters syntax-description with hint to what can be searched (Userid)
   - changed bottom-link to 'Browse folders'

   * include/message_functions.php (message_list_table):
   - changed message-list for search-messages-page to show
     full user-name with handle and link to userinfo,
     added message-link on subject

   * include/filter.php (get_syntax_description, get_syntax_hint),
     specs/filters.txt, code_examples/filter_example2.php:
   - added filter-config FC_SYNTAX_HINT allowing to extend a filters
     hover-text-syntax-description
   - added example for filter-config FC_SYNTAX_HINT

2007-07-17 juga

   * include/std_functions.php (not_in_clause):
   - added constant SQL-clause-part IS_RUNNING_GAME to apply for Games.Status
     to optimize SQL getting rid of '!='-operator to use index
   - changed func: build_not_in_clausepart(..) -> not_in_clause( enum-array, var-args )
     to build optimized 'NOT IN'-surrogate with IN for any table-column
   - removed func: not_in_Games_Status(), use not_in_clause( $ENUM_GAMES_STATUS, ...)

   * clock_tick.php, confirm.php, daily_cron.php, edit_vacation.php,
     halfhourly_cron.php, quick_status.php, show_games.php, status.php,
     scripts/player_consistency.php, scripts/start_frozen_clocks.php,
     user_stats.php, rss/status.php, wap/status.php:
   - optimized SQL getting rid of '!='-operator to use index on Games.Status,
     replaced using SQL-clause-part IS_RUNNING_GAME

   * forum/search.php:
   - changed Author-filter:
     only filtering on Players.Handle, removed OR with Players.Name
     adjusted Text by adding '(Userid)'

2007-07-16 juga

   * include/std_functions.php (build_not_in_clausepart, not_in_Games_Status):
   - added funcs to provide optimized SQL-part IN-clause using index,
     but allowing to express it with negated values,
     e.g. Status not_in_Games_Status('INVITE') <=> Status != 'INVITE'
     <=> Status NOT IN ('INVITE')
     !! all '!=' and 'NOT IN' SQL-parts should be replaced if the
     databases index cardinality on that field is >2 or at least if >3

2007-07-16 rodival

   * include/std_functions.php (send_message, delete_all_observers):
   - ajusted the arguments of send_message() including the previous
     message modifications
     enabled the use of send_message()
     changed the escaped state of the Text argument of delete_all_observers()
     now it should NOT be escaped before the call.

   * send_message.php, join_waitingroom_game.php, clock_tick.php:
   - enabled the use of send_message()

   * confirm.php:
   - enabled the use of send_message() and notify()

   * include/std_functions.php, include/make_game.php (create_game),
     include/rating.php (get_rating_at, convert_to_rating, read_rating),
     include/filter.php (convert_rank):
   - introduced the OUT_OF_RATING constant (ominous limit for ratings).
     now read_rating() always return a numeric value.

   * skins/dragon/screen.css:
   - adjusted the size of the separations of the forum posts.
     added some comments

   * user_stats.php, show_games.php:
   - reversed the "NOT IN ('INVITED','FINISHED')" clauses

2007-07-16 juga

   * include/std_classes.php (get_select, get_select_normal),
     code_examples/query_sql.php:
   - QuerySQL: added basic UNION-support allowing non-template-WHERE-clause,
     specify with SQLP_UNION_WHERE; added example

2007-07-15 juga

   * include/filter_functions.php (createTokenizerConfig),
     include/filter_parser.php (TextParser.parse):
   - changed default filter-quote-type: use quoting using single-quotes "'"
   - fixed bug: wildcard '*' now has higher precedence over separator '-',
     can be controlled using TEXTPARSER_PRECEDENCE_SEP-flag

   * skins/dragon/screen.css:
   - removed no longer needed style for Filter <sup> after using
     Filter-hide-image

   * users.php:
   - widened input-box-size for Rating-filter

2007-07-15 rodival

   * include/filter.php (build_generic_selectbox_elem):
   - moved the "\n" before "</select>" to avoid a spacing effect after the
     select box.

   * include/table_columns.php (make_table_filter),
     skins/dragon/screen.css:
   - inserted the CSSed "hide" buttons for the filters, the same way those
     from the column headers.

2007-07-15 juga

   * include/filter.php (parse_value), code_examples/filter_example2.php:
   - FilterRelativeDate: allowed '<unit' as additional syntax

2007-07-14 juga

   * include/std_classes.php (merge_from_parts):
   - QuerySQL: assure mysql5.0-compatibility by replacing ','-join
     with INNER JOIN

   * search_messages.php:
   - layout-changes:
     - use smaller padding (6 -> 4px) for folder-boxes
     - compact form and page (reorder filters and less empty rows)

   * user_stats.php, waiting_room.php:
   - compact form and page (less empty rows)

   * users.php:
   - use proper upper/lower-case on title

   * forum/search.php:
   - removed anchor on table-search (filters can have errors)

   * include/table_columns.php, skins/dragon/screen.css:
   - compact table (less empty rows)
   - right-align paging next-link

2007-07-14 rodival

   * include/table_columns.php:
   - added the set_sort() function to force the table sort

   * status.php, users.php, user_stats.php:
   - managed the sort arguments the new way.

   * include/message_functions.php, include/filter.php, list_messages.php,
     search_messages.php, site_map.php, forum/search.php:
   - adjusted some comments and T_() strings

   * include/filter.php (get_submit_elements),
     include/table_columns.php (make_add_column_form),
     forum/search.php:
   - a proposition for the get_submit_elements() function: added a
     $filtertype argument to manage the buttons name.
     modified the other files accordingly.

2007-07-13 juga

   * include/filter.php (FilterMysqlMatch.get_terms, get_submit_elements):
   - bugfix get_terms() for Mysql-match:
     filter shouldn't return terms if inactive
   - renamed start-/reset-search -> apply/reset-filter
   - comment for minimum mysql-version for fulltext-search:
     mysql 4.0.1 (boolean-mode), 4.1.1 (query-expansion)

2007-07-12 rodival

   * include/std_functions.php (parse_tags_safe, parse_html_safe),
     include/message_functions.php (message_info_table,
     message_list_table),
   * forum/list.php, forum/forum_functions.php (draw_post,
     display_posts_pending_approval),
     skins/dragon/screen.css:
   - moved the mark_terms feature into the make_html_safe process.
     added the $mark_terms argument to parse_html_safe() and make_html_safe()
     removed the <term> pseudo-tag previously used to mark the terms
     removed the now obsolete mark_terms() function
   - introduced the SUBJECT_HTML constant to highlight to common "style"
     of the subjects.

   * forum/search.php, forum/forum_functions.php (make_link_array),
     include/filter.php:
   - changed the type of the search form to POST because a GET one plus
     a url #id part make the buttons inactive if no fields have changed.
     added a 'x' accesskey to the main button of the search page
     fixed some minor weakness.
     a try to include a "moderator" search but this need to define a new
     subclass in draw_post: added a comment and postponed it.

   * include/table_columns.php, faq.php, waiting_room.php,
     forum/read.php:
   - minor changes on comments.

2007-07-11 juga

   * include/filter.php (class FilterMysqlMatch, extract_match_terms):
   - FilterMysqlMatch: renamed boolean-mode -> expert-mode,
     simplified extracting of regex-terms

2007-07-11 rodival

   * include/table_columns.php (make_tablehead),
     include/table_infos.php (make_tablerow),
     skins/dragon/screen.css:
   - enhanced the row highlight display
   - renamed 'remcol.gif' to the more general 'remove.gif'

   * include/std_functions.php:
   - enable the javascript tools.

   * include/translation_functions.php:
   - new try for T_ #info: cut if the char before '#' is not a space

2007-07-10 rodival

   * edit_bio.php:
   - readonly+message instead of disabled

   * game.php:
   - onchange on gotomove select box

   * people.php:
   - "language name not found" now display the language code

   * include/translation_functions.php:
   - better T_ #info cut

2007-07-09 rodival

   * join_waitingroom_game.php, include/make_game.php (create_game(),
     make_standard_placement_of_handicap_stones()):
   - an other try to fix the bad Running count bug:
     a small enhancement of the handicap management.
     a rewrite of join_waitingroom_game.php to make easier the comparison
     with the similar part (create game) of send_message.php.

   * game.php:
   - add of a message to invite the player to validate his action.

2007-07-09 juga

   * game.php:
   - deactivated prev/next game-navigation with images

   * include/message_functions.php:
   - fix last fix for highlighting terms in message: using correct var

2007-07-09 rodival

   * include/std_functions.php, scripts/mailtest.php:
   - adjustments to test a mass email post.

   * forum/forum_functions.php:
   - reverted last fix

2007-07-08 rodival

   * forum/list.php, forum/forum_functions.php,
     include/message_functions.php:
   - emphasized the fact (and fixed some of buggy ones) that a Subject
     must not contain HTML tags. Some fixes around mark_term() are
     temporary and will be better handled soon.

   * forum/search.php:
   - default JOIN changed with INNER JOIN

   * edit_bio.php:
   - limitation of the cells size in an other way than cut_string(),
     not based on the text length but on the box size,
     using disabled or readonly textarea

   * halfhourly_cron.php, send_new_password.php,
     include/std_functions.php:
   - enabled the new send_mail() function everywhere... with a rollback
     possibility because I have no way to test the emails nor on my
     private server either on the devel server. >>> should be tested.

2007-07-08 juga

   * game.php:
   - added images (start/end, previous/next-moves) as links to navigate
     within game; used existing images start/backward/forward/end.gif
     [later removed]

   * users.php, code_examples/query_sql.php, forum/search.php,
     include/message_functions.php:
   - added 'AS' for SQL-table aliases

2007-07-07 rodival

   * show_games.php, users.php, include/message_functions.php,
     include/std_classes.php:
   - default JOIN changed with INNER JOIN

   * include/table_columns.php (make_tablehead),
     skins/dragon/screen.css:
   - added images in the header to show how the table columns are sorted.
     this implied to change the previous hidding red 'x' to an image too.
   - added a constant to disable the second level of sort.

   * images/sort1a.gif, images/sort1d.gif,
     images/sort2a.gif, images/sort2d.gif, images/remove.gif:
   - new images added used for table-sort-indicator

2007-07-07 rodival

   * include/std_functions.php (send_email, send_message, clean_url,
     is_logged_in):
   - added the send_email() and send_message() functions
   - adjusted clean_url() to chop all the trailing '?' and '&' chars
   - introduced the "fever vault" in is_logged_in(). May be adjusted
     or disabled whith the FEVER_CNT constant. May be tunned for the
     guest account which is a multiple account and so should have larger
     limits.
     The "fever vault" process had 3 main variables: if a user produces
     more that FEVER_CNT page calls during "one hour", he will be
     vaulted for one day (i.e. unable to log himself while receiving
     an info message).
-----------
ALTER TABLE `Players`
 CHANGE `Hits` `Hits` int(11) NOT NULL DEFAULT 0 ,
 ADD `VaultTime` datetime NOT NULL default '0000-00-00 00:00:00' AFTER `Hits` ,
 ADD `VaultCnt` smallint(5) unsigned default 0 NOT NULL AFTER `Hits` ;
-----------

2007-07-07 rodival

   * include/connect2mysql.php (connect2mysql):
   - changed the returned value by connect2mysql(true): in case of
     error, it returns the error message now instead of false.
   - added the mysql_single_col() function

   * error.php,
   * include/error_functions.php (set_mode, add_error, error):
   - now set_mode() return the previous mode (to save and restore it)
   - now add_error() and error() return false if the errors are not
     fatal. This allow $result = mysql_query(...) or error(...);
     to continue with $result === false
   - finally, if an error occurs during the initialization of
     error.php, it will no more recall error.php and thus not fall
     in a recursive trap.

2007-07-07 rodival

   * update_translation_pages.php, generate_translation_texts.php,
     message_consistency.php, player_consistency.php, recalculate_ratings2.php,
     start_frozen_clocks.php, convert_posindex.php, convert_from_old_forum.php,
     phpinfo.php:
   - disabled some one shot scripts, enhanced the others

2007-07-06 rodival

   * confirm.php, quick_play.php:
   - moved the place where the GameNotes are deleted
   - few minor debug messages adjustments (quick_play accordingly)

2007-07-06 rodival

   * admin_faq.php:
   - hidden the info box and added an anchor to show it.
   - adjusted some colspan= of the main table.
   - allowed to edit an item even if hidden.
   - inverted the icon of Hide and Show buttons.

2007-07-05 rodival

   * translate.php, update_translation.php,
   * include/make_translationfiles.php (translations_query):
   - modified the 'Untranslated' option (may be applied on every group).
     therefore, added a 'All groups' option.
   - hidden the now big info box and added an anchor to show it.

2007-07-03 rodival

   * translate.php, update_translation.php,
   * include/make_translationfiles.php (translations_query):
   - added a filter on the english part.
     added the $filter_en argument to translations_query()

   * INSTALL:
   - added a step to protect the scripts/ folder.

2007-07-02 juga

   * show_games.php:
   - added hover-text on colors-column for "my running games"

2007-07-01 juga

   * include/std_functions.php (make_url):
   - reverted changes to make_url-func to fix bug

2007-06-30 juga

   * waiting_room.php:
   - changed bottom-link to 'Show all suitable games' to indicate it's a reset

2007-06-30 juga

   * include/filter.php,
     include/filter_functions.php,
     include/filter_parser.php,
     include/std_classes.php,
     include/tokenizer.php,
   * code_examples/filter_example.php,
     code_examples/filter_example2.php,
     code_examples/query_sql.php,
     code_examples/tokenizer_example.php,
   * skins/dragon/screen.css,
   * specs/filters.txt:
   - added classes and functions comprising new Filter-framework
   - added examples for filter-stuff
   - added some CSS for filters
   - added main-doc in specs/filters.txt

   * include/table_columns.php (Table.constructor, set_externalform,
     set_rows_per_page, use_show_rows, current_filter_string,
     add_or_del_column, handle_show_rows, current_rows_string,
     get_displayed_tableheads, register_filter, get_query,
     add_external_parameters, current_extparams_string):
   - added searching capabilities on table-columns using Filter-framework
     see specs/filters.txt and code_examples/form_example2.php
   - fixed paging-link-bug preserving form-values with links
   - added maxrows-selection to restrict row-size of table-list

   * include/form_functions.php (set_config, get_config,
     set_attr_form_element, set_layout, set_area, add_empty_row,
     create_form_string, get_areaconf),
   * code_examples/form_example.php, code_examples/form_example2.php:
   - added Form-types 'FILTER' and 'FILTERERROR' for Filter-framework
   - added area-group layouting and some additional layout-config
     when used as External-Form with Table(-Filters)
   - added example for area-layouting, allow examples to be opened in browser

   * show_games.php, users.php, waiting_room.php, message.php, status.php,
   * forum/search.php:
   - added or extended searching capabilities using filter-framework
   - adjustments for using filters
   - added (recommended) new indexes to support new filters;
     needed space + reasons given as comment:
-----------
ALTER TABLE `Games`        -- +3 MB (for filter)
 ADD INDEX `Handicap` (`Handicap`) ;
ALTER TABLE `Games`        -- +2 MB (for filter/sort)
 ADD INDEX `Moves` (`Moves`) ;
ALTER TABLE `Games`        -- +3 MB (for filter/sort)
 ADD INDEX `Score` (`Score`) ;

ALTER TABLE `Posts`        -- +0.2 MB (for filter)
 ADD INDEX `Parent_ID` (`Parent_ID`) ;
ALTER TABLE `Posts`        -- +0.2 MB (for filter/sort)
 ADD INDEX `Time` (`Time`) ;

ALTER TABLE `Players`      -- +0.2 MB (for filter)
 ADD INDEX `Country` (`Country`) ;
ALTER TABLE `Players`      -- +0.4 MB (for filter/sort, often changed)
 ADD INDEX `Lastaccess` (`Lastaccess`) ;
-----------

   * search_messages.php, list_messages.php,
   * include/message_functions.php (init_standard_folders, echo_folder_box,
     message_list_query, message_list_table):
   - added new page for searching messages using filters
   - signature-change of funcs to change layout or highlight search-terms:
     message_list_query/_list_table/_info_table, echo_folder_box
   - signature-change of message_list_table-func adding args to control
     message-list output including fields for message-searching:
     folder, type, Direction, message partner
   - added (mandatory) fulltext-index for search on messages
   - slight modifications of SQL using table-alias and join on
     MessageCorrespondents
-----------
ALTER TABLE `Messages`      -- +4 MB (for joins/filter)
 ADD INDEX `ReplyTo` (`ReplyTo`) ;
ALTER TABLE `Messages`     -- ca. +80% of data-size (biggest change)
 ADD FULLTEXT INDEX `Subject` (`Subject`,`Text`) ;
-----------

   * users.php:
   - replaced URL-var 'showall' and page-bottom-link with 'Active'-Table-Filter

   * user_stats.php, userinfo.php, users.php:
   - added new page to show opponents and games-statistics for two players

   * waiting_room.php:
   - added Player-Country-column and Filter on it
   - bugfix: used wrong SQL-field for table-column #1 (sort by name)
   - replaced URL-var 'showall' and page-bottom-link with two Table-Filters
     Suitable-Handicap and Suitable-Rating-Range
   - change page-title reflecting current "suitable"-state
   - re-added page-bottom-links "Show all games" and "Show only suitable
     games" to reset to filter-defaults

   * forum/read.php, forum/search.php,
     forum/forum_functions.php (make_link_array, forum_start_table),
   * include/quick_common.php:
   - added order-selectbox in forum-search
   - added support to highlight search-terms in a post or message
   - fixed bug for paging to preserve form- and filter-values
   - fixed bug with relevance when using search-terms in boolean-mode
   - added const DAYS_NEW_END used for forum-reads

   * include/std_functions.php (DEBUG_SQL, map_to_string, mark_terms,
     get_maxrows, build_maxrows_array, make_url, clean_url, has_observers,
     blend_alpha_hex):
   - added some functions and consts to support Filter-framework:
     - support to handle maxrows of table-listing, added funcs
       get_maxrows, build_maxrows_array
     - added allowed HTML-text <term> to support term-highlighting
     - added mark_terms-func to highlight terms within potential XML-text
     - added defaults for Table-Filter-layout
     - adjusted body-width to 90% fixing some strange centric-related layout-
       effects with nested tables (may hopefully get fixed later using CSS)
   - fixed bug in make_url-func only append URI_AMP or '?' if not there,
     added clean_url-func to chop off trailing URI_AMP or '?'
   - changed default-handling of bgcolor for echo_folder_box-func
   - added has_observers-func

   * edit_bio.php:
   - reduce output of bio-texts to 200 chars when changing order

   * site_map.php:
   - added new and search pages

   * game.php:
   - added page-bottom-link to show observers (users.php?observe=<gid>)

   * NEWS, TODO:
   - cleanup some items done

   * INSTALL:
   - move also dot-files like .cvsignore after CVS-checkout

   * scripts/README.developers:
   - added categories and more hints about (surprising) PHP-behaviour
   - don't use filenames with upper-case

2007-06-30 rodival

   * include/std_functions.php, list.php:
   - removed the unused $MaxRowsPerPage global var.

   * include/make_translationfiles.php (translations_query),
   * translate.php, update_translation.php:
   - added a "prev/next" management of the translators' pages.
     added the $from_row argument to translations_query()

   * scripts/README.translations:
   - documenting the "do_it" URL argument of generate_translation_texts.php

2007-06-29 rodival

   * people.php, admin_faq.php:
   - added the info about FAQadmins' activity to "LastUpdate".
-----------
ALTER TABLE `FAQlog`
 ADD `Date` timestamp(14) NOT NULL AFTER `Answer` ;
UPDATE `FAQlog` SET `Date` = '0' ;
-----------

   * include/translation_functions.php (language_exists,
     T_, get_language_descriptions_translated),
   * translate.php:
   - case insensitive search of the language name in language_exists().
   - added an automatic cut of the #xxx part of the alternate english words
     in T_().
   - added a $keep_english parameter to get_language_descriptions_translated().
   - changed all $langcode names to the now more accurate $browsercode.

   * include/make_translationfiles.php (translations_query),
   * admin_translators.php, admin_do_translators.php,
     translate.php, update_translation.php,
   * scripts/generate_translation_texts.php:
   - added the add_text_to_translate function.
   - added the insertion of the new language names in the translation process.
   - added an optional alphabetical sort in translations_query().
   - added a better "T_(...)" template detection using eval() in
     generate_translation_texts.php. Also added a "do_it" URL argument.
   - changed all $langcode names to the now more accurate $browsercode.

   * scripts/update_translation_pages.php (find_php_files):
   - updated the $directories array in find_php_files().
   - added a "Fatal error" - waiting for a fix - in case of a $TranslateGroups
     not found in the database. The bug may come from a typo in the PHP code
     or from a missing row in the database. The default "do_it" action fix
     this last case.

2007-06-28 rodival

   * statistics.php, graph.php, ratingpng.php, statisticspng.php:
   - added the statratingspng.php file which display stats on ratings.
     Minor adjustments of other files to handle it.
     Added the function patterncolor() to graph.php.

2007-06-26 rodival

   * add_to_waitingroom.php, join_waitingroom_game.php, waiting_room.php:
   - fixed the "double game" handicap option from the waitingroom.
     In the waitingroom table, renamed the old "Handicap" column to
     "Colors" and added the new "Handicap" one containing the number
     of handicap stones.
-----------
ALTER TABLE `Waitingroom`
 ADD `Handicap` int(11) NOT NULL default '0' AFTER `Komi` ;
-----------

   * include/message_functions.php (game_info_table),
     include/make_game.php,
   * send_message.php:
   - adjusted to follow the "double game" handicap fix and its display.
   - and a try to fix the bad Running count bug:
     In the Players table, near 20 of the Running counts were 1 or 2
     points too high. I've not found why this occured. Maybe a script
     abort between two MySQL updates, I don't know.
     Other counts like Finished, Won or Lost were not corrupted.

2007-06-25 rodival

   * scripts/data_report.php:
   - implementation of a two steps validation:
     first, just the EXPLAIN, then the full result.
   - differenciation of the NULL values.

   * scripts/data_export.php:
   - including the translations tables export
     and hidding some minor variations.

2007-06-24 rodival

   * scripts/game_consistency.php, include/move.php (check_move):
   - enhanced consistency check.  Added some Time and Rating checks.
     Now, check_move() returns '' if no error or the error message
     (instead of returning false on error and true else).

   * people.php:
   - changed the info about translators' activity to "LastUpdate".

2007-06-03 rodival

   * game.php, confirm.php:
   - fixed the bug: can't deleted a game while PASS or SCORE step entered
     before the delete limit.
     added the GamesNotes deletion to the delete feature.

   * include/std_functions.php (user_reference):
   - because of old DGS users having a pure numeric Handle (not starting
     by a letter), the illegal_chars($player_ref) call had been replaced
     by a simple ereg() comparison here.

   * userinfo.php, users.php:
   - changed the Percent calculus to 100*(Won+Jigo/2)/RatedGames instead
     of the previous 100*Won/RatedGames.

2007-03-27 rodival

   * edit_vacation.php:
   - fixed the bug: adding 2.00 days to 0.25 days gave 2.00 days.
     In fact, when OnVacation was < 1, one can't add but just start vacations.

2007-03-17 rodival

   * confirm.php:
   - added a missing parenthesis.

   * admin_faq.php:
   - adjusting a 'NULL'.

2007-03-01 rodival

   * images/flags/ls.gif:
   - replaced by the new Lesotho flag (old one kept in ls_old.gif)
-----------

   * images/forward.gif, images/backward.gif,
     images/end.gif, images/start.gif,
     images/plus.gif, images/minus.gif, images/cross.gif:
   - added images
-----------

2007-02-04 rodival

   * init.mysql, include/std_functions.php (make_session_code):
   - new MySQL 4.1 behaviour: the PASSWORD() produce a 41-byte hash value
   - modifying Sessioncode in a same spirit
-----------
ALTER TABLE `Players`
 CHANGE `Password` `Password` VARCHAR( 41 ) NOT NULL default '' ,
 CHANGE `Newpassword` `Newpassword` VARCHAR( 41 ) NOT NULL default '' ,
 CHANGE `Sessioncode` `Sessioncode` VARCHAR( 41 ) NOT NULL default '' ;
-----------

   * init.mysql:
   - full periodic check, previous missing update
-----------
ALTER TABLE `TournamentRound`
 CHANGE `Handicaptype` `HandicapType` int(11) NOT NULL default '0' ;
ALTER TABLE `TranslationGroups`
 CHANGE `Groupname` `Groupname` varchar( 32 ) NOT NULL default '' ;
ALTER TABLE `Translations`
 CHANGE `Text` `Text` blob NOT NULL ;
ALTER TABLE `Adminlog`
 CHANGE `Handle` `Handle` varchar(16) NOT NULL default '' ,
 CHANGE `Message` `Message` text NOT NULL ;
-- ALTER TABLE `Adminlog`
--  ADD `IP` varchar(16) NOT NULL default '' AFTER `Date` ;
ALTER TABLE `FAQ`
 CHANGE `Level` `Level` int(11) NOT NULL default '0' ,
 CHANGE `Question` `Question` int(11) NOT NULL default '0' ,
 CHANGE `Answer` `Answer` int(11) NOT NULL default '0' ;
-----------

   * data_export.php:
   - Create_options management added and CSS adjusted.

2007-02-03 rodival

   * include/graph.php, ratingpng.php, ratinggraph.php:
   - rating graph displayed "by number of games"
     (new X-axis option added to the old "by date of games")
   - complete rebuild of graph.php. Graph class added.
     handling the "bynum" option

   * statisticspng.php, statistics.php:
   - using the new Graph class

   * include/rating.php, include/std_functions.php:
   - small modifications consequently

2007-01-25 rodival

   * include/table_columns.php:
   - enhancements mainly to fix the "button" column min-width
     until CSS min-width is working
   - introduced use of external form (var ExternalForm)
   - added funcs: set_default_sort(), get_arg()

   * include/std_functions.php (split_url, yesno, modf & more),
     include/message_functions.php:
   - added funcs
   - adaptations for enhanced Table_Info class, "button" columns and
     common to waitingroom and message

   * skins/dragon/screen.css,
   * edit_bio.php,
     list_messages.php,
     message.php,
     show_games.php,
     status.php,
     userinfo.php,
     waiting_room.php:
   - using new Table_Info class properties, for games infos and
     common to waitingroom and message

   * NEWS, news.php, skins/dragon/screen.css:
   - adding NEWS file [initally built by JUG] with user-visible changes

2007-01-21 rodival

   * scripts/README.developers, scripts/CHANGELOG.developers, CHANGELOG:
   - added info files

2007-01-12 rodival

   * include/connect2mysql.php (mysql_addslashes) + most of the other
     files (used nearly everywhere):
   - generalization of the right MySQL addslashes feature,
     introducing function to properly escape value in SQL-statements

   * do_registration.php:
   - rejection of some account usurpers

   * whole set of forum files/functions using table 'Posts.PosIndex':
   - changed 'Posts.PosIndex' to NOT NULL
-----------
ALTER TABLE `Posts`
 CHANGE `PosIndex` `PosIndex` varchar(80) binary NOT NULL default '' ;
-----------

   - removing NULL fields
     the Posts.crc32 int(11) default NULL, seems to be
     kept (while not yet used)
-----------
ALTER TABLE `Players`
 CHANGE `IP` `IP` varchar(16) NOT NULL default '' ;

ALTER TABLE `Posts`
 CHANGE `Time` `Time` datetime NOT NULL default '0000-00-00 00:00:00' ,
 CHANGE `Lastchanged` `Lastchanged` datetime NOT NULL default '0000-00-00 00:00:00' ,
 CHANGE `Lastedited` `Lastedited` datetime NOT NULL default '0000-00-00 00:00:00' ,
 CHANGE `LastPost` `LastPost` int(11) NOT NULL DEFAULT 0 ,
 CHANGE `Subject` `Subject` varchar(80) NOT NULL default '' ,
 CHANGE `Text` `Text` text NOT NULL ,
 CHANGE `User_ID` `User_ID` int(11) NOT NULL DEFAULT 0 ,
 CHANGE `Parent_ID` `Parent_ID` int(11) NOT NULL DEFAULT 0 ,
 CHANGE `PostsInThread` `PostsInThread` int(11) NOT NULL DEFAULT 0 ,
 CHANGE `old_ID` `old_ID` int(11) NOT NULL DEFAULT 0 ;
-----------

   * include/table_infos.php:
   - enhanced Table_Info class to handle waiting_room particularities and
     games info
   - changed syntax of row/column-description (properties)

   * waiting_room.php, userinfo.php, edit_bio.php, status.php:
   - using the new Table_infos class properties

   * skins/dragon/screen.css:
   - to follow the Table_infos modifications

2007-01-10 rodival

   * include/table_infos.php:
   - adding class Table_infos for more CSS friendship

   * userinfo.php, edit_bio.php, status.php:
   - using class Table_infos

2007-01-09 rodival

   * change_bio.php, edit_bio.php: [from code mailing of JUG]
   - adding the "bio infos order" feature
   - removing NULL fields
-----------
ALTER TABLE `Bio`
 ADD `SortOrder` INT( 11 ) DEFAULT 0 NOT NULL AFTER `Text` ;

ALTER TABLE `Bio`
 CHANGE `Category` `Category` VARCHAR( 40 ) NOT NULL DEFAULT '' ,
 CHANGE `Text` `Text` TEXT NOT NULL DEFAULT '' ;
-----------

2006-12-29 rodival

   * include/std_functions.php (verify_email) + all callers:
   - adjusted error signature and error behaviour

2006-12-28 rodival

   * init.mysql:
   - removing NULL fields in database
   - added 'RESULT' to enum Messages.Type for a futur message chain walking
     throught the game comments. The 'RESULT' messages are those send at
     the end of a game.
-----------
ALTER TABLE `Messages`
 CHANGE `Type` `Type` ENUM( 'NORMAL', 'INVITATION', 'ACCEPTED', 'DECLINED', 'DELETED', 'DISPUTED', 'RESULT' ) DEFAULT 'NORMAL' NOT NULL ,
 CHANGE `ReplyTo` `ReplyTo` INT( 11 ) DEFAULT 0 NOT NULL ,
 CHANGE `Game_ID` `Game_ID` INT( 11 ) DEFAULT 0 NOT NULL ,
 CHANGE `Time` `Time` DATETIME DEFAULT '0000-00-00 00:00:00' NOT NULL ,
 CHANGE `Subject` `Subject` VARCHAR( 80 ) DEFAULT '' NOT NULL ,
 CHANGE `Text` `Text` TEXT NOT NULL ;

ALTER TABLE `MessageCorrespondents`
 CHANGE `uid` `uid` INT( 11 ) DEFAULT 0 NOT NULL ,
 CHANGE `mid` `mid` INT( 11 ) DEFAULT 0 NOT NULL ;
-----------

   * include/time_functions.php (echo_time_remaining) + all callers:
   - fix bad display of JAP byoyomi when byoyomi reached
     ( "--- + 3 periods of 4h" instead of "4h + 3 periods of 1d" )

   * include/std_functions.php (mysql_single_fetch) + all callers:
   - force to use $debugmsg with mysql_single_fetch()

2006-12-27 rodival

   * images/flags/__.gif:
   - resizing
-----------

   * images/flags/eu.gif:
   - added, though not enabled in countries.php
-----------

2006-12-23 rodival

   * init.mysql:
   - added skinname
-----------
ALTER TABLE `Players`
 ADD `SkinName` VARCHAR( 32 ) DEFAULT '' NOT NULL AFTER `OnVacation` ;
-----------

   * skins/,
     skins/index.php,
     skins/known_skins.php,
     skins/dragon/index.php,
     skins/dragon/screen.css,
     skins/dragon/print.css:
   - added CSS files for skins

   * include/std_functions.php (start_page) + all callers:
   - use of skins

   * sgf.php:
   - score 0 for Jigo

-----------

==================================================================
Release [2006-08-07] - DGS 1.0.12 - CVS-tag [DGS-stable-200608]

